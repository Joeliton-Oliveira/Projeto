var config={boletim:{}};config.boletim.cell={},config.boletim.cell.css={},config.boletim.cell.css.default={icon:"fa fa-tasks",background:"item-positive",titleBackground:"bar-positive",notaBadge:"badge-media",notaIcon:"fa fa-check-square-o",mediaTurmaIcon:"fa fa-thumbs-up",faltasBadge:"badge-media",faltasIcon:"fa fa-calendar",aulasPrevistasBadge:"badge-media",aulasPrevistasIcon:"fa fa-calendar",aulasMinistradasBadge:"badge-media",aulasMinistradasIcon:"fa fa-calendar"},config.boletim.cell.css.reprovado={icon:"fa fa-thumbs-o-down",background:"item-assertive",titleBackground:"bar-assertive",notaBadge:"badge-faltas",notaIcon:"fa fa-times",mediaTurmaIcon:"fa fa-thumbs-up fa-flip-vertical",faltasBadge:"badge-faltas",faltasIcon:"fa fa-calendar-times-o",aulasPrevistasBadge:"badge-faltas",aulasPrevistasIcon:"fa fa-calendar-times-o",aulasMinistradasBadge:"badge-faltas",aulasMinistradasIcon:"fa fa-calendar-times-o",title:"Reprovado"},config.boletim.cell.css.aprovado={icon:"fa fa-thumbs-o-up",background:"item-balanced",titleBackground:"bar-balanced",notaBadge:"badge-aprovado",notaIcon:"fa fa-check-square-o",mediaTurmaIcon:"fa fa-thumbs-up",faltasBadge:"badge-media",faltasIcon:"fa fa-calendar",aulasPrevistasBadge:"badge-aprovado",aulasPrevistasIcon:"fa fa-calendar",aulasMinistradasBadge:"badge-aprovado",aulasMinistradasIcon:"fa fa-calendar",title:"Aprovado"};var removeAllQueryParameters=function(searchParams){var newUrl;for(let key of searchParams.keys())searchParams.delete(key);if(window.history.replaceState){let searchString=searchParams.toString().length>0?"?"+searchParams.toString():"";newUrl=window.location.protocol+"//"+window.location.host+window.location.pathname+searchString+window.location.hash,window.history.replaceState({},"",newUrl)}return newUrl};function getStateViewURL(object){var value;return Object.keys(object).some(function(k){return"templateUrl"===k?(value=object[k],!0):object[k]&&"object"==typeof object[k]?void 0!==(value=getStateViewURL(object[k])):void 0}),value}var pageController,getNextURL=function($objLocation,$objNewState){let nextURL=$objLocation.$$absUrl.split("#")[0],sName=$objNewState.name;for("home.calendarioAulas"==sName&&(sName="home/aulas"),"home.tarefas"==sName&&(sName="home/tarefa-list");sName.indexOf(".")>-1;)sName=sName.replace(".","/");return nextURL+="#/"+sName};window.hostApp=window.hostApp||window.location.origin+"/"+window.location.pathname.split("/")[1]+"/";var external_chart,external_module,external_scope,app=(window,angular.module("MyApp",["ionic","ui.router","ui-notification","ngCookies","pascalprecht.translate","tmh.dynamicLocale","ngResource","login.service","oc.lazyLoad","ui.utils.masks"]).constant("LOCALES",{locales:{pt_br:"Portugues (Brasil)",en_us:"English"},preferredLocale:"pt_BR"}).run(function($ionicPlatform){$ionicPlatform.ready(function(){window.StatusBar&&StatusBar.styleDefault()})}).config(function($controllerProvider,$httpProvider,$ionicConfigProvider){$ionicConfigProvider.navBar.alignTitle("center"),$ionicConfigProvider.backButton.text("Voltar"),$httpProvider.interceptors.push("InterceptorFactory")}).config(function($stateProvider,$urlRouterProvider,$ocLazyLoadProvider,NotificationProvider){$ocLazyLoadProvider.config({debug:!1}),NotificationProvider.setOptions({delay:5e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"center",positionY:"top"});var $log=angular.injector(["ng"]).get("$log");$stateProvider.state("login",{cache:!0,url:"/login",controller:"LoginController",templateUrl:function(){return"views/login.view.html"}}).state("recuperarSenha",{cache:!1,url:"/resetsenha",controller:"RecuperarSenhaController",templateUrl:function(){return"views/recuperarsenha.view.html"}}).state("redefinirSenha",{cache:!1,url:"/redefinirsenha",controller:"RecuperarSenhaController",templateUrl:function(){return"views/recuperarsenha.view.html"}}).state("recuperarSenhaToken",{cache:!1,url:"/resetsenha/:token",controller:"RecuperarSenhaController",templateUrl:function(){return"views/recuperarsenha.view.html"}}).state("obterboletotoken",{cache:!0,url:"/obterboletotoken",controller:"ObterBoletoTokenController",templateUrl:function(){return"views/obter.boleto.token.view.html"},resolve:{tokenLoad:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load("node_modules/angular-file-saver/dist/angular-file-saver.bundle.min.js","js/services/download.arquivo.service.js","js/services/cobranca.service.js")}]}}).state("home",{cache:!1,abstract:!0,url:"/home",controller:"HomeController",templateUrl:function(){return"views/logged/home.view.html"},resolve:{themeLoad:["UserService",function(UserService){UserService.setTheme()}],homeLoad:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load(["_lib/libal-1705683051799.min.js"],{serie:!0,insertBefore:"libal"}).then(function(){return $ocLazyLoad.load(["_app/appcc-1705683051799.min.js"],{serie:!0,insertBefore:"appcc"})})}]}}).state("home.loading",{cache:!1,url:"/loading",controller:"",views:{mainContent:{controller:"",controllerAs:"",templateUrl:function(){return"views/logged/_loading.html"}}}}).state("home.responsavel",{cache:!1,pageId:"responsavel",url:"/responsavel",controller:"HomeController",views:{mainContent:{controller:"AlunosResponsavelController",controllerAs:"vm",templateUrl:function(){return"views/logged/alunos.responsavel.view.html"}}}}).state("home.aluno-cadastro",{cache:!1,pageId:"dadoscadastrais",url:"/aluno-cadastro",controller:"HomeController",views:{mainContent:{controller:"AlunoCadastroController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.cadastro.view.html"}}}}).state("home.componentes",{cache:!1,pageId:"componentes",url:"/componentes",controller:"HomeController",views:{mainContent:{controller:function($scope){$log.debug("Componentes gerais")},templateUrl:function(){return"views/logged/componentes.temp.view.html"}}}}).state("home.aluno-customizacao",{cache:!1,pageId:"aluno-customizacao",url:"/aluno-customizacao",controller:"HomeController",views:{mainContent:{controller:"TelaCustomizadaController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.tela.customizada.view.html"}}}}).state("home.aluno-extrato",{cache:!1,pageId:"aluno-extrato",url:"/aluno-extrato",controller:"HomeController",views:{mainContent:{controller:"AlunoExtratoController",templateUrl:function(){return"views/logged/aluno.extrato.view.html"}}}}).state("home.aceiteContrato",{cache:!1,pageId:"aceiteContrato",url:"/aceiteContrato",controller:"HomeController",views:{mainContent:{controller:"AlunoAceiteContratoController",templateUrl:function(){return"views/logged/aluno.aceite.contrato.view.html"}}}}).state("home.contrato-lgpd",{cache:!1,pageId:"contrato-lgpd",url:"/contrato-lgpd",controller:"HomeController",views:{mainContent:{controller:"AlunoAceiteContratoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/lgpd.contrato.view.html"}}}}).state("home.avisos",{cache:!1,pageId:"avisos",url:"/avisos",controller:"HomeController",views:{mainContent:{controller:"AlunoAvisosController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.avisos.view.html"}}}}).state("home.403",{cache:!1,pageId:"403",url:"/403",controller:"Aluno403Controller",views:{mainContent:{controller:"Aluno403Controller",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.403.view.html"}}}}).state("home.custom",{cache:!1,pageId:"custom",url:"/custom/:target?param1&param2&param3&param4&param5&param6&param7&param8&param9&param10",views:{cache:!1,mainContent:{controllerProvider:function($stateParams){return $stateParams.target.charAt(0).toUpperCase()+$stateParams.target.slice(1)+"CustomController"},controllerAs:"vm",templateUrl:function($stateParams){return"custom/"+$stateParams.target+"/"+$stateParams.target+".view.html"}}},resolve:{customLoad:["$ocLazyLoad","$stateParams","SessionData",function($ocLazyLoad,$stateParams,SessionData){return $stateParams.pessoaLogada=SessionData.user,$stateParams.perfil=SessionData.perfil,$stateParams.alunosResponsavel=SessionData.alunosResponsavel.list,$stateParams.alunoSelecionado=SessionData.aluno.list[SessionData.aluno.selecionado],$ocLazyLoad.load("custom-environments/environment.js").then(()=>$ocLazyLoad.load("custom/"+$stateParams.target+"/"+$stateParams.target+".service.js")).then(()=>$ocLazyLoad.load("custom/"+$stateParams.target+"/"+$stateParams.target+".controller.js")).then(()=>$ocLazyLoad.load("custom/"+$stateParams.target+"/"+$stateParams.target+".css"))}]}}).state("home.carteirinha-estudantil",{cache:!1,pageId:"carteirinha-estudantil",url:"/carteirinha-estudantil",controller:"CarteirinhaEstudantilController",views:{mainContent:{controller:"CarteirinhaEstudantilController",controllerAs:"vm",templateUrl:function(){return"views/logged/carteirinha.estudantil.view.html"}}}}).state("home.estou-chegando",{cache:!1,pageId:"estou-chegando",url:"/estou-chegando",controller:"HomeController",views:{mainContent:{controller:"EstouChegandoController",controllerAs:"vm",templateUrl:function(){return"views/logged/estou-chegando/estou.chegando.view.html"}}}}).state("home.npj-minhas-tarefas",{cache:!1,pageId:"npj-minhas-tarefas",url:"/minhas-tarefas",controller:"HomeController",views:{mainContent:{controller:"MinhasTarefasController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/minhas.tarefas.view.html"}}}}).state("home.npj-calendario",{cache:!1,pageId:"npj-calendario",url:"/meu-calendario",controller:"HomeController",views:{mainContent:{controller:"MeuCalendarioController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/calendario.npj.view.html"}}}}).state("home.npj-meus-casos",{cache:!1,pageId:"npj-meus-casos",url:"/meus-casos",controller:"MeusCasosController",views:{mainContent:{controller:"MeusCasosController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/meus.casos.view.html"}}}}).state("home.npj-meus-casos.casos",{pageId:"npj-meus-casos",url:"/casos",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"CasosController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/casos.view.html"}}}}).state("home.npj-meus-casos.requerido",{pageId:"npj-meus-casos",url:"/requerido",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"RequeridoController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/requerido.view.html"}}}}).state("home.npj-meus-casos.requerentes",{pageId:"npj-meus-casos",url:"/requerentes",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"RequerentesController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/requerentes.view.html"}}}}).state("home.npj-meus-casos.atendimentos",{pageId:"npj-meus-casos",url:"/atendimentos",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"AtendimentosController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/atendimentos.view.html"}}}}).state("home.npj-meus-casos.tarefas",{pageId:"npj-meus-casos",url:"/tarefas",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"TarefasController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/tarefas.view.html"}}}}).state("home.npj-meus-casos.anexos",{pageId:"npj-meus-casos",url:"/anexos",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"AnexosController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/anexos.view.html"}}}}).state("home.npj-meus-casos.andamentos",{pageId:"npj-meus-casos",url:"/andamentos",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"AndamentosController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/andamentos.view.html"}}}}).state("home.npj-meus-casos.peticoes",{pageId:"npj-meus-casos",url:"/peticoes",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"PeticoesController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/peticoes.view.html"}}}}).state("home.npj-meus-casos.agenda",{pageId:"npj-meus-casos",url:"/agenda",cache:!1,controller:"MeusCasosController",views:{cache:!1,activityViews:{controller:"AgendaController",controllerAs:"vm",templateUrl:function(){return"views/logged/npj/agenda.view.html"}}}}).state("home.documentos",{cache:!1,pageId:"documentos",url:"/documentos",controller:"HomeController",views:{mainContent:{controller:"AlunoDocumentosController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.documentos.view.html"}}}}).state("home.ajuste-boleto",{cache:!1,pageId:"ajusteboleto",url:"/ajuste-boleto",controller:"HomeController",views:{mainContent:{controller:"AjusteBoletoController",controllerAs:"vm",templateUrl:function(){return"views/logged/ajuste.boleto.html"}}}}).state("home.disciplinas",{cache:!1,pageId:"disciplinas",url:"/disciplinas",controller:"DisciplinasMatriculadasController",views:{mainContent:{controller:"DisciplinasMatriculadasController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.disciplinas.view.html"}}}}).state("home.disciplinas-criterios-de-avaliacao",{cache:!1,pageId:"criterios-de-avaliacao",url:"/disciplinas-criterios-de-avaliacao",controller:"DisciplinasMatriculadasController",views:{mainContent:{controller:"CriteriosDeAvaliacaoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.criterios-de-avaliacao.view.html"}}},params:{dadosDisciplina:null}}).state("home.disciplinas-planodidatico",{cache:!1,pageId:"planodidatico",url:"/disciplinas-planodidatico",controller:"DisciplinasMatriculadasController",views:{mainContent:{controller:"PlanoDidaticoController",templateUrl:function(){return"views/logged/aluno.plano.view.html"}}},params:{disciplina:{}}}).state("home.ocorrencias",{cache:!1,pageId:"ocorrencias",url:"/ocorrencias",controller:"HomeController",views:{mainContent:{controller:"AlunoOcorrenciasController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.ocorrencias.view.html"}}}}).state("home.avaliacaoinstitucional",{cache:!1,pageId:"avaliacaoinstitucional",url:"/avaliacao",controller:"HomeController",views:{mainContent:{controller:"AvaliaListagemController",controllerAs:"vm",templateUrl:function(){return"views/logged/avaliacao/avaliacao.questionarios.view.html"}}}}).state("home.avaliacaoinstitucional-questionario-full",{cache:!1,pageId:"avaliacaoinstitucional",url:"/avaliacao/questionario-full",controller:"HomeController",params:{questionario:null},views:{mainContent:{controller:"AvaliaQuestionarioFullController",controllerAs:"vm",templateUrl:function(){return"views/logged/avaliacao/avaliacao.questionario-full.view.html"}}}}).state("home.avaliacaoinstitucional-questionario-singular",{cache:!1,pageId:"avaliacaoinstitucional",url:"/avaliacao/questionario-singular",controller:"HomeController",params:{questionario:null},views:{mainContent:{controller:"AvaliaQuestionarioSingularController",controllerAs:"vm",templateUrl:function(){return"views/logged/avaliacao/avaliacao.questionario-singular.view.html"}}}}).state("home.boletim",{cache:!1,pageId:"boletim",url:"/boletim",controller:"HomeController",views:{mainContent:{controller:"AlunoBoletimHomeController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.boletim.home.view.html"}}}}).state("home.boletim.resumo",{cache:!1,pageId:"boletim",url:"/notas-e-faltas",controller:"HomeController",views:{boletimViews:{controller:"AlunoBoletimV2Controller",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.boletim.resumo.view.html"}}}}).state("home.boletim.notas",{cache:!1,pageId:"boletim",url:"/notas",controller:"HomeController",views:{boletimViews:{controller:"AlunoBoletimV2NotasController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.boletim.notas.view.html"}}}}).state("home.calendarioAulas",{cache:!1,pageId:"horariosaulas",url:"/aulas",controller:"HomeController",views:{mainContent:{controller:"AlunoCalendarioAulasController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.calendario.aulas.view.html"}}}}).state("home.agenda",{cache:!1,pageId:"calendario",url:"/agenda",controller:"HomeController",views:{mainContent:{controller:"AgendaController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.agenda.view.html"}}}}).state("home.agenda-list",{cache:!1,pageId:"calendario",url:"/agenda-list",controller:"HomeController",views:{mainContent:{controller:"AgendaListController",controllerAs:"vm_list",templateUrl:function(){return"views/logged/aluno.agenda.list.view.html"}}}}).state("home.agenda-event",{cache:!1,pageId:"calendario",url:"/agenda-event",controller:"HomeController",views:{mainContent:{controller:"AgendaEventController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.agenda.event.view.html"}}}}).state("home.financeiro",{cache:!1,pageId:"boletos",url:"/financeiro",controller:"HomeController",views:{mainContent:{controller:"FinanceiroController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.financeiro.view.html"}}}}).state("home.servico-list",{cache:!1,pageId:"servicos",url:"/servico-list",controller:"HomeController",views:{mainContent:{controller:"ServicoListController",controllerAs:"vm_list",templateUrl:function(){return"views/logged/aluno.secretaria.servicos.view.html"}}}}).state("home.concluir-solicitacao-servico",{cache:!1,pageId:"servicos",url:"/concluir-solicitacao-servico",controller:"HomeController",views:{mainContent:{controller:"ConcluirSolicitacaoServicoController",templateUrl:function(){return"views/logged/servico/concluir.solicitacao.servico.view.html"}}}}).state("home.servico-solicitacao",{cache:!1,pageId:"servicos-solicitacao",url:"/servico-solicitacao",controller:"HomeController",views:{mainContent:{controller:"ServicoSolicitacaoController",templateUrl:function(){return"views/logged/servico/solicitacao.view.html"}}}}).state("home.servico-detail",{cache:!1,pageId:"servico-detail",url:"/servico-detail",controller:"HomeController",views:{mainContent:{controller:"ServicoDetailController",templateUrl:function(){return"views/logged/servico/solicitacao.detail.view.html"}}}}).state("home.minha-turma-list",{cache:!1,pageId:"minhaturma",url:"/minha-turma-list",controller:"HomeController",views:{mainContent:{controller:"AlunoMinhaTurmaController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.minha.turma.view.html"}}}}).state("home.frequencia",{cache:!1,pageId:"frequencia",url:"/frequencia",controller:"HomeController",views:{mainContent:{controller:"FrequenciaController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.frequencia.view.html"}}}}).state("home.fichamedica",{cache:!1,pageId:"fichamedica",url:"/ficha-medica",controller:"HomeController",views:{mainContent:{controller:"FichaMedicaController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.ficha.medica.view.html"}}}}).state("home.disciplinas-publicacoes",{cache:!1,pageId:"publicacoes",url:"/disciplinas-publicacoes",controller:"DisciplinasMatriculadasController",views:{mainContent:{controller:"PublicacoesController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/publicacoes.disciplinas.view.html"}}},params:{disciplina:{}}}).state("home.diarioclasse",{cache:!1,pageId:"diarioclasse",url:"/diario-classe",controller:"HomeController",views:{mainContent:{controller:"DiarioClasseController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.diario.classe.view.html"}}}}).state("home.diarioclasse-detalhes",{cache:!1,pageId:"diarioclasse",url:"/disciplinas-diario-classe-detalhes",controller:"DisciplinasMatriculadasController",views:{mainContent:{controller:"DiarioClasseDetalhesController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.diario.classe.detalhes.view.html"}}},params:{disciplina:{}}}).state("home.pos_infos",{pageId:"pos_infos",url:"/pos-informacoes",cache:!1,controller:"PosInformacoesController",views:{cache:!1,mainContent:{controller:"PosInformacoesController",templateUrl:function(){return"views/logged/novas-telas/aluno.pos.informacoes.view.html"}}}}).state("home.pos_infos.ocorrencias",{pageId:"pos_infos",url:"/ocorrencias",cache:!1,controller:"PosInformacoesController",views:{cache:!1,activityViews:{controller:"PosInformacoesOcorrenciasController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.pos.informacoes.ocorrencias.view.html"}}}}).state("home.pos_infos.orientadores",{pageId:"pos_infos",url:"/orientadores",cache:!1,controller:"PosInformacoesController",views:{cache:!1,activityViews:{controller:"PosInformacoesOrientadoresController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.pos.informacoes.orientadores.view.html"}}}}).state("home.pos_infos.proficiencia",{pageId:"pos_infos",url:"/proficiencia",cache:!1,controller:"PosInformacoesController",views:{cache:!1,activityViews:{controller:"PosInformacoesProficienciaController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.pos.informacoes.proficiencia.view.html"}}}}).state("home.pos_infos.qualificacao",{pageId:"pos_infos",url:"/qualificacao",cache:!1,controller:"PosInformacoesController",views:{cache:!1,activityViews:{controller:"PosInformacoesQualificacaoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.pos.informacoes.qualificacao.view.html"}}}}).state("home.pos_infos.defesa",{pageId:"pos_infos",url:"/defesa",cache:!1,controller:"PosInformacoesController",views:{cache:!1,activityViews:{controller:"PosInformacoesDefesaController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.pos.informacoes.defesa.view.html"}}}}).state("home.pos_infos.agencias",{pageId:"pos_infos",url:"/agencias",cache:!1,controller:"PosInformacoesController",views:{cache:!1,activityViews:{controller:"PosInformacoesAgenciasController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.pos.informacoes.agencias.view.html"}}}}).state("home.tarefas",{cache:!1,pageId:"tarefas",url:"/tarefa-list",controller:"HomeController",views:{mainContent:{controller:"TarefaListController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.tarefas.view.html"}}}}).state("home.cobranca",{cache:!1,pageId:"cobrancas",url:"/cobranca",controller:"HomeController",views:{mainContent:{controller:"CobrancaController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.cobranca.view.html"}}}}).state("home.notafiscal",{cache:!1,pageId:"notafiscal",url:"/nota-fiscal-eletronica",controller:"HomeController",views:{mainContent:{controller:"NotaFiscalController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.nota-fiscal.view.html"}}}}).state("home.indicerendimentos",{cache:!1,pageId:"indicerendimentos",url:"/indice-rendimentos",controller:"HomeController",views:{mainContent:{controller:"IndiceRendimentoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.indice-rendimento.view.html"}}}}).state("home.pgtocartao",{cache:!1,pageId:"pgtocartao",url:"/pgtocartao",controller:"PagamentoCartaoController",views:{mainContent:{controller:"PagamentoCartaoController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.pagamento.cartao.view.html"}}}}).state("home.pgtocartao.pagamentos",{cache:!1,pageId:"pgtocartao",url:"/pagamentos",views:{pagamentos:{controller:"PagamentoCartaoPagamentosController",controllerAs:"vm",templateUrl:function(){return"views/logged/cartao/aluno.pagamento.cartao.pagamentos.view.html"}}}}).state("home.pgtocartao.cobrancas",{cache:!1,pageId:"pgtocartao",url:"/cobrancas",views:{cobrancas:{controller:"PagamentoCartaoListarController",controllerAs:"vm",templateUrl:function(){return"views/logged/cartao/aluno.pagamento.cartao.listar.view.html"}}}}).state("home.pgtocartao-pagamento",{cache:!1,pageId:"pgtocartao",url:"/pagamento",controller:"PagamentoCartaoOrdemController",views:{mainContent:{controller:"PagamentoCartaoOrdemController",controllerAs:"vm",templateUrl:function(){return"views/logged/cartao/aluno.pagamento.cartao.ordem.view.html"}}}}).state("home.pgtocartao-consulta",{cache:!1,pageId:"pgtocartao",url:"/consulta/:from/:numPedido",controller:"PagamentoCartaoConsultaController",views:{mainContent:{controller:"PagamentoCartaoConsultaController",controllerAs:"vm",templateUrl:function(){return"views/logged/cartao/aluno.pagamento.cartao.consulta.view.html"}}}}).state("home.debito-autorizado",{cache:!1,pageId:"debito-autorizado",url:"/debito-autorizado",controller:"HomeController",views:{mainContent:{controller:"PagamentoDebitoAutorizadoController",controllerAs:"vm",templateUrl:function(){return"views/logged/cartao/aluno.pagamento.debito.autorizado.view.html"}}}}).state("home.pagamento-recorrente",{cache:!1,pageId:"pagamento-recorrente",url:"/pagamento-recorrente",controller:"HomeController",views:{mainContent:{controller:"PagamentoRecorrenteController",controllerAs:"vm",templateUrl:function(){return"views/logged/cartao/aluno.pagamento.recorrente.view.html"}}}}).state("home.pgtocobrancas",{cache:!1,pageId:"pgtocobrancas",url:"/pgtocobrancas",controller:"PagamentoCobrancasController",views:{mainContent:{controller:"PagamentoCobrancasController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.pagamento.cobrancas.view.html"}}}}).state("home.pgtocobrancas.pagamentos",{cache:!1,pageId:"pgtocobrancas",views:{url:"/pagamentos",pagamentos:{controllerAs:"vm",controller:"PagamentoCartaoPagamentosController",templateUrl:function(){return"views/logged/cartao/aluno.pagamento.cartao.pagamentos.view.html"}}}}).state("home.pgtocobrancas.cobrancas",{cache:!1,pageId:"pgtocobrancas",url:"/lista-cobrancas",views:{cobrancas:{controller:"PagamentoCobrancasListarController",controllerAs:"vm",templateUrl:function(){return"views/logged/pagamentocobrancas/aluno.pagamento.cobrancas.listar.view.html"}}}}).state("home.matricula",{cache:!1,pageId:"matricula",url:"/matricula",views:{mainContent:{controller:"MatriculaController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.matricula.view.html"}}}}).state("home.matricula.termo",{cache:!1,pageId:"matricula",url:"/termo",controller:"MatriculaTermoController",views:{termo:{controller:"MatriculaTermoController",controllerAs:"vm",templateUrl:function(){return"views/logged/matricula/aluno.matricula.termo.view.html"}}}}).state("home.matricula.cadastro",{cache:!1,pageId:"matricula",url:"/dados-cadastrais",controller:"AlunoCadastroController",views:{cadastro:{controller:"AlunoCadastroController",controllerAs:"vm",templateUrl:function(){return"views/logged/matricula/aluno.matricula.dados.cadastrais.view.html"}}}}).state("home.matricula.autorizacao",{cache:!1,pageId:"matricula",url:"/autorizacao",controller:"MatriculaAutorizacaoController",views:{autorizacao:{controller:"MatriculaAutorizacaoController",controllerAs:"vm",templateUrl:function(){return"views/logged/matricula/aluno.matricula.autorizacao.view.html"}}}}).state("home.matricula.respfinan",{cache:!1,pageId:"matricula",url:"/dados-responsavel",controller:"MatriculaDadosRespFinanController",views:{respfinan:{controller:"MatriculaDadosRespFinanController",controllerAs:"vm",templateUrl:function(){return"views/logged/matricula/aluno.matricula.dados.resp.finan.view.html"}}}}).state("home.matricula.disciplinas",{cache:!1,pageId:"matricula",url:"/disciplinas",controller:"MatriculaDisciplinasController",views:{disciplinas:{controller:"MatriculaDisciplinasController",controllerAs:"vm",templateUrl:function(){return"views/logged/matricula/aluno.matricula.disciplinas.view.html"}}}}).state("home.matricula.contrato",{cache:!1,pageId:"matricula",url:"/contrato",controller:"MatriculaContratoController",views:{contrato:{controller:"MatriculaContratoController",controllerAs:"vm",templateUrl:function(){return"views/logged/matricula/aluno.matricula.contrato.view.html"}}}}).state("home.matricula.requerimento",{cache:!1,pageId:"matricula",url:"/requerimento",controller:"MatriculaRequerimentoController",views:{requerimento:{controller:"MatriculaRequerimentoController",controllerAs:"vm",templateUrl:function(){return"views/logged/matricula/aluno.matricula.requerimento.view.html"}}}}).state("home.contrato",{cache:!1,pageId:"contrato",url:"/contrato",controller:"HomeController",views:{mainContent:{controller:"ContratoController",controllerAs:"vm",templateUrl:function(){return"views/logged/aluno.contrato.view.html"}}}}).state("home.acordo",{pageId:"acordo",url:"/acordos",cache:!1,controller:"AcordoController",params:{isContrato:null},views:{cache:!1,mainContent:{controller:"AcordoController",controllerAs:"acordoCtrl",templateUrl:function(){return"views/logged/aluno.acordo.view.html"}},"":{controller:"AcordoController",controllerAs:"acordoCtrl",templateUrl:function(){return"views/logged/aluno.acordo.view.html"}}}}).state("home.acordo.cadastro",{pageId:"acordo",url:"/cadastro",cache:!1,views:{cache:!1,cadastroAcordo:{controller:"AcordoCadastroController",controllerAs:"acordoCadCtrl",templateUrl:function(){return"js/custom-components/acordo-cadastro/acordo.cadastro.html"}}}}).state("home.acordo.cadastro.cobrancas",{cache:!1,pageId:"acordo",url:"/cobrancas",views:{cobrancas:{templateUrl:function(){return"js/custom-components/acordo-cadastro/wizard/acordo.cadastro.cobrancas.html"}}}}).state("home.acordo.cadastro.parcelamentos",{cache:!1,pageId:"acordo",url:"/parcelamentos",views:{parcelamentos:{templateUrl:function(){return"js/custom-components/acordo-cadastro/wizard/acordo.cadastro.parcelamentos.html"}}}}).state("home.acordo.cadastro.confirmacao",{cache:!1,pageId:"acordo",url:"/confirmacao",views:{confirmacao:{templateUrl:function(){return"js/custom-components/acordo-cadastro/wizard/acordo.cadastro.confirmacao.html"}}}}).state("home.acordo.cadastro.contrato",{cache:!1,pageId:"acordo",url:"/contrato",views:{contrato:{templateUrl:function(){return"js/custom-components/acordo-cadastro/wizard/acordo.cadastro.contrato.html"}}}}).state("home.acordo.consulta",{pageId:"acordo",url:"/consulta",cache:!1,params:{codAcordo:null},views:{cache:!1,consultaAcordo:{controller:"AcordoConsultaController",controllerAs:"acordoConCtrl",templateUrl:function(){return"js/custom-components/acordo-consulta/acordo.consulta.html"}}}}).state("home.historico",{pageId:"historico",url:"/historico",cache:!1,controller:"AtividadesController",views:{cache:!1,mainContent:{controller:"AtividadesController",controllerAs:"historicoCtrl",templateUrl:function(){return"views/logged/aluno.atividades.view.html"}}}}).state("home.historico.home",{pageId:"historico",url:"",cache:!1,controller:"AtividadesController",views:{cache:!1,activityViews:{controller:"HistoricoController",controllerAs:"historicoCtrl",templateUrl:function(){return"views/logged/aluno.historico.view.html"}}}}).state("home.historico.atividades-complementares",{pageId:"historico",url:"/atividades-complementares",cache:!1,controller:"AtividadesController",views:{cache:!1,activityViews:{controller:"AtividadesComplementaresController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.atividades.complementares.view.html"}}}}).state("home.historico.atividades-extensao",{pageId:"historico",url:"/atividades-extensao",cache:!1,controller:"AtividadesController",views:{cache:!1,activityViews:{controller:"AtividadesExtensaoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.atividades.extensao.view.html"}}}}).state("home.historico.exigiveis-por-tipo",{pageId:"historico",url:"/exigiveis-por-tipo",cache:!1,controller:"AtividadesController",views:{cache:!1,activityViews:{controller:"AtividadesExigiveisPorTipoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.atividades.complementares.exigiveis.view.html"}}}}).state("home.trabalhos",{pageId:"trabalhos",url:"/trabalhos",cache:!1,controller:"TrabalhosController",views:{cache:!1,mainContent:{controller:"TrabalhosController",controllerAs:"trabalhosCtrl",templateUrl:function(){return"views/logged/novas-telas/aluno.trabalhos.view.html"}}}}).state("home.trabalhos.submissao",{pageId:"trabalhos",url:"/submissao",cache:!1,controller:"TrabalhosController",views:{cache:!1,activityViews:{controller:"TrabalhosSubmissaoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.trabalhos.submissao.view.html"}}}}).state("home.trabalhos.historico",{pageId:"trabalhos",url:"/historico",cache:!1,controller:"TrabalhosController",views:{cache:!1,activityViews:{controller:"TrabalhosHistoricoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.trabalhos.historicos.view.html"}}}}).state("home.processoseletivo",{pageId:"processoseletivo",url:"/processo-seletivo",cache:!1,controller:"ProcessoSeletivoController",views:{cache:!1,mainContent:{controller:"ProcessoSeletivoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.processo-seletivo.view.html"}}}}).state("home.pos_tcc",{pageId:"pos_tcc",url:"/conclusao-de-curso",cache:!1,controller:"TrabalhosConclusaoController",views:{cache:!1,mainContent:{controller:"TrabalhosConclusaoController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.trabalhos.conclusao.view.html"}}}}).state("home.pos_tcc-editar",{pageId:"pos_tcc",url:"/conclusao-de-curso/editar",cache:!1,controller:"TrabalhosConclusaoEditarController",views:{cache:!1,mainContent:{controller:"TrabalhosConclusaoEditarController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.trabalhos.editar.view.html"}}}}).state("home.pos_tcc.dados",{pageId:"pos_tcc",url:"/dados",cache:!1,controller:"TrabalhosConclusaoController",views:{cache:!1,activityViews:{controller:"TrabalhosConclusaoDadosController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.conclusao.dados.view.html"}}}}).state("home.pos_tcc.patrocinadores",{pageId:"pos_tcc",url:"/patrocinadores",cache:!1,controller:"TrabalhosConclusaoController",views:{cache:!1,activityViews:{controller:"TrabalhosConclusaoPatrocinadoresController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.conclusao.patrocinadores.view.html"}}}}).state("home.pos_tcc.envio-de-arquivos",{pageId:"pos_tcc",url:"/envio-de-arquivos",cache:!1,controller:"TrabalhosConclusaoController",params:{urlTcc:!1},views:{cache:!1,activityViews:{controller:"TrabalhosConclusaoEnvioArquivosController",controllerAs:"vm",templateUrl:function(){return"views/logged/novas-telas/aluno.conclusao.envio-de-arquivos.view.html"}}}}).state("home.aor-pagina-redirect",{cache:!1,pageId:"aor-pagina-redirect",url:"/aor-pagina-redirect/:redirectPageId",controller:"HomeController",views:{mainContent:{controller:"AORPaginaRedirectController",controllerAs:"vm",templateUrl:function(){return"views/logged/aor.pagina.redirect.view.html"}}}}).state("home.pages",{cache:!1,url:"/{name:.*}",controller:"PageController",views:{menuContent:{templateUrl:function(urlattr){return $log.debug("urlattr=",urlattr),"views/"+urlattr.name+".view.html"}}}}).state("405",{url:"/error/405",controller:"PageController",templateUrl:function(){return"views/error/405.view.html"}}).state("404",{url:"/error/404",controller:"PageController",templateUrl:function(){return"views/error/404.view.html"}}),$urlRouterProvider.when("/autologin?a&b",["$rootScope","$state","$location","sharedLoginService","Storage",function($rootScope,$state,$location,sharedLoginService,Storage){let username=$location.$$search.a,password=$location.$$search.b,pagina=$location.$$search.c,paramsPgto=$location.$$search.d,url=$location.$$search.url,ocultarNavbar=$location.$$search.e?$location.$$search.e:"Tg==",ocultarSidebar=$location.$$search.f?$location.$$search.f:"Tg==",codServico=$location.$$search.g;if(angular.equals($location.path(),"/resetsenha")||username&&password){username=window.atob(username),password=window.atob(password),paramsPgto&&(paramsPgto=window.atob(paramsPgto),Storage.set("paramsPgto",paramsPgto)),pagina&&(pagina=window.atob(pagina),Storage.set("autoLogin",pagina)),codServico&&Storage.set("codServico",window.atob(codServico)),Storage.set("ocultarNavbar",window.atob(ocultarNavbar)),Storage.set("ocultarSidebar",window.atob(ocultarSidebar));var dataset={user:{}};dataset.user.username=username,dataset.user.password=password,dataset.user.pagina=pagina,dataset.url=url,dataset.message={},dataset.profile={},dataset.login=sharedLoginService.login,dataset.selectProfile=sharedLoginService.selectProfile,dataset.selectProfile("aluno"),$rootScope.infiniteReached=function(){},sharedLoginService.set(dataset),dataset.login()}else $location.path("/login")}]).when("",["$state","$match",function($state,$match){$state.go("home.avisos")}]).when("/",["$state","$match",function($state,$match){$state.go("home.avisos")}]).otherwise(function($injector,$location){$injector.get("$state").go("404")})}).factory("customTranslateLoader",function($http,$q){return function(options){if(!options||!(angular.isArray(options.files)||angular.isString(options.prefix)&&angular.isString(options.suffix)))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");options.files||(options.files=[{prefix:options.prefix,suffix:options.suffix}]);for(var load=function(file){if(!file||!angular.isString(file.prefix)||!angular.isString(file.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var deferred=$q.defer();return $http(angular.extend({url:[file.prefix,options.key,file.suffix].join(""),method:"GET",params:""},options.$http)).success(function(data){deferred.resolve(data)}).error(function(){deferred.resolve({})}),deferred.promise},deferred=$q.defer(),promises=[],length=options.files.length,i=0;i<length;i++)promises.push(load({prefix:options.files[i].prefix,key:options.key,suffix:options.files[i].suffix}));return $q.all(promises).then(function(data){for(var length=data.length,mergedData={},i=0;i<length;i++)for(var key in data[i])mergedData[key]=data[i][key];deferred.resolve(mergedData)},function(data){deferred.reject(data)}),deferred.promise}}).config(function($translateProvider,tmhDynamicLocaleProvider){$translateProvider.uniformLanguageTag("bcp47"),$translateProvider.fallbackLanguage("pt_br"),$translateProvider.preferredLanguage("pt_br"),$translateProvider.useMissingTranslationHandlerLog(),$translateProvider.useLoader("customTranslateLoader",{files:[{prefix:"i18n/locale_",suffix:".json"}]}),$translateProvider.translations("pt",{}).translations("en",{}).registerAvailableLanguageKeys(["pt_br","en_us"],{"en*":"en_us","pt*":"pt_br","*":"pt_br"}).determinePreferredLanguage();var locale=(window.navigator.userLanguage||window.navigator.language||"pt_br").replace("-","_").toLowerCase();$translateProvider.use(locale),$translateProvider.useLocalStorage(),$translateProvider.determinePreferredLanguage(),$translateProvider.useSanitizeValueStrategy("escaped"),tmhDynamicLocaleProvider.localeLocationPattern("node_modules/angular-i18n/angular-locale_{{locale}}.js")}).directive("crnValue",["$parse",function($parse){return{restrict:"A",require:"^ngModel",link:function(scope,element,attr,ngModel){var evaluatedValue;evaluatedValue=attr.value?attr.value:$parse(attr.crnValue)(scope),element.attr("data-evaluated",JSON.stringify(evaluatedValue)),element.bind("click",function(event){scope.$apply(function(){ngModel.$setViewValue(evaluatedValue)}.bind(element))})}}}]).controller("PageController",["$scope","$stateParams","$location","$http",function($scope,$stateParams,$location,$http){for(var x in this.id="PageController",$scope.id=this.id,app.userEvents)$scope[x]=app.userEvents[x].bind($scope);pageController=this,$scope.params=$stateParams,$scope.$http=$http;var queryStringParams=$location.search();for(var key in queryStringParams)queryStringParams.hasOwnProperty(key)&&($scope.params[key]=queryStringParams[key])}]).run(["$log","$rootScope","$location","$state","$cookies","sharedLoginService","SessionData","UserService","Storage","HttpPendingRequestService","$ionicSideMenuDelegate","NeoAssistService","$anchorScroll","Notification","UtilService",function($log,$rootScope,$location,$state,$cookies,sharedLoginService,SessionData,UserService,Storage,HttpPendingRequestService,$ionicSideMenuDelegate,NeoAssistService,$anchorScroll,Notification,UtilService){$anchorScroll.yOffset=100,$rootScope.cssCustom=UtilService.obtemRecurso({aplicacao:"ALUNO_RESP",objeto:"CSS"}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){event.preventDefault(),403===error||404===error||405===error?$state.go(error):$log.error("[$stateChangeError] "+error)}),$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams,options){$(".modal-backdrop")&&($(".modal-backdrop").remove(),$("body").removeClass("modal-open")),"aluno-extrato"==fromState.pageId&&"aluno-extrato"!=toState.pageId&&$("#ui-datepicker-div").hide(),"home.boletim.resumo"==fromState.name&&"home.boletim.resumo"!=toState.name&&$ionicSideMenuDelegate.canDragContent(!0);var isAceiteContratoLGPDState=function(){return toState&&toState.name&&"home.contrato-lgpd"===toState.name};if(!(toState&&toState.name&&"login"===toState.name||toState&&toState.name&&("recuperarSenha"===toState.name||"recuperarSenhaToken"===toState.name)||toState&&toState.name&&"obterboletotoken"===toState.name))if(SessionData.isEmpty("user")||SessionData.isEmpty("aluno")){var userCookie=$cookies.get("user-data");if(void 0===userCookie||""===userCookie||null===userCookie)event.preventDefault(),$state.go("login");else{let searchParams=new URLSearchParams(window.location.search),pagina=searchParams.get("c"),paramsPgto=searchParams.get("d");pagina&&(pagina=window.atob(pagina),Storage.set("autoLogin",pagina)),paramsPgto&&(paramsPgto=window.atob(paramsPgto),Storage.set("paramsPgto",paramsPgto)),sharedLoginService.handleSuccess()}}else{let lgpd=Storage.get("_contratoLgpd")?JSON.parse(Storage.get("_contratoLgpd")):{},exibirContratoLGPD=!(!lgpd||!lgpd.necessita_aceite_lgpd||"S"!=lgpd.necessita_aceite_lgpd.toUpperCase());if("false"===SessionData.user.senhaAlterada&&(event.preventDefault(),$state.go("recuperarSenha")),Storage.get("questionariosObrigatorios")&&null!=toState.pageId&&"avaliacaoinstitucional"!==toState.pageId&&(event.preventDefault(),Notification.error("Favor, responder o(s) questionário(s) obrigatório(s)."),$state.go("home.avaliacaoinstitucional")),!Storage.get("exibirContrato")||toState&&toState.name&&"home.aceiteContrato"===toState.name||exibirContratoLGPD||isAceiteContratoLGPDState()||(event.preventDefault(),"/login)"===$location.path()?$state.go("home.aceiteContrato"):$state.go("home.aceiteContrato",{},{reload:!0,notify:!0})),exibirContratoLGPD&&!isAceiteContratoLGPDState()&&(event.preventDefault(),Notification.warning("Contrato pendente de aceite."),$state.go("home.contrato-lgpd")),toState&&toState.name&&fromState&&fromState.name&&toState.pageId!==fromState.pageId&&HttpPendingRequestService.cancelAll(),function(toState){let name=toState.name,accessOk=(toState.pageId,toState.url,!1);if(["login","recuperarSenha","recuperarSenhaToken","redefinirSenha","home","home.loading","home.responsavel","home.componentes","home.aceiteContrato","home.contrato-lgpd","home.pages","home.403","404","405","obterboletotoken","home.custom"].indexOf(name)>-1)accessOk=!0;else{let aluno=SessionData.isEmpty("aluno")?null:SessionData.aluno,permittedPages=aluno&&aluno.list[0].permittedPages?aluno.list[0].permittedPages:null;if(name=name.replace("home.",""),$log.debug("state.name: ",name),permittedPages&&permittedPages.length>0){let isValidAccess=function(page){name.startsWith(page)&&($log.debug("state.name: "+name+" - page: "+page),accessOk=!0)};permittedPages.forEach(isValidAccess)}else accessOk=!1}return accessOk}(toState)||($log.info("ACESSO NAO AUTORIZADO: "+toState.pageId+" : "+toState.url),event.preventDefault(),$state.go("home.403")),ga){let strNextURL=getNextURL($location,toState);ga("send","pageview",{page:strNextURL})}if(SessionData.aluno&&SessionData.aluno.list&&SessionData.aluno.list.length>0){let alunoSelecionado=SessionData.aluno.list[SessionData.aluno.selecionado];NeoAssistService.obterDadosNeoAssist(alunoSelecionado.codAluno).then(function(dadosNeoAssist){if(dadosNeoAssist){let nomeAbrev=dadosNeoAssist.nomeAbreviadoIES?dadosNeoAssist.nomeAbreviadoIES:"";NeoAssistService.loadNeoAssistScript(nomeAbrev,dadosNeoAssist)}}).catch(function(err){$log.debug("Erro ao carregar os dados do NeoAssist: ",err)})}}})}]));function NeoAssistService(Configs,SessionData,$resource,$q){this._scriptCarregado=!1,this.limparVariaveisNeoAssist=function(){neoIES="",neoNomeIES="",neoAluno="",neoRA="",neoMail=""},this.removerNeoAssist=function(){this.limparVariaveisNeoAssist();let elNeoAssist=angular.element("#"+NEO_ASSIST_DIV);elNeoAssist&&elNeoAssist.remove(),this._scriptCarregado=!1},this.obterDadosNeoAssist=function(codAluno){let defer=$q.defer();return codAluno?$resource(Configs.getApiServer()+"/custom/cod_aluno/:cod_aluno/obtem_dados_neoassist",{},{query:{method:"GET"}}).query({cod_aluno:encodeURIComponent(codAluno)},function(response){if(response.neoAluno){let dadosNeoAssist={neoAluno:response.neoAluno,neoIES:response.neoIES,neoMail:response.neoMail,neoNomeIES:response.neoNomeIES,neoRA:response.neoRA,nomeAbreviadoIES:response.nomeAbreviadoIES};defer.resolve(dadosNeoAssist)}else defer.resolve(!1)}):defer.resolve(!1),defer.promise},this.atualizarDadosFormularioNeoAssist=function(dadosNeoAssist){neoIES=dadosNeoAssist.neoIES,neoNomeIES=dadosNeoAssist.neoNomeIES,neoAluno=dadosNeoAssist.neoAluno,neoRA=dadosNeoAssist.neoRA,neoMail=dadosNeoAssist.neoMail,"function"==typeof loadNeoForm&&(console.log("Loading NeoAssist Form..."),loadNeoForm(neoIES,neoAluno,neoRA,neoMail))},this.loadNeoAssistScript=function(instituicao,dadosNeoAssist){!1===this._scriptCarregado&&(this.removerNeoAssist(),loadNeoAssist(instituicao,()=>this.atualizarDadosFormularioNeoAssist(dadosNeoAssist)))}}function AORPaginaRedirectService(Configs,SessionData,$resource,$q){this.obterDadosAORPaginaRedirecionamento=function(codAluno,redirectPageId){let defer=$q.defer();return codAluno?$resource(Configs.getApiServer()+"/comum/aor-redirect?aluno=:cod_aluno&redirectPageId=:redirect_PageId",{},{query:{method:"GET"}}).query({cod_aluno:encodeURIComponent(codAluno),redirect_PageId:encodeURIComponent(redirectPageId)},function(response){if(response.urlDestino){let dadosAORPaginaRedirect={urlDestino:response.urlDestino,nomeParametroUrl:response.nomeParametroUrl,minutosExpiracaoToken:response.minutosExpiracaoToken,dataHoraExpiracaoToken:response.dataHoraExpiracaoToken,token:response.token,rotaDeRetorno:response.rotaDeRetorno};defer.resolve(dadosAORPaginaRedirect)}else defer.resolve(!1)}):defer.resolve(!1),defer.promise}}app.userEvents={},angular.module("MyApp").constant("EnvironmentEnum",{DEV:"DEV",PROD:"PROD"}).constant("TypeEnum",{DATE:"DATE",STRING:"STRING",CURRENCY:"CURRENCY",CARD:"CARD"}),angular.module("MyApp").factory("AonlineUtils",["$ionicLoading",function($ionicLoading){return{showLoading:function(value){value?$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}):$ionicLoading.hide()}}}]),angular.module("MyApp").factory("Configs",["Storage","EnvironmentEnum",function(Storage,EnvironmentEnum){return{getApiServer:function(){return"apix"},getEnvironment:function(){return EnvironmentEnum.DEV}}}]),angular.module("custom.services",["ngStorage"]).factory("Storage",["$rootScope","$sessionStorage","$localStorage",function($rootScope,$sessionStorage,$localStorage){let service={storage:$sessionStorage,delete:function(name){let stored=this.get(name);return delete this.storage[name],stored},clear:function(name){return this.storage.$reset()},get:function(name){return this.storage[name]},set:function(name,value){return this.storage[name]=value,this.get(name)},use:function(storage){"sessionStorage"===storage?this.storage=$sessionStorage:"localStorage"===storage&&(this.storage=$localStorage)}};return service}]).factory("HttpPendingRequestService",function($q){let service={};var cancelPromises=[];return service.createTimeout=function(){var cancelPromise=$q.defer();return cancelPromises.push(cancelPromise),cancelPromise.promise},service.cancelAll=function(){angular.forEach(cancelPromises,function(cancelPromise){cancelPromise.resolve()}),cancelPromises.length=0},service}).factory("LogoutService",["$log","$state","$location","$http","SessionData","serviceAlunos","Storage",function($log,$state,$location,$http,SessionData,serviceAlunos,Storage){let codPessoa,codAluno,service={},codSessao=Storage.get("sessaoLogConexoes");return service.logout=(()=>{SessionData&&SessionData.user&&SessionData.user.oauthEnabled&&SessionData.user.logoutUrl?(window.location.assign(SessionData.user.logoutUrl),SessionData.clear(),Storage.clear()):(SessionData.isEmpty("aluno")?(codPessoa=void 0,codAluno=void 0):(codPessoa=SessionData.aluno.list[0].user.id,codAluno=SessionData.aluno.list[0].codAluno),codSessao=Storage.get("sessaoLogConexoes"),SessionData&&SessionData.user&&null!=(SessionData.user.id||SessionData.user.login)&&(param={aluno:encodeURIComponent(codAluno),sessao:codSessao},serviceAlunos.geraLogConexao(param).then(function(){return $http({method:"POST",url:"logout"})}).then(()=>{codPessoa&&codAluno?serviceAlunos.redirectUrlRetorno(codPessoa,codAluno).then(function(response){SessionData.clear(),Storage.clear(),null!==response.conteudo&&void 0!==response.conteudo?$(location).attr("href",response.conteudo):$state.go("login",{},{reload:!0})},function(response){SessionData.clear(),Storage.clear(),$state.go("login",{},{reload:!0})}):(SessionData.clear(),Storage.clear())}).catch(function(err){401===err.status?(SessionData.clear(),Storage.clear(),$state.go("login",{},{reload:!0})):$log.error("Logout error:",err)})))}),service}]),angular.module("MyApp").factory("PagamentoCartaoFactory",function(EnvironmentEnum){return this.calculos={},this.pedidoGerado={},this.cobrancasSelecionadas={},{setCalculos:function(calculos){this.calculos=calculos},getCalculos:function(){return this.calculos},setPedidoGerado:function(pedidoGerado){this.pedidoGerado=pedidoGerado},getPedidoGerado:function(){return this.pedidoGerado},setCobrancasSelecionadas:function(cobrancasSelecionadas){this.cobrancasSelecionadas=cobrancasSelecionadas},getCobrancasSelecionadas:function(){return this.cobrancasSelecionadas},clearCobrancasSelecionadas:function(){this.cobrancasSelecionadas=null}}}),angular.module("MyApp").factory("AcordoFactory",function(){return{opcoesDoAcordo:{}}}),angular.module("MyApp").factory("InterceptorFactory",["$injector","$q","HttpPendingRequestService","Configs",function($injector,$q,HttpPendingRequestService,AppCfg){return{request:function(config){let $translate=$injector.get("$translate");return config.headers=config.headers||{},config.headers={...config.headers,"accept-language-portal":$translate.use()},config.url.indexOf("${API_URL}")>-1&&(config.url=config.url.replace("${API_URL}",AppCfg.getApiServer())),void 0===config.timeout&&(config.timeout=HttpPendingRequestService.createTimeout()),config},responseError:function(response){let Notification=$injector.get("Notification"),$ionicLoading=$injector.get("$ionicLoading"),$translate=$injector.get("$translate");if(response.status<200||response.status>299){if(-1===response.status)return $ionicLoading.hide(),$q.defer().promise;HttpPendingRequestService.cancelAll()}switch(response.status){case 401:if(response.data)return $q.reject(response);var errorMsg=$translate.instant("General.SessionExpired");$ionicLoading.hide(),Notification.error(errorMsg),$injector.get("LogoutService").logout();break;case 500:if("arraybuffer"===response.config.responseType){var enc=new TextDecoder("utf-8"),arr=new Uint8Array(response.data);response.data=JSON.parse(enc.decode(arr))}let message=$translate.instant("General.ErrorNotSpecified");response.data&&(response.data.message||response.data.mensagemDetalhada)&&(message=response.data.message||response.data.mensagemDetalhada),$ionicLoading.hide(),message.indexOf("JDBC")>=0||message.indexOf("java")>=0||message.indexOf("null")>=0||message.indexOf("closed")>=0?Notification.error($translate.instant("General.ErrorNotSpecified")):Notification.error(message);break;default:$ionicLoading.hide()}if(void 0!==ga&&null!==ga){let message=$translate.instant("General.ErrorNotSpecified");response.data&&(response.data.message||response.data.mensagemDetalhada)&&(message=response.data.message||response.data.mensagemDetalhada);var dataGoogleAnalytics=new Object;dataGoogleAnalytics.url=window.location.href.toString(),dataGoogleAnalytics.navigator=navigator.userAgent,dataGoogleAnalytics.response=JSON.stringify(response),ga("send","event","Error "+response.status,message,JSON.stringify(dataGoogleAnalytics))}return $q.reject(response)}}}]),angular.module("menu",[]),function(){angular.module("menu").controller("MenuLeftController",["$log","$scope","$http","$rootScope","$state","$timeout","$translate","Notification","$ionicHistory","$ionicModal","serviceAlunos","MenuTree","MenuGroup","ParametrosIntegracaoSso","SessionData","LogoutService","$location","LOCALES","$ionicLoading","$ionicSideMenuDelegate","$window","Storage","RelatorioService","NeoAssistService","UtilService","Configs",function($log,$scope,$http,$rootScope,$state,$timeout,$translate,Notification,$ionicHistory,$ionicModal,serviceAlunos,menuTree,MenuGroup,ParametrosIntegracaoSso,SessionData,LogoutService,$location,LOCALES,$ionicLoading,$ionicSideMenuDelegate,$window,Storage,RelatorioService,NeoAssistService,UtilService,Configs){var ctrl=this;ctrl.activeMenu=$state.current.pageId,ctrl.dropdownOpen="",ctrl.rootScope=$rootScope,$scope.SessionData=SessionData,$log.debug("[MenuLeftController]\tctrl=",ctrl),$rootScope.menuLeftLoading=!0,$scope.locales={list:[],selectedLanguage:LOCALES.selectedLanguage||LOCALES.preferredLanguage,locales:LOCALES.locales},ctrl.url=function(){return"responsavel"===SessionData.perfil?".responsavel":".avisos"},(void 0===$rootScope.isLeftSideMenuOpened||""===$rootScope.isLeftSideMenuOpened)&&($rootScope.isLeftSideMenuOpened=!0);$scope.toggleButtonLeftSideMenu=function(){$rootScope.isLeftSideMenuOpened?(angular.element("#toggle-button-left-side-bar").css("left","50px"),angular.element("#ion-side-menu-content").css("transform","translate3d(50px, 0px, 0px)"),angular.element("#ion-side-menu-content").css("width",$(window).width()-50+"px"),$rootScope.sideBarMenuItemClass="side-bar-menu-item-closed",$rootScope.sideBarMenuIconClass="side-bar-menu-icon-closed"):(angular.element("#toggle-button-left-side-bar").css("left","275px"),angular.element("#ion-side-menu-content").css("transform","translate3d(275px, 0px, 0px)"),angular.element("#ion-side-menu-content").css("width",$(window).width()-275+"px"),$rootScope.sideBarMenuItemClass="side-bar-menu-item-opened",$rootScope.sideBarMenuIconClass="side-bar-menu-icon-opened"),$rootScope.isLeftSideMenuOpened=!$rootScope.isLeftSideMenuOpened,ctrl.dropdownOpen="",ctrl.grupoSelecionado=null},$scope.showCart=function(){return"/home/servico-solicitacao"===$location.url()},$scope.getCarrinhoItemsQuantity=function(){return void 0!==SessionData.carrinho.length?0:SessionData.carrinho.length},$scope.alunosList={show:!1,items:SessionData.alunosResponsavel.list},$scope.getWindowWidth=function(){return $(window).width()},$scope.toggleList=function(){$scope.alunosList.show=!$scope.alunosList.show},$scope.isListShown=function(){return $scope.alunosList.show},$scope.isCurrentStudent=function(student){SessionData.aluno.list[SessionData.aluno.selecionado]},$scope.getPicture=function(aluno){if(aluno.foto)return aluno.foto;switch(aluno.sexo){case"F":return"img/avatar_F.png";case"M":return"img/avatar_M.png"}return"img/avatar_M.png"},$scope.selecionarAluno=function(aluno){serviceAlunos.selecionarAluno(aluno),$scope.alunosList.show=!1,$state.go($state.$current.self.name,{},{reload:!0,inherity:!0,notify:!0})};var keys=Object.keys(LOCALES.locales);for(i in keys){var k=keys[i],v=LOCALES.locales[k];$log.debug("k=",k,"v=",v),$scope.locales.list.push({code:k,name:v})}$log.debug("[MenuLeftController]\t$scope=",$scope),$ionicModal.fromTemplateUrl("views/logged/_changepassword.view.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){ctrl.modal=modal}),$ionicModal.fromTemplateUrl("views/logged/modal.aluno.alterar.view.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){ctrl.modalAluno=modal}),ctrl.openChangeStudent=function(){ctrl.modalAluno.show()},ctrl.openChangePassword=function(){ctrl.modal.show()},ctrl.closeChangePassword=function(){ctrl.modal.hide()},ctrl.shouldShowDelete=!1,ctrl.shouldShowReorder=!1,ctrl.listCanSwipe=!0,$ionicModal.fromTemplateUrl("views/logged/_selectlocale.view.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){ctrl.modal2=modal}),ctrl.openSelectLocale=function(){ctrl.modal2.show()},$scope.closeSelectLocale=function(){ctrl.modal2.hide()},$scope.onSelectLanguage=function(selectedLanguage){$log.debug("[onSelectLanguage]\tlocales=",$scope.locales),$scope.locales.selectedLanguage=selectedLanguage,$scope.locales.selectedLanguage.code=$scope.locales.selectedLanguage.code?$scope.locales.selectedLanguage.code.toLowerCase():"pt_br",$translate.use($scope.locales.selectedLanguage.code).then(()=>$translate.refresh()),ctrl.idioma.menu="pt_br"===selectedLanguage.code?"pt-br":"en-us",$timeout(function(){var el=angular.element(".back-text > .default-title");if(el){var btnBackCaption=$translate.instant("Ionic.HeaderBar.Button.Back");el.text(btnBackCaption)}},400)},ctrl.message={},ctrl.selecionado={valor:1},ctrl.vibrate=function(){};var aluno=SessionData.aluno,alunoSelecionado=aluno.list[aluno.selecionado];ctrl.groups=[],MenuGroup.get({codAluno:encodeURIComponent(alunoSelecionado.codAluno),codPessoa:alunoSelecionado.usuarioLogado.id},result=>{ctrl.grupoSelecionado=Storage.get("idGrupoMenu"),ctrl.menuAgrupado=result,Storage.set("menu",result),Storage.get("questionariosObrigatorios")&&(Notification.info("Você tem questionário(s) obrigatório(s) pendentes."),$timeout(function(){$state.go("home.avaliacaoinstitucional")},300)),$rootScope.menuLeftLoading||$ionicLoading.hide(),$rootScope.menuLeftLoading=!1},err=>{$ionicLoading.hide()}),ParametrosIntegracaoSso.get({codAluno:encodeURIComponent(alunoSelecionado.codAluno)},result=>{Storage.set("parametrosIntegracaoSso",result)},err=>{$ionicLoading.hide()}),ctrl.idioma={},ctrl.idioma.menu=$translate.instant("Home.view.language"),$log.debug(ctrl.groups),SessionData.aluno.list[0].permittedPages||(SessionData.aluno.list[0].permittedPages=[]);$scope.itemToShow=function(item){let aluno=SessionData.aluno;if(aluno&&(ctrl.aluno=aluno,aluno.list)){let transacoes=aluno.list[0].transacoes?aluno.list[0].transacoes:[];if(!item.pageId||transacoes.indexOf(item.pageId)>=0){"S"===item.emite_relatorio&&(item.url="."+$state.$current.self.pageId);let strUrl=item.url;return strUrl=void 0!==strUrl&&strUrl.startsWith(".")?strUrl.replace(".",""):strUrl,SessionData.aluno.list[0].permittedPages&&-1===SessionData.aluno.list[0].permittedPages.indexOf(strUrl)&&(SessionData.aluno.list[0].permittedPages.push(strUrl),Storage.set("_a",JSON.stringify(SessionData.aluno))),"aor-pagina-redirect"!==strUrl}}return!1},$scope.itemMenuToShow=function(itemMenu){let transacoes=aluno.list[0].transacoes?aluno.list[0].transacoes:[];if(itemMenu.grupoItem&&itemMenu.itens.length>0||itemMenu.itens.length>0)for(let x in itemMenu.itens)if(transacoes.indexOf(itemMenu.itens[x].pageId)>-1)return!0;return!1},ctrl.acaoMenuDropdown=function(id){0==$rootScope.isLeftSideMenuOpened&&$scope.toggleButtonLeftSideMenu(),id!==ctrl.grupoSelecionado?ctrl.grupoSelecionado=id:ctrl.grupoSelecionado=null},ctrl.toggleGroup=function(group){ctrl.isGroupShown(group)?ctrl.shownGroup=null:ctrl.shownGroup=group},ctrl.isGroupShown=function(group){return ctrl.shownGroup===group},$rootScope.logout=LogoutService.logout,ctrl.logout=function(){$rootScope.logout(),NeoAssistService.removerNeoAssist()},ctrl.changePassword=function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0});var idPessoa=SessionData.user.id,user={oldPassword:encodeURIComponent(ctrl.oldPassword),newPassword:encodeURIComponent(ctrl.newPassword),newPasswordConfirmation:encodeURIComponent(ctrl.newPasswordConfirmation),idPessoa:idPessoa};$http({method:"PUT",url:"changePassword",data:$.param(user),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(data,status,headers,config){if(200==status)Notification.info($translate.instant("Home.view.passwordChanged"));else{var error=500==status?$translate.instant("Home.view.InvalidPassword"):data.message;Notification.error(error)}$ionicLoading.hide(),ctrl.oldPassword="",ctrl.newPassword="",ctrl.newPasswordConfirmation="",ctrl.closeChangePassword()}).error(function(data,status,headers,config){401==status&&$translate.instant("Home.view.InvalidPassword");$ionicLoading.hide()})},ctrl.abrirRecursoExterno=function(item){if(ctrl.activeMenu=item.pageId,Storage.set("idGrupoMenu",item.id_grupo),ctrl.grupoSelecionado=item.id_grupo,$ionicSideMenuDelegate.isOpenLeft()&&$ionicSideMenuDelegate.toggleLeft(),".avisos"==item.url&&0==$rootScope.isLeftSideMenuOpened&&$scope.toggleButtonLeftSideMenu(),ctrl.dropdownOpen.length>0?ctrl.dropdownOpen="":ctrl.dropdownOpen=item.url,"S"===item.urlExterna){if(item.pageId.indexOf("canvas")>-1){const regex=/(^.*)[?]user=(.*)[&]pass=(.*)/g;results=regex.exec(item.url);var form=document.createElement("form"),element1=document.createElement("input"),element2=document.createElement("input");form.id="login_form",form.method="POST",form.action=results[1]+"/login/canvas",/Apple/.test(navigator.vendor)||(form.target="_blank"),element1.value=results[2],element1.name="pseudonym_session[unique_id]",element1.id="pseudonym_session_unique_id",form.appendChild(element1),element2.value=results[3],element2.name="pseudonym_session[password]",element2.id="pseudonym_session_password",form.appendChild(element2),document.body.appendChild(form),form.submit();var item=document.getElementById("login_form");return void item.parentNode.removeChild(item)}if(item.pageId.indexOf("moodlerooms")>-1){const regex=/(^.*)[?]user=([^#]*)[&]pass=([^#]*)/g;results=regex.exec(item.url);var form=document.createElement("form"),element1=document.createElement("input"),element2=document.createElement("input");form.id="login_form",form.method="POST",form.target="_blank",form.action=results[1]+"/login/index.php",element1.value=results[2],element1.name="username",element1.id="username",form.appendChild(element1),element2.value=results[3],element2.name="password",element2.id="password",form.appendChild(element2),document.body.appendChild(form),form.submit();var item=document.getElementById("login_form");return void item.parentNode.removeChild(item)}if(item.pageId.indexOf("sso-moodle")>-1){var aluno=SessionData.aluno,codAluno=aluno.list[aluno.selecionado].codAluno,urlAutenticacaoMoodle=Configs.getApiServer()+"/pessoas/codAluno/"+codAluno+"/parametros-integracao-moodle";return void $http({method:"GET",url:urlAutenticacaoMoodle,headers:{}}).success(function(successResult){console.log("successResult",successResult.urlAutenticacao),successResult?ctrl.redirectUrl(successResult.urlAutenticacao):Notification.error("Erro ao tentar realizar o acesso.")}).error(function(errorResult){console.log(errorResult),Notification.error("Erro ao tentar realizar o acesso.")})}if(item.pageId.indexOf("gedweb")>-1){var parametros=Storage.get("parametrosIntegracaoSso"),ssoUrl=parametros.listaParametros.gedweb.urlLogin,tokenUrl=parametros.listaParametros.gedweb.urlToken,userId=parametros.listaParametros.gedweb.userId,senha=parametros.listaParametros.gedweb.senha,auth=btoa(userId+":"+senha);return void $http({method:"POST",url:"external-request",data:{url:tokenUrl,method:"GET",headers:{Authorization:"Basic "+auth,Accept:"application/json"}}}).success(function(successResult){var url=ssoUrl+"?token="+successResult.Token;ctrl.redirectUrl(url)}).error(function(errorResult){console.log(errorResult),Notification.error("Erro ao tentar realizar o acesso.")})}if(item.pageId.indexOf("minha-biblioteca")>-1){var parametros=Storage.get("parametrosIntegracaoSso"),url=parametros.listaParametros["minha-biblioteca"].urlToken,firstName=parametros.listaParametros["minha-biblioteca"].firstName,lastName=parametros.listaParametros["minha-biblioteca"].lastName,email=parametros.listaParametros["minha-biblioteca"].email,apiKey=parametros.listaParametros["minha-biblioteca"].apiKey,requestBody='<?xml version="1.0" encoding="UTF-8"?><CreateAuthenticatedUrlRequest xmlns="http://dli.zbra.com.br"  xmlns:xsd="http://www.w3.org/2001/XMLSchema"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">   <FirstName>'+firstName+"</FirstName>   <LastName>"+lastName+"</LastName>   <Email>"+email+"</Email></CreateAuthenticatedUrlRequest>";return void $http({method:"POST",url:"external-request",data:{url:url,method:"POST",headers:{"Content-Type":"application/xml; charset=utf-8","X-DigitalLibraryIntegration-API-Key":apiKey,Host:"digitallibrary-staging.zbra.com.br",Expect:"100-continue","Accept-Encoding":"gzip, deflate",Connection:"Keep-Alive",Accept:"application/xml"},body:requestBody}}).success(function(successResult){var jsonOutput=ctrl.convertXmlToJson(successResult);"false"==jsonOutput.CreateAuthenticatedUrlResponse.Success?(console.log(jsonOutput),Notification.error("Erro ao tentar realizar o acesso.")):ctrl.redirectUrl(jsonOutput.CreateAuthenticatedUrlResponse.AuthenticatedUrl)}).error(function(errorResult){console.log(errorResult),Notification.error("Erro ao tentar realizar o acesso.")})}if(item.pageId.indexOf("pearson")>-1){var aluno=SessionData.aluno,alunoSelecionado=aluno.list[aluno.selecionado],matricula=alunoSelecionado.codAluno,parametros=Storage.get("parametrosIntegracaoSso"),url=parametros.listaParametros.pearson.urlLogin,seed=parametros.listaParametros.pearson.hashSeed,base=matricula+seed;return void $http({method:"GET",url:"hex-md5?base="+base}).success(function(successResult){var hash=successResult.hash,form=document.createElement("form"),element1=document.createElement("input"),element2=document.createElement("input");form.id="login_form",form.method="POST",form.target="_blank",form.action=url,element1.value=matricula,element1.name="login",element1.id="login",form.appendChild(element1),element2.value=hash,element2.name="token",element2.id="token",form.appendChild(element2),document.body.appendChild(form),form.submit();var item=document.getElementById("login_form");item.parentNode.removeChild(item)}).error(function(errorResult){console.log(errorResult),Notification.error("Erro ao tentar realizar o acesso.")})}if(item.pageId.indexOf("revista-tribunais")>-1){var parametros=Storage.get("parametrosIntegracaoSso"),ssoUrl=parametros.listaParametros["revista-tribunais"].urlLogin,tokenUrl=parametros.listaParametros["revista-tribunais"].urlToken;return void $http({method:"POST",url:"external-request",data:{url:tokenUrl,method:"GET"}}).success(function(successResult){successResult.token?ssoUrl.endsWith("?sso-token=")?ctrl.redirectUrl(ssoUrl+successResult.token):ctrl.redirectUrl(ssoUrl+"?sso-token="+successResult.token):Notification.error("Erro ao tentar realizar o acesso.")}).error(function(errorResult){console.log(errorResult),Notification.error("Erro ao tentar realizar o acesso.")})}ctrl.redirectUrl(item.url)}else"S"===item.emite_relatorio&&RelatorioService.downloadReportService(item.pageId,SessionData.aluno.list[0].codAluno)},ctrl.redirectUrl=function(url){if(ctrl.insertParam("url_externa",url),/Version/.test(navigator.userAgent)||$window.open(url,"_blank"),window.location.href.indexOf("url_externa")>-1){var regex=new RegExp("[?&]url_externa(=([^#]*)|&|#|$)"),results=regex.exec(window.location.href);/Apple/.test(navigator.vendor)?window.location.assign(results[results.length-1]):window.location.href=window.location.href.replace(results[0],"")}},ctrl.convertXmlToJson=function(xmlString){const jsonData={};for(const result of xmlString.matchAll(/(?:<(\w*)(?:\s[^>]*)*>)((?:(?!<\1).)*)(?:<\/\1>)|<(\w*)(?:\s*)*\/>/gm)){const key=result[1]||result[3],value=result[2]&&ctrl.convertXmlToJson(result[2]);jsonData[key]=(value&&Object.keys(value).length?value:result[2])||null}return jsonData},ctrl.getLinkUrl=function(item){if(item&&item.url&&item.url.indexOf("aor-pagina-redirect")>-1&&2===item.url.split("/").length){let rota=".aor-pagina-redirect",param=item.url.split("/")[1];return rota=$state.href("home"+rota)+param}let state=item?$state.href("home"+item.url):null;return item&&item.url.indexOf(".custom/")>=0&&(state=item.url.replace(".","#/home/")),state},ctrl.insertParam=function(key,value){var url=window.location.href;url.indexOf("?")>-1?url+="&"+encodeURI(key)+"="+encodeURI(value):url+="?"+encodeURI(key)+"="+encodeURI(value),window.location.href=url},SessionData.alunoAntigo=SessionData.aluno,$scope.$watch(function(){return SessionData.aluno},function(value){SessionData.alunoAntigo!=value&&Storage.set("menu",null)}),ctrl.logoCustom=function(){let defer=UtilService.obtemRecurso({aplicacao:"ALUNO_RESP",objeto:"LOGO"});return defer},$scope.ativaAltoContraste=function(){$rootScope.isAtivoAltoContraste?($rootScope.isAtivoAltoContraste=!1,$rootScope.$broadcast("altoContraste")):($rootScope.isAtivoAltoContraste=!0,$rootScope.$broadcast("altoContraste"))},$scope.logoCustom=ctrl.logoCustom(),$scope.logoCustom.then(data=>{null!==data.imagem?$scope.usaLogoCustom=!0:$scope.usaLogoCustom=!1}),ctrl.faviconCustom=function(){let defer=UtilService.obtemRecurso({aplicacao:"ALUNO_RESP",objeto:"FAVICON"});return defer},$scope.faviconCustom=ctrl.faviconCustom(),$scope.faviconCustom.then(data=>{null!==data.imagem?$scope.usaFaviconCustom=!0:$scope.usaFaviconCustom=!1})}])}(),angular.module("menu").component("menuLeft",{templateUrl:"js/custom-components/menu-left/menu-left.component.html",bindings:{session:"=",onListOpenAvisoDetail:"&"},controller:"MenuLeftController",controllerAs:"ctrl"}),function(){angular.module("menu").controller("MenuRightController",["$log","$ionicSideMenuDelegate","uiCalendarConfig",function($log,$ionicSideMenuDelegate,uiCalendarConfig){var ctrl=this;$log.debug("[MenuRightController]\tctrl=",ctrl),ctrl.closeMenuRight=function(isOpen){$ionicSideMenuDelegate.toggleRight(isOpen)},xUiCalendarConfig=uiCalendarConfig,ctrl.dayClick=function(date,jsEvent,view){$log.debug("[dayClick]\tuiCalendarConfig=",uiCalendarConfig),$log.debug("[dayClick]\tdate=",date,"jsEvent=",jsEvent,"view=",view);ctrl.closeMenuRight(!1),ctrl.agenda.selectedDate=date,uiCalendarConfig.calendars.agendaCalendar.fullCalendar("select",date),$log.debug("[dayClick]\tuiCalendarConfig.calendars[calendar]=",uiCalendarConfig.calendars.agendaCalendar),$log.debug("[ dayClick]\tagenda.selectedDate=",ctrl.agenda.selectedDate.format()),$(".fc-state-highlight").removeClass("fc-state-highlight"),$(jsEvent.target).addClass("fc-state-highlight")},ctrl.alertEventOnClick=function(){$log.debug("[alertEventOnClick]");ctrl.closeMenuRight(!0)},ctrl.alertOnDrop=function(){},ctrl.alertOnResize=function(){},ctrl.uiConfig={calendar:{editable:!0,height:"auto",header:{left:"month,agendaWeek,agendaDay",center:"title",right:"prev,today,next"},theme:!0,lang:"pt-br",dayClick:ctrl.dayClick,eventClick:ctrl.alertEventOnClick,eventDrop:ctrl.alertOnDrop,eventResize:ctrl.alertOnResize}};var date=new Date;$log.debug("[showCalendarButton]\tctrl.agenda=",ctrl.agenda);var d=date.getDate(),m=date.getMonth(),y=date.getFullYear();ctrl.eventSources=[{events:[{title:"All Day Event",start:new Date(y,m,1)},{title:"Long Event",start:new Date(y,m,d-5),end:new Date(y,m,d-2)},{id:999,title:"Repeating Event",start:new Date(y,m,d-3,16,0),allDay:!1},{id:999,title:"Repeating Event",start:new Date(y,m,d+4,16,0),allDay:!1},{title:"Birthday Party",start:new Date(y,m,d+1,19,0),end:new Date(y,m,d+1,22,30),allDay:!1},{title:"Click for Google",start:new Date(y,m,28),end:new Date(y,m,29),url:"https://google.com/"}]}]}])}(),angular.module("menu").component("menuRight",{templateUrl:"js/custom-components/menu-right/menu-right.component.html",bindings:{agenda:"=",tableData:"=",onListOpenAvisoDetail:"&"},controller:"MenuRightController",controllerAs:"ctrl"}),function(){angular.module("alunoCard",["aol.service"]).controller("AlunoCardController",["$log","SessionData","$scope","serviceAlunos",function($log,SessionData,$scope,serviceAlunos){var self=this;self.alunoSelecionado=null!==SessionData.aluno&&void 0!==SessionData.aluno.list?SessionData.aluno.list[0]:null,self.sessionData=SessionData,$log.debug("[AlunoCardController]\tself=",self),self.loadFoto=function(){serviceAlunos.loadFotoAluno(self.alunoSelecionado)},self.loadFoto()}])}(),angular.module("alunoCard").component("alunoCard",{templateUrl:"js/custom-components/aluno-card/aluno-card.component.html",controller:"AlunoCardController",controllerAs:"ctrlAlunoCard",bindings:{aluno:"=",columns:"<"}}),angular.module("avisos",["aol.service"]),function(){angular.module("avisos").controller("AvisosListController",["$log","$scope","Aluno.Avisos","SessionData",function($log,$scope,Aluno_Avisos,SessionData){var vm=this;vm.id="AvisosListController",$scope.id=vm.id,$log.debug("[AvisosListController]\t$scope=",$scope),$log.debug("[AvisosListController]\tSessionData=",SessionData);var aluno=SessionData.aluno,alunoSelecionado=aluno.list[aluno.selecionado];vm.avisos=[],Aluno_Avisos.query({codPessoa:alunoSelecionado.id,codAluno:encodeURIComponent(alunoSelecionado.codAluno)},function(result){$log.debug("[Aluno_Aviso_handleSuccess]\t result="+result),vm.avisos=result.content},function(reason){$log.error("[Aluno_Aviso_handleFailure]\terror"+arguments),void 0!==reason&&$log.error("[Aluno_Aviso_handleFailure]\treason:"+reason)}),vm.listOpenAvisoDetail=function(item){vm.avisoItem=item,$log.debug("[AvisosListController.listOpenAvisoDetail]\tvm=",vm),vm.onOpenAvisoDetail({aviso:item})},$log.debug("[AvisosListController]\tvm=",vm)}])}(),angular.module("avisos").component("avisosList",{templateUrl:"js/custom-components/avisos-list/avisos-list.component.html",bindings:{onOpenAvisoDetail:"&"},controller:"AvisosListController",controllerAs:"ctrlAvisosList"}),function(){angular.module("avisos").controller("AvisosListItemController",["$log",function($log){var vm=this;vm.itemClick=function(){$log.debug("[AvisosListItemController.itemClick]"),vm.itemOpenAvisoDetail()},vm.itemOpenAvisoDetail=function(){$log.debug("[AvisosListItemController.itemOpenAvisoDetail]\t avisoItem=",vm.avisoItem),vm.avisoItem.aviso.content.search(/<a href=.*?>/gi)>-1?(vm.avisoItem.aviso.content=vm.avisoItem.aviso.content.replace(/<a href=.*?>/gi,'<a class="linkAviso">'),vm.avisoItem.aviso.atualizaLink=!0):vm.avisoItem.aviso.atualizaLink=!1,vm.onListOpenAvisoDetail({aviso:vm.avisoItem})},$log.debug("[AvisosListItemController]\tvm=",vm)}])}(),angular.module("avisos").component("avisosListItem",{templateUrl:"js/custom-components/avisos-list/avisos-list-item.component.html",bindings:{avisoItem:"=",onListOpenAvisoDetail:"&"},controller:"AvisosListItemController",controllerAs:"ctrl"}),function(){angular.module("avisoDetail",[]).controller("AvisoDetailController",["$ionicPopup","$log",function($ionicPopup,$log){var vm=this;vm.showAlert=function(){if(vm.avisoItem.aviso.atualizaLink){var alertPopup=$ionicPopup.alert({title:"AOnline",template:"Link somente disponível no Website."});alertPopup.then(function(res){})}},$log.debug("[AvisoDetailController]\tvm=",vm)}])}(),angular.module("avisoDetail").component("avisoDetail",{templateUrl:"js/custom-components/aviso-detail/aviso-detail.component.html",bindings:{avisoItem:"="},controller:"AvisoDetailController",controllerAs:"ctrl"}),angular.module("documentos",["aol.service","login.service"]),angular.module("ocorrencias",["aol.service","login.service"]),function(){angular.module("ocorrencias").controller("OcorrenciasListController",["$log","$scope","Aluno.Ocorrencias","Aluno.Ocorrencias.Ciencia","SessionData","Notification",function($log,$scope,Aluno_Ocorrencias,Aluno_Ocorrencias_Ciencia,SessionData,Notification){var vm=this;vm.id="OcorrenciasListController",$scope.id=vm.id,$log.debug("[OcorrenciasListController]\t$scope=",$scope),$log.debug("[OcorrenciasListController]\tSessionData=",SessionData);var aluno=SessionData.aluno,alunoSelecionado=aluno.list[aluno.selecionado];function Aluno_Ocorrencias_Ciencia_handleFailure(reason){$log.error("[Aluno_Ocorrencias_Ciencia_handleFailure]\terror"+arguments)}function Aluno_Ocorrencias_Ciencia_handleSuccess(result){$log.debug("[Aluno_Ocorrencias_Ciencia_handleSuccess]\t result="+result);var status=result&&result.status?result.status:null;status&&0==status.code?vm.ocorrenciaItem.ciente=!0:$log.debug("[Aluno_Ocorrencias_Ciencia_handleSuccess]\t status="+status.statusMsg)}vm.ocorrencias=[],Aluno_Ocorrencias.query({codPessoa:alunoSelecionado.id,codAluno:encodeURIComponent(alunoSelecionado.codAluno)},function(result){$log.debug("[Aluno_Ocorrencia_handleSuccess]\t result="+result),vm.ocorrencias=result.content;for(let i=0;i<vm.ocorrencias.length;i++)vm.ocorrencias[i].data=vm.ocorrencias[i].data.substring(0,10),vm.ocorrencias[i].data.replace("-","/")},function(reason){$log.error("[Aluno_Ocorrencia_handleFailure]\terror"+arguments),void 0!==reason&&$log.error("[Aluno_Ocorrencia_handleFailure]\treason:"+reason)}),vm.listOpenOcorrenciaDetail=function(item){vm.ocorrenciaItem=item,$log.debug("[OcorrenciasListController.listOpenOcorrenciaDetail]\tvm=",vm),vm.onOpenOcorrenciaDetail({ocorrencia:item}),Aluno_Ocorrencias_Ciencia.query({codPessoa:SessionData.user.id,codAluno:encodeURIComponent(alunoSelecionado.codAluno)},item,Aluno_Ocorrencias_Ciencia_handleSuccess,Aluno_Ocorrencias_Ciencia_handleFailure)},$log.debug("[OcorrenciasListController]\tvm=",vm)}])}(),angular.module("ocorrencias").component("ocorrenciasList",{templateUrl:"js/custom-components/ocorrencias-list/ocorrencias-list.component.html",bindings:{onOpenOcorrenciaDetail:"&"},controller:"OcorrenciasListController",controllerAs:"ctrlOcorrenciasList"}),function(){angular.module("ocorrencias").controller("OcorrenciasListItemController",["$log",function($log){var vm=this;vm.itemClick=function(){$log.debug("[OcorrenciasListItemController.itemClick]"),vm.itemOpenOcorrenciaDetail()},vm.itemOpenOcorrenciaDetail=function(){$log.debug("[OcorrenciasListItemController.itemOpenOcorrenciaDetail]\t ocorrenciaItem=",vm.ocorrenciaItem),vm.onListOpenOcorrenciaDetail({ocorrencia:vm.ocorrenciaItem})},$log.debug("[OcorrenciasListItemController]\tvm=",vm)}])}(),angular.module("ocorrencias").component("ocorrenciasListItem",{templateUrl:"js/custom-components/ocorrencias-list/ocorrencias-list-item.component.html",bindings:{ocorrenciaItem:"=",onListOpenOcorrenciaDetail:"&"},controller:"OcorrenciasListItemController",controllerAs:"ctrl"}),function(){angular.module("ocorrenciaDetail",[]).controller("OcorrenciaDetailController",["$log","$ionicLoading","Configs","DownloadArquivo",function($log,$ionicLoading,Configs,DownloadArquivo){this.downloadAnexoOcorrencia=function(aluno,data,tipo,ordem){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1});let params={};var dataOco=new Date(data+" GMT-03:00");params.url=Configs.getApiServer()+"/pessoas/cod_aluno/"+aluno+"/data_ocorrencia/"+dataOco+"/tipo_ocorrencia/"+tipo+"/ordem_ocorrencia/"+ordem+"/baixar_anexo_ocorrencia",params.method="GET",DownloadArquivo.downloadArquivo(params)},$log.debug("[OcorrenciaDetailController]\tvm=",this)}])}(),angular.module("ocorrenciaDetail").component("ocorrenciaDetail",{templateUrl:"js/custom-components/ocorrencia-detail/ocorrencia-detail.component.html",bindings:{ocorrenciaItem:"="},controller:"OcorrenciaDetailController",controllerAs:"ctrl"}),function(){angular.module("boletimDetail",["chart.js"]).controller("BoletimDetailController",["$log",function($log){var vm=this;$log.debug("[BoletimDetailController]\tvm=",vm),vm.chart_height=.7*window.innerHeight,vm.toggleGroup=function(group){vm.isGroupShown(group)?vm.shownGroup=null:vm.shownGroup=group,$log.debug("vm=",vm),$log.debug("vm.shownGroup=",vm.shownGroup)},vm.isGroupShown=function(group){return $log.debug("vm.shownGroup === group? ",vm.shownGroup===group),vm.shownGroup===group},$log.debug("BoletimDetailController] vm",vm)}])}(),angular.module("boletimDetail").component("boletimDetail",{templateUrl:"js/custom-components/boletim-detail/boletim-detail.component.html",bindings:{cell:"=",chart:"="},controller:"BoletimDetailController",controllerAs:"ctrl"}),function(){angular.module("boletim",["aol.service","boletimDetail"]).controller("BoletimDeckController",["$log","Aluno.Disciplinas.Boletim","Aluno.Provas.Boletim","RelatorioService","$attrs","Notification","$ionicLoading","$ionicModal","$scope","$http","Configs","DownloadArquivo","RelatorioService",function($log,Aluno_Disciplinas_Boletim,Aluno_Provas_Boletim,RelatorioService,$attrs,Notification,$ionicLoading,$ionicModal,$scope,$http,Configs,DownloadArquivo,RelatorioService){var self=this;function filtrosSubPeriodo(subPeriodoSelecionado){mediaSubperiodo(subPeriodoSelecionado),faltasSubperiodo(subPeriodoSelecionado)}function listarSubPeriodos(sPeriodo){for(self.subPeriodos=[],i=0;i<sPeriodo.length;i++)if(pos=self.subPeriodos.map(e=>e.descricao).indexOf(sPeriodo[i].descricao),-1===pos&&null!==sPeriodo[i].descricao){var subPeriodo={};subPeriodo.codSubPeriodo=sPeriodo[i].codSubPeriodo,subPeriodo.descSubPeriodo=sPeriodo[i].descricao,self.subPeriodos.push(subPeriodo),self.filtroSubperiodo=!0}}function mediaSubperiodo(subPeriodo){for(self.SubperiodoSelecionado=subPeriodo,i=0;i<self.boletinsAluno.length;i++)for(j=self.boletinsAluno[i].mediaSubPeriodos.length-1;j>=0;j--){if(null!==subPeriodo.codSubPeriodo&&self.boletinsAluno[i].mediaSubPeriodos[j].periodo.subPeriodo.codSubPeriodo===subPeriodo.codSubPeriodo.toString()){self.boletinsAluno[i].media=self.boletinsAluno[i].mediaSubPeriodos[j].nota;break}self.boletinsAluno[i].media=""}}function faltasSubperiodo(subPeriodo){for(self.SubperiodoSelecionado=subPeriodo,RelatorioService.verificaReportServiceEntry("Boletim",self.alunoSelecionado.codAluno).then(function(result){self.exibeRelatorio=result}).catch(function(err){console.log(err)}),i=0;i<self.boletinsAluno.length;i++){var totalFaltas={},faltasAcumuladas=0;for(j=0;j<self.boletinsAluno[i].boletim.turmaDisciplina.disciplina.faltas.length;j++)faltasAcumuladas+=self.boletinsAluno[i].boletim.turmaDisciplina.disciplina.faltas[j].faltasAcumuladas;totalFaltas.faltasAcumuladas=faltasAcumuladas,self.boletinsAluno[i].faltasSubPeriodo=totalFaltas}}self.boletim,self.rows=[],self.listarSubPeriodos=listarSubPeriodos,self.mediaSubperiodo=mediaSubperiodo,self.faltasSubperiodo=faltasSubperiodo,self.getWindowWidth=function(){return window.innerWidth},self.filtrosSubPeriodo=filtrosSubPeriodo,self.SubperiodoSelecionado="",self.imprimirRelatorio=function(pagina,aluno){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),RelatorioService.downloadReportService(pagina,aluno)},self.itemClick=function(cell){$log.debug("[BoletimDeckController.itemClick] cell:",cell),self.itemOpenBoletimDetail(cell)},self.itemOpenBoletimDetail=function(cell){$log.debug("[BoletimDeckController.itemOpenBoletimDetail]\t cell=",cell),self.onOpenBoletimDetail({cell:cell})},self.faltasDetail=function(cell){self.onOpenFaltasDetail({cell:cell})},self.alunoSelecionado=self.aluno.list[self.aluno.selecionado],self.itemProvaDetail=function(cell){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),Aluno_Provas_Boletim.query({codAluno:encodeURIComponent(cell.aluno.codAluno),codDisciplina:cell.boletim.turmaDisciplina.disciplina.codDisciplina,codTurma:encodeURIComponent(cell.boletim.turmaDisciplina.turma.turma),ano:cell.boletim.turmaDisciplina.turma.periodo.ano,periodo:cell.boletim.turmaDisciplina.turma.periodo.semestre},function(result){$ionicLoading.hide(),self.onOpenProvasDetail({cell:cell,provas:result.content,subPeriodo:self.SubperiodoSelecionado})},function(reason){var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";Notification.error("[Aluno_Boletins_handleFailure]\treason="+str),$ionicLoading.show({template:str,duration:2500})})},$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),Aluno_Disciplinas_Boletim.query({alunoId:encodeURIComponent(self.alunoSelecionado.codAluno),pessoaId:self.alunoSelecionado.id},function(result){for(self.boletinsAluno=result.content,d=0;d<self.boletinsAluno.length;d++){var cell={};cell.boletimAluno=self.boletinsAluno[d],listarSubPeriodos(cell.boletimAluno.boletim.turmaDisciplina.turma.periodo.listSubPeriodo);var subPeriodoCorrente={};if(null!==self.boletinsAluno[d].boletim.turmaDisciplina.turma.periodo.subPeriodoCorrente&&(subPeriodoCorrente.codSubPeriodo=self.boletinsAluno[d].boletim.turmaDisciplina.turma.periodo.subPeriodoCorrente.codSubPeriodo,subPeriodoCorrente.descSubPeriodo=self.boletinsAluno[d].boletim.turmaDisciplina.turma.periodo.subPeriodoCorrente.descricao),null!==subPeriodoCorrente.codSubPeriodo?$scope.subPeriodoSelecionado=subPeriodoCorrente:(subPeriodoCorrente.codSubPeriodo="0",subPeriodoCorrente.descSubPeriodo="",$scope.subPeriodoSelecionado=subPeriodoCorrente),d>=self.boletinsAluno.length)break}filtrosSubPeriodo($scope.subPeriodoSelecionado),$ionicLoading.hide()},function(reason){$log.debug("[Aluno_Boletins_handleFailure]\treason=",reason);var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";$log.debug("[Aluno_Boletins_handleFailure]\treason="+str),Notification.error("[Aluno_Boletins_handleFailure]\treason="+str),$ionicLoading.show({template:str,duration:2500})})}])}(),angular.module("boletim").component("boletimDeck",{templateUrl:"js/custom-components/boletim-deck/boletim-deck.component.html",controller:"BoletimDeckController",controllerAs:"ctrl",bindings:{aluno:"=",onOpenBoletimDetail:"&",onOpenProvasDetail:"&",onOpenFaltasDetail:"&"}}),function(){angular.module("horarios",[]).controller("HorariosListController",["$translate","$log",function($translate,$log){var vm=this;$log.debug("[HorariosListController]\tvm=",vm),vm.showList=function(){return vm.tableData.haveData()},vm.listHorarioAula=function(diaSemana){$log.debug('Listando horários de aulas (diaSemana: " + diaSemana + ")...');return vm.tableData.listHorarios(diaSemana)},vm.getSemestreLabel=function(semestre){var ord="";switch(semestre){case"1":ord="st";break;case"2":ord="nd";break;case"3":ord="rd";break;default:ord="th"}var str=$translate.instant("Aluno.HorarioAulas.Semestre",{semestre:semestre,ord:ord});return str}}])}(),angular.module("horarios").component("horariosList",{templateUrl:"js/custom-components/horarios-list/horarios-list.component.html",bindings:{tableData:"=",onListOpenAvisoDetail:"&"},controller:"HorariosListController",controllerAs:"ctrl"}),function(){angular.module("agenda",[]).controller("AgendaListComponentController",["$log",function($log){$log.debug("[AgendaListComponentController]\tctrl=",this),this.events=[];var selDate=moment(this.agenda.selectedDate);if(this.agenda.events)for(i=0;i<this.agenda.events.length;i++){ev=this.agenda.events[i];var start=moment(ev.start),end=moment(ev.end);end.isValid()||(end=start),$log.debug("ev=",ev,"selDate=",selDate,"start=",start,"end=",end),$log.debug("selDate ISO=",selDate.valueOf()),$log.debug("  start ISO=",start.valueOf()),$log.debug("    end ISO=",end.valueOf()),(selDate.isAfter(start,"day")||selDate.isSame(start,"day"))&&(selDate.isBefore(end,"day")||selDate.isSame(end,"day"))&&this.events.push(ev)}this.noEvent=0===this.events.length}])}(),angular.module("agenda").component("agendaList",{templateUrl:"js/custom-components/agenda-list/agenda-list.component.html",bindings:{agenda:"="},controller:"AgendaListComponentController",controllerAs:"ctrl"}),function(){angular.module("agenda").controller("AgendaListItemComponentController",["$log","$scope",function($log,$scope){if(this.event.className="object"==typeof this.event.className?this.event.className.join(" "):this.event.className,this.event.end&&null!=this.event.end&&null!=this.event.end)var[endData,endDataHora]=this.event.end.split("T"),[endDataAno,endDataMes,endDataDia]=endData.split("-"),endData=[endDataDia,endDataMes,endDataAno].join("/"),endFormatMask=endData+" - "+endDataHora;if(this.event.start&&null!=this.event.start&&null!=this.event.start)var[startData,startDataHora]=this.event.start.split("T"),[startDataAno,startDataMes,startDataDia]=startData.split("-"),startData=[startDataDia,startDataMes,startDataAno].join("/"),startFormatMask=startData+" - "+startDataHora;if(this.dataHora=this.event.allDay?startData:startFormatMask,(endData||!this.event.allDay)&&null!=endData){var horaEvento=endDataDia==startDataDia?endDataHora:endFormatMask;this.dataHora+="00:00"==horaEvento||"23:59"==horaEvento?"":" - "+horaEvento}this.dataHora+=this.event.allDay?" ":"",$log.debug("[AgendaListItemComponentController]\tctrl=",this)}])}(),angular.module("agenda").component("agendaListItem",{templateUrl:"js/custom-components/agenda-list-item/agenda-list-item.component.html",bindings:{event:"="},controller:"AgendaListItemComponentController",controllerAs:"ctrl"}),angular.module("servico",[]),function(){angular.module("servico").controller("ServicoListComponentController",["$log","$state","$scope","SessionData","$ionicLoading","Aluno.Secretaria.Servicos",function($log,$state,$scope,SessionData,$ionicLoading,Servicos){var ctrl=this;function loading(value){ctrl.loading=value,value?$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}):$ionicLoading.hide()}loading(!0),$log.debug("[ServicoListComponentController]\tctrl=",ctrl),ctrl.sessionData=SessionData,ctrl.aluno=ctrl.sessionData.aluno,ctrl.agenda=ctrl.sessionData.agenda,ctrl.alunoSelecionado=ctrl.aluno.list[ctrl.aluno.selecionado],ctrl.servicos&&ctrl.servicos.result&&ctrl.servicos.result.content&&(ctrl.servicoList=ctrl.servicos.result.content);loading(!1),$scope.novaSolicitacao=function(){$state.go("home.servico-solicitacao")}}])}(),angular.module("servico").component("servicoList",{templateUrl:"js/custom-components/servico-list/servico-list.component.html",bindings:{servicos:"="},controller:"ServicoListComponentController",controllerAs:"ctrl"}),function(){angular.module("servico").controller("ServicoListItemComponentController",["$rootScope","$ionicLoading","$ionicModal","$ionicHistory","Notification","ServicoService","CartaoService","PagamentoCartaoFactory","$log","$scope","$state","Configs","DownloadArquivo","SessionData","Storage","$translate",function($rootScope,$ionicLoading,$ionicModal,$ionicHistory,Notification,ServicoService,CartaoService,PagamentoCartaoFactory,$log,$scope,$state,Configs,DownloadArquivo,SessionData,Storage,$translate){let aluno=SessionData.aluno.list[0];var ctrl=this;$log.debug("[ServicoListItemComponentController]\t$scope=",$scope,"ctrl=",ctrl,"status=",ctrl.servico.status),ctrl.servico&&ctrl.servico.status&&ctrl.servico.status.toUpperCase().indexOf("CONCL")>-1?ctrl.className="fa fa-check-square":ctrl.servico&&ctrl.servico.status&&ctrl.servico.status.toUpperCase().indexOf("EM ANDAMENTO")>-1?ctrl.className="fa fa-clock-o":ctrl.servico&&ctrl.servico.status&&ctrl.servico.status.toUpperCase().indexOf("AGUARDANDO PAGAMENTO")>-1?ctrl.className="fa fa-clock-o":ctrl.servico&&ctrl.servico.status&&ctrl.servico.status.toUpperCase().indexOf("CANCELADO")>-1?ctrl.className="fa fa-times":ctrl.servico&&ctrl.servico.status&&ctrl.servico.status.toUpperCase().indexOf("INDEFERIDO")>-1?ctrl.className="fa fa-times":ctrl.className="fa fa-exclamation-triangle";ctrl.servico.isCancel=SessionData.aluno.list[SessionData.aluno.selecionado].transacoes.indexOf("servicos-cancelamento")>-1,ctrl.servico.showPix=Storage.get("enablePix")&&"AGUARDANDO PAGAMENTO"==ctrl.servico.status.toUpperCase(),null!==ctrl.servico.boleto&&ServicoService.obterPermitePagarServicoCartao(ctrl.servico.boleto,ctrl.servico.codAluno).then(function(result){ctrl.servico.permitePagarServicoCartao=result.valor}).catch(function(err){Notification.error(err),$ionicHistory.nextViewOptions({disableBack:!0})});function loading(value){ctrl.loading=value,value?$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}):$ionicLoading.hide()}function calcularPrazo(){if(ctrl.servico&&void 0!==ctrl.servico.data&&null!==ctrl.servico.data){var dtTimestamp=ctrl.servico.dataDate,prazoEntrega=ctrl.servico&&ctrl.servico.prazoEntrega?ctrl.servico.prazoEntrega:0;dtTimestamp+=864e5*prazoEntrega;var dtPrazo=new Date(dtTimestamp);ctrl.servico.prazoEntregaDate=dtPrazo.toString(),ctrl.servico.prazoEntregaTimestamp=dtPrazo.getTime()}}ctrl.calcularPrazo=calcularPrazo,$ionicModal.fromTemplateUrl("./js/custom-components/servico-list-item/modal.detalhe.servico.solicitado.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){$scope.modal=modal}),$ionicModal.fromTemplateUrl("./js/custom-components/servico-list-item/modal.anexos.servico.solicitado.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){$scope.modalAnexos=modal}),$scope.openDownloadAnexos=function(servico){$scope.anexosInfo={},$scope.anexosInfo.codAluno=servico.codAluno,$scope.anexosInfo.anexos=servico.anexosServicoItemSolicitados,$scope.modalAnexos.show()},$scope.openDetailService=function(params){var codSolicitacao=params.codSolicitacao,codItemSolicitacao=params.itemSolicitacao,codServico=params.servico,codAluno=params.codAluno;loading(!0);var andamentosSolicitacao=[],anexosAndamentosSolicitacao=[];async function obterAndamentoAnexo(codAndamentoSolicitacao){await ServicoService.obterAndamentoAnexo(SessionData.aluno.list[SessionData.aluno.selecionado].codAluno,codAndamentoSolicitacao).then(function(result){if(result.length>0)for(i=0;i<result.length;i++)anexosAndamentosSolicitacao.push(result[i])}).catch(function(err){Notification.error(err),loading(!1),$ionicHistory.nextViewOptions({disableBack:!0})})}$scope.solicitacaoDetalhe={},$scope.solicitacaoDetalhe.existeDados=!1,ServicoService.obterAndamentoSolicitacaoServico(codAluno,codSolicitacao,codItemSolicitacao).then(async function(result){if(result.length>0)for($scope.solicitacaoDetalhe.andamentosSolicitacao=result,$scope.solicitacaoDetalhe.existeDados=!0,i=0;i<result.length;i++)andamentosSolicitacao.push(result[i].andamento);if(andamentosSolicitacao.length>0){for await(let andamento of andamentosSolicitacao)obterAndamentoAnexo(andamento);$scope.solicitacaoDetalhe.andamentosAnexos=anexosAndamentosSolicitacao}loading(!1)}).catch(function(err){Notification.error(err),loading(!1),$ionicHistory.nextViewOptions({disableBack:!0})}),ServicoService.obterParametroServicoSolicitado(codAluno,codSolicitacao,codItemSolicitacao,codServico).then(function(result){result.length>0&&($scope.solicitacaoDetalhe.parametrosServicosSolicitacoes=result,$scope.solicitacaoDetalhe.existeDados=!0)}).catch(function(err){Notification.error(err),$ionicHistory.nextViewOptions({disableBack:!0})}),$scope.modal.show()},$scope.downloadAnexos=function(codAluno,seqServicoAnexo){loading(seqServicoAnexo),console.log("Codigo aluno: "+codAluno),console.log("Seq Serv Anexo: "+seqServicoAnexo);let params={};params.url=Configs.getApiServer()+"/pessoas/aluno/"+codAluno+"/anexo/"+seqServicoAnexo+"/anexo-solicitacao-servico",params.method="GET",DownloadArquivo.downloadArquivo(params)},$scope.downloadAnexoAndamento=function(chave){loading(!0);let params={};params.url=Configs.getApiServer()+"/pessoas/aluno/"+aluno.codAluno+"/chave_andamento/"+chave+"/download_anexo_andamento",params.method="GET",DownloadArquivo.downloadArquivo(params)},$ionicModal.fromTemplateUrl("views/logged/cartao/modal.pagamento.pix.html",{scope:$scope,animation:"slide-in-up"}).then(function(modalPix){$scope.modalPix=modalPix}),$scope.closeModal=function(){$scope.modalPix.hide()},ctrl.openPixModal=async function(servico){loading(!0),$scope.modalPix.show();let params={id_boleto:servico.boleto,cod_aluno:servico.codAluno};CartaoService.obterDadosPagarServicoCartao(params).then(function(retorno){let obj={candidato:null,concurso:null,listaDeCobrancas:[servico.cobranca],valorTotal:retorno.cartaoValorDocumento};$scope.$broadcast("startPix",obj)}).catch(error=>{$ionicLoading.hide()})},$scope.copiarPix=function(){Clipboard.isSupported()?(ctrl.clipboard=new Clipboard("#copy-button"),Notification.success($translate.instant("pix.view.msg.copied"))):Notification.warning($translate.instant("navegador.sem.suporte"))},ctrl.pagarCartao=function(){let cobrancas,params={id_boleto:ctrl.servico.boleto,cod_aluno:ctrl.servico.codAluno};CartaoService.obterDadosPagarServicoCartao(params).then(function(retorno){cobrancas={valorDocumento:retorno.cartaoValorDocumento,origem:retorno.cartaoOrigem,dataCalculoValor:retorno.cartaoDataCalculoValor,codResponsavelFinanceiro:retorno.cartaoCodRespFinan,opcaoPgtoCartao:retorno.cartaoOpcaoPgto,cobrancasConcatenadas:retorno.cartaoCobrancasSelecionadas,cartaoItensCobrancas:retorno.cartaoItensCobrancas,valorSelecionado:retorno.cartaoValorOriginalDocumento,encargoCalculado:retorno.cartaoEncargoDocumento,encargoBolsa:retorno.cartaoEncargoBolsaDocumento,descontoAdiantamentoCalculado:retorno.cartaoDescontoDocumento},PagamentoCartaoFactory.setCobrancasSelecionadas(cobrancas),$state.go("home.pgtocartao-pagamento")}).catch(function(){Notification.error($translate.instant("General.ErrorNotSpecified"))})},$scope.getWidth=function(){return $(window).width()},ctrl.downloadBoleto=function(servico){loading(!0);let params={};params.url=Configs.getApiServer()+"/financeiro/cod_aluno/"+servico.codAluno+"/cod_boleto/"+servico.boleto+"/exibir_arquivo/false/download_boleto",params.type="application/pdf",params.nomeArquivo="Boleto_"+servico.boleto+"_"+(new Date).getTime()+".pdf",params.method="GET",DownloadArquivo.downloadArquivo(params)},ctrl.downloadAnexo=function(codAluno,seqServicoAnexo){loading(seqServicoAnexo),console.log("Codigo aluno: "+codAluno),console.log("Seq Serv Anexo: "+seqServicoAnexo);let params={};params.url=Configs.getApiServer()+"/pessoas/aluno/"+codAluno+"/anexo/"+seqServicoAnexo+"/anexo-solicitacao-servico",params.method="GET",DownloadArquivo.downloadArquivo(params)},ctrl.downloadDocumento=function(servico){loading(!0);let params={};params.url=Configs.getApiServer()+"/pessoas/codSolicitacao/"+servico.codSolicitacao+"/codItemSolicitacao/"+servico.itemSolicitacao+"/codPessoa/"+SessionData.user.id+"/obtemDocumentoCertificacao",params.method="GET",DownloadArquivo.downloadArquivo(params)},$ionicModal.fromTemplateUrl("./js/custom-components/servico-list-item/modal.confirma.cancela.servico.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){$scope.modalCancela=modal}),$scope.openCancelaServico=function(servico){$scope.modalCancela.show(),$scope.servico=servico},ctrl.cancelarServico=function(solicitacao){$scope.modalCancela.hide(),loading(!0),ServicoService.cancelarSolicitacaoServico(SessionData.aluno.list[SessionData.aluno.selecionado].codAluno,solicitacao.codSolicitacao,solicitacao.itemSolicitacao).then(function(result){if(result.conteudo&&"cancelado"===result.conteudo.toLowerCase())return Notification.success("Serviço Cancelado com Sucesso."),void $scope.$emit("callListServicos");$scope.$emit("callListServicos")},function(error){loading(!1),$ionicHistory.nextViewOptions({disableBack:!0})})},ctrl.visualizarDocumento=function(solicitacao){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1});var params={};params.url=Configs.getApiServer()+"/pessoas/solicitacao/"+solicitacao.codSolicitacao+"/itemSolicitacao/"+solicitacao.itemSolicitacao+"/exibirArquivo/false/cod_aluno/"+aluno.codAluno+"/visualizaDocumentoServico",params.method="GET",DownloadArquivo.downloadArquivo(params)},calcularPrazo()}])}(),angular.module("servico").component("servicoListItem",{templateUrl:"js/custom-components/servico-list-item/servico-list-item.component.html",bindings:{servico:"="},controller:"ServicoListItemComponentController",controllerAs:"ctrl"}),angular.module("MyApp").service("AlunoCadastroService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){var _objAluno,codPessoa,_msgErro={msgErro:"Error student undefined"};function dadosValidosAluno(){return!!SessionData.aluno&&(_objAluno={idPessoa:SessionData.aluno.list[SessionData.aluno.selecionado].id},codPessoa={codPessoa:SessionData.aluno.list[SessionData.aluno.selecionado].id},!0)}this.obterDadosPessoa=function(){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/pessoas/idPessoa/:idPessoa/obterPessoa",{},{cache:!1,query:{method:"GET"}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDadosPessoaLogada=function(){let defer=$q.defer(),codPessoaLogada={idPessoa:SessionData.user.id};return codPessoaLogada?$resource(Configs.getApiServer()+"/pessoas/idPessoa/:idPessoa/obterPessoa",{},{cache:!1,query:{method:"GET"}}).query(codPessoaLogada,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDadosRespFinan=function(respFinan){let defer=$q.defer(),dados={responsavel:encodeURI(respFinan)};return respFinan?$resource(Configs.getApiServer()+"/financeiro/responsavel/:responsavel/obter_dados_resp_finan",{},{cache:!1,query:{method:"GET"}}).query(dados,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterAlunoSessao=function(){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/pessoas/codPessoa/:codPessoa/buscarAlunosSessao",{},{cache:!1,query:{method:"GET"}}).query(codPessoa,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDadosAcademicos=function(codAluno){let defer=$q.defer(),codAlunoConsulta={codAluno:codAluno};return $resource(Configs.getApiServer()+"/pessoas/codAluno/:codAluno/obterDadosAcademicos",{},{cache:!1,query:{method:"GET"}}).query(codAlunoConsulta,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterSituacaoDocumentos=function(codAluno){let defer=$q.defer(),codAlunoConsulta={codAluno:codAluno};return $resource(Configs.getApiServer()+"/pessoas/codAluno/:codAluno/obterSituacaoDocumentos",{},{cache:!1,query:{method:"GET"}}).query(codAlunoConsulta,function(result){500!=result.status&&defer.resolve(result)},function(err){defer.reject()}),defer.promise},this.getListaDocumentosPendentesEEntregues=function(codAluno){let defer=$q.defer(),codAlunoConsulta={codAluno:codAluno};return $resource(Configs.getApiServer()+"/pessoas/cod_aluno/:codAluno/lista_documentos_pendentes_e_entregues",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(codAlunoConsulta,function(result){500!=result.status?defer.resolve(result):defer.reject()},function(err){defer.reject()}),defer.promise},this.uploadDocumento=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/upload_documento_pessoa/",{},{query:{method:"POST",cache:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.incluirDocumento=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/inclui_documento/",{},{query:{method:"POST",cache:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.baixarDocumento=function(){let defer=$q.defer(),params={codSolicitacao:codSolicitacao,codItemSolicitacao:codItemSolicitacao};return $resource(Configs.getApiServer()+"/pessoas/",{},{query:{method:"GET",cache:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.atualizarAluno=function(alunoCadastro){let deferr=$q.defer();return alunoCadastro?$resource(Configs.getApiServer()+"/pessoas/alterarPessoa",{},{query:{method:"POST",isArray:!1}}).query(alunoCadastro,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.obterEnderecoRespFinan=function(idPessoa){let defer=$q.defer(),respFinan={idPessoa:idPessoa};return respFinan?$resource(Configs.getApiServer()+"/financeiro/responsavel",{},{cache:!1,query:{method:"GET"}}).query(respFinan,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterEnderecoRespFinanAluno=function(idAluno){let defer=$q.defer(),respFinan={idAluno:idAluno};return respFinan?$resource(Configs.getApiServer()+"/financeiro/responsavel",{},{cache:!1,query:{method:"GET"}}).query(respFinan,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.atualizarRespFinanInfo=function(respFinan){let deferr=$q.defer();return respFinan?$resource(Configs.getApiServer()+"/financeiro/responsavel/idResponsavel/"+respFinan.idResponsavel,{},{query:{method:"PUT",isArray:!1}}).query(respFinan.dados,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.alterarAluno=function(dadosAluno){let deferr=$q.defer();return dadosAluno?$resource(Configs.getApiServer()+"/v2/tabela/alunos",{},{query:{method:"PUT",isArray:!1}}).query(dadosAluno,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.obterAluno=function(idAluno){let deferr=$q.defer(),aluno={"pk[aluno]":idAluno};return idAluno?$resource(Configs.getApiServer()+"/v2/tabela/alunos",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(response){response.status?deferr.reject():deferr.resolve(response)},function(err){deferr.reject(err)}):deferr.reject(),deferr.promise}}]),angular.module("MyApp").service("CarteirinhaEstudantilService",["$resource","$q","$http","SessionData","Configs","FileSaver",function($resource,$q,$http,SessionData,Configs,FileSaver){var codAluno=SessionData.aluno.list[SessionData.aluno.selecionado].codAluno;this.obterDataVencimentoPeriodo=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/v2/alunos/aluno/"+codAluno+"/vencimento-periodo",{},{cache:!1,query:{method:"GET",isArray:!0}}).get(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterConfigAlunoResp=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/v2/alunos/aluno/"+codAluno+"/config-aluno-resp",{},{cache:!1,query:{method:"GET",isArray:!0}}).get(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.efetuarDownloadRelatorioAluno=function(dados){$http.post(Configs.getApiServer()+"/v2/alunos/relatorio-dados-aluno",dados,{responseType:"arraybuffer"}).then(response=>{!function(response){var contentDisposition=response.headers("content-disposition"),fileName=contentDisposition.substr(contentDisposition.indexOf("filename=")+9);fileName=fileName.replace(/\"/g,"");var contentType=response.headers("content-type"),blob=new Blob([response.data],{type:contentType});FileSaver.saveAs(blob,fileName)}(response)})},this.obtemImagemDoc=function(dados){let defer=$q.defer();return $resource(Configs.getApiServer()+"/v2/alunos/imagem-documento",{},{cache:!1,query:{method:"GET",isArray:!1}}).query({codAluno:encodeURIComponent(dados.codAluno),tipoDocumento:encodeURIComponent(dados.tipoDocumento)},function(response){defer.resolve(response)},function(err){defer.reject(err)}),defer.promise}}]),angular.module("MyApp").service("DocumentoService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){SessionData.aluno}]),angular.module("MyApp").service("ServicoService",["Configs","SessionData","$resource","$q",function(Configs,SessionData,$resource,$q){var _msgErro={msgErro:"Error student undefined"},dadosAluno={codAluno:SessionData.aluno.list[SessionData.aluno.selecionado].codAluno,codPessoa:SessionData.aluno.list[SessionData.aluno.selecionado].id};this.listarServicos=function(){let defer=$q.defer();var _aluno=SessionData.aluno,codPessoa={codPessoaLogada:SessionData.user.id};return _aluno&&(codPessoa.codAluno=_aluno.list[_aluno.selecionado].codAluno),_aluno?$resource(Configs.getApiServer()+"/pessoas/listar_servicos_solicitaveis",{},{query:{method:"POST",isArray:!0}}).query(codPessoa,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obtemDocumentoCertificacao=function(codSolicitacao,codItemSolicitacao){let defer=$q.defer(),params={codSolicitacao:codSolicitacao,codItemSolicitacao:codItemSolicitacao,codPessoa:SessionData.user.id};return $resource(Configs.getApiServer()+"/pessoas/codSolicitacao/:codSolicitacao/codItemSolicitacao/:codItemSolicitacao/codPessoa/:codPessoa/obtemDocumentoCertificacao",{},{query:{method:"GET",cache:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarCamposServico=function(servico){let defer=$q.defer();var dadosServico={codAluno:SessionData.aluno.list[SessionData.aluno.selecionado].codAluno,codServico:servico.servico};return $resource(Configs.getApiServer()+"/pessoas/obtem_servico_solicitavel",{},{query:{method:"POST",isArray:!0}}).query(dadosServico,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarOpcoesCampo=function(codServico,parametro){let defer=$q.defer();var dadosServico={codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno,codServico:codServico,parametro:parametro};return $resource(Configs.getApiServer()+"/pessoas/obtem_combo_parametro",{},{query:{method:"POST",isArray:!0}}).query(dadosServico,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarServicosSolicitados=function(codPessoa,codAluno){let defer=$q.defer(),params={"codPessoa ":codPessoa,"codAluno ":codAluno};return $resource(Configs.getApiServer()+"/pessoas/:codPessoa/alunos/:codAluno/servicos-solicitados",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarServicosSolicitadosCancelamento=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/cod_aluno/:codAluno/cod_pessoa/:codPessoa/lista_servicos_solicitados_cancelamento",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(dadosAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.cancelarSolicitacaoServico=function(aluno,codSolicitacao,codItemSolicitacao){let defer=$q.defer(),params={aluno:aluno,codSolicitacao:codSolicitacao,codItemSolicitacao:codItemSolicitacao};return $resource(Configs.getApiServer()+"/pessoas/aluno/:aluno/cod_solicitacao/:codSolicitacao/cod_item/:codItemSolicitacao/cancela_solicitacao_servicos",{},{cache:!1,query:{method:"GET"}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterAndamentoSolicitacaoServico=function(aluno,codSolicitacao,codItem){let defer=$q.defer(),params={aluno:aluno,cod_solicitacao:codSolicitacao,cod_item:codItem};return $resource(Configs.getApiServer()+"/pessoas/aluno/:aluno/cod_solicitacao/:cod_solicitacao/cod_item/:cod_item/obtem_andamento_solicitacao_servico",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterParametroServicoSolicitado=function(codAluno,codSolicitacao,codItemSolicitacao,codServico){let defer=$q.defer(),params={codSolicitacao:codSolicitacao,codItemSolicitacao:codItemSolicitacao,codAluno:codAluno,codServico:codServico};return $resource(Configs.getApiServer()+"/pessoas/lista_parametros_servico_solicitado",{},{query:{method:"POST",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterAndamentoAnexo=function(aluno,codAndamentoSolicitacao){let defer=$q.defer(),params={aluno:aluno,cod_andamento:codAndamentoSolicitacao};return $resource(Configs.getApiServer()+"/pessoas/aluno/:aluno/cod_andamento/:cod_andamento/lista_andamento_anexo_visivel_aluno",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterPermitePagarServicoCartao=function(boleto,codAluno){let defer=$q.defer(),params={boleto:boleto,codAluno:codAluno};return $resource(Configs.getApiServer()+"/financeiro/permite_pagar_servico_com_cartao",{},{query:{method:"POST"}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.downloadBoleto=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/codAluno/:codAluno/codBoleto/:codBoleto/downloadBoleto",{},{cache:!1,get:{responseType:"arraybuffer",transformResponse:function(data){if(500==status){defer.reject();var domString=new TextDecoder("utf-8").decode(data);return JSON.parse(domString)}let pdf;return data&&(pdf=new Blob([data],{type:"application/pdf"})),{pdf:pdf}}}}).get(params,function(result){defer.resolve(result)},function(error){defer.reject(error)}),defer.promise}}]),angular.module("boletoDeckModule",[]),function(){angular.module("boletoDeckModule").controller("BoletoDeckComponentController",["$rootScope","$log","Financeiro.Boletos","SessionData","Notification","$ionicLoading","$timeout",function($rootScope,$log,Financeiro_Boletos,SessionData,Notification,$ionicLoading,$timeout){var self=this;$log.debug("[BoletoDeckComponentController]:self=",self);var alunos=SessionData.aluno;function handleSuccess(result){$timeout(function(){self.boletos=result.content,$log.debug("BoletoDeckComponentController.Financeiro_Boletos.handleSuccess():\tboletos=",self.boletos),$ionicLoading.hide()},200)}function handleFailure(reason){$ionicLoading.hide(),$log.debug("[BoletoDeckComponentController.Financeiro_Boletos.handleFailure]\treason=",reason);var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";$log.debug("[[BoletoDeckComponentController.Financeiro_Boletos.handleFailure]\treason="+str),Notification.error("[BoletoDeckComponentController.Financeiro_Boletos.handleFailure]\treason="+str)}self.aluno=alunos.list[alunos.selecionado],self.boletos=[],$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),$rootScope.$on("emitAtualizaBoletos",function(){$timeout(function(){Financeiro_Boletos.query({codAluno:encodeURIComponent(self.aluno.codAluno),codPessoa:self.aluno.usuarioLogado.id},handleSuccess,handleFailure)},200)}),Financeiro_Boletos.query({codAluno:encodeURIComponent(self.aluno.codAluno),codPessoa:self.aluno.usuarioLogado.id},handleSuccess,handleFailure)}])}(),angular.module("boletoDeckModule").component("boletoDeck",{templateUrl:"js/custom-components/boleto-deck/boleto-deck.component.html",controller:"BoletoDeckComponentController",controllerAs:"self",bindings:{aluno:"="}}),angular.module("boletoDetailModule",[]),function(){angular.module("boletoDeckModule").controller("BoletoDetailComponentController",["$scope","$rootScope","Configs","$log","Notification","$ionicModal","Financeiro.Boletos.Download","$http","SessionData","$ionicLoading","$window","$timeout","DownloadArquivo","CobrancaService","$state",function($scope,$rootScope,Configs,$log,Notification,$ionicModal,Financeiro_Boletos_Download,$http,SessionData,$ionicLoading,$window,$timeout,DownloadArquivo,CobrancaService,$state){var ctrl=this;$log.debug("[BoletoDetailComponentController]:ctrl=",ctrl),ctrl.openBoletoDetail=function(){$log.debug("[BoletoDetailComponentController.openBoletoDetail()]:boleto=",ctrl.boleto),CobrancaService.getExibeProrrogaBoleto(ctrl.boleto.codigoBoleto).then(function(result){result.valor?ctrl.prorrogarVencimentoBoleto(!1):ctrl.continuarAberturaCobranca(ctrl.boleto.codigoBoleto,isNew=!1)}).catch(function(err){Notification.error(err)})},ctrl.closeBoletoDetail=function(){$log.debug("[BoletoDetailComponentController.closeBoletoDetail()]:boleto=",ctrl.boleto),ctrl.modalBoleto.hide()},ctrl.copiarNumeroBoleto=function(){if(!Clipboard.isSupported())return void Notification.warning("Função não suportada no navegador em uso.");if(ctrl.boleto.ComErro)return void Notification.warning(ctrl.boleto.codigoBarras);ctrl.clipboard=new Clipboard("#copy-button"),Notification.success("Número do Boleto foi copiado!")},ctrl.downloadBoleto=function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),CobrancaService.downloadBoletoCobranca(ctrl.boleto.itensBoleto.codigoBoleto)},ctrl.downloadBoletoExt=function(boleto){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),CobrancaService.getExibeProrrogaBoleto(boleto).then(function(result){result.valor?ctrl.prorrogarVencimentoBoleto(!0):($ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),CobrancaService.downloadBoletoCobranca(boleto))}).catch(function(err){Notification.error(err)})},ctrl.prorrogarVencimentoBoleto=function(isDownload){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),CobrancaService.prorrogarVencimentoBoleto(ctrl.boleto.codigoBoleto).then(function(result){$ionicLoading.hide(),isDownload?result.valor?(CobrancaService.downloadBoletoCobranca(result.valor),$rootScope.$broadcast("emitAtualizaBoletos")):CobrancaService.downloadBoletoCobranca(ctrl.boleto.codigoBoleto):result.valor?ctrl.continuarAberturaCobranca(result.valor,isNew=!0):ctrl.continuarAberturaCobranca(ctrl.boleto.codigoBoleto,isNew=!1)}).catch(function(err){$ionicLoading.hide()})},ctrl.continuarAberturaCobranca=function(codigoBoleto,isNew){let promise1=CobrancaService.listarItensDetalheBoleto(codigoBoleto).then(function(result){ctrl.boleto.itensBoleto=result,ctrl.boleto.itensBoleto.codigoBoleto=codigoBoleto}).catch(function(err){Notification.error(err)}),promise2=CobrancaService.getDadosImpressaoBoleto(codigoBoleto).then(function(result){result.ipte.includes("O boleto não pode ser impresso")&&(ctrl.boleto.precisaAceite=!0),result.ipte.length>0&&isNaN(result.ipte.substring(0,3))&&(ctrl.boleto.ComErro=!0),ctrl.boleto.codigoBarras=result.ipte}).catch(function(err){Notification.error(err)});Promise.all([promise1,promise2]).then(function(){isNew&&$rootScope.$broadcast("emitAtualizaBoletos")}).catch(erro=>{$log.debug("erro.message"),isNew&&$rootScope.$broadcast("emitAtualizaBoletos")}),ctrl.modalBoleto.show()},$ionicModal.fromTemplateUrl("js/custom-components/boleto-detail/boleto-itens-modal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modalBoleto){ctrl.modalBoleto=modalBoleto})}])}(),angular.module("boletoDeckModule").component("boletoDetail",{templateUrl:"js/custom-components/boleto-detail/boleto-detail.component.html",controller:"BoletoDetailComponentController",controllerAs:"ctrl",bindings:{boleto:"="}}),angular.module("minhaTurmaListModule",[]),function(){angular.module("minhaTurmaListModule").controller("MinhaTurmaListController",["$log","Aluno.Minha.Turma","SessionData","Notification","$ionicLoading",function($log,Aluno_Minha_Turma,SessionData,Notification,$ionicLoading){var self=this;$log.debug("[MinhaTurmaListController]:self=",self);var alunos=SessionData.aluno;self.aluno=alunos.list[alunos.selecionado],self.alunos=[],$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),Aluno_Minha_Turma.query({codAluno:encodeURIComponent(self.aluno.codAluno)},function(result){self.alunos=result.content,$log.debug("MinhaTurmaListController.handleSuccess():\tminhaTurma=",self.alunos),$ionicLoading.hide()},function(reason){$log.debug("[MinhaTurmaListController.handleFailure]\treason=",reason);var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";$log.debug("[[MinhaTurmaListController.handleFailure]\treason="+str),Notification.error("[MinhaTurmaListController.handleFailure]\treason="+str),$ionicLoading.show({template:str,duration:2500})})}])}(),angular.module("minhaTurmaListModule").component("minhaTurmaList",{templateUrl:"js/custom-components/minha-turma-list/minha-turma-list.component.html",bindings:{turma:"="},controller:"MinhaTurmaListController",controllerAs:"self"}),angular.module("minhaTurmaModule",[]),function(){angular.module("minhaTurmaModule").controller("MinhaTurmaDetailController",["$scope","$log","Notification","$ionicModal",function($scope,$log,Notification,$ionicModal){var ctrl=this;$log.debug("[MinhaTurmaDetailController]:ctrl=",ctrl),ctrl.fotoAluno=function(aluno){if(aluno&&aluno.fotoAluno){var imgURL=URL.createObjectURL(function(strHexadecimal){var hexString=atob(strHexadecimal),aBuffer=new ArrayBuffer(hexString.length/2),byteBuffer=new Uint8Array(aBuffer);for(let i=0;i<hexString.length;i+=2)byteBuffer[i/2]=parseInt(hexString.slice(i,i+2),16);return new Blob([byteBuffer],{type:"image/png"})}(aluno.fotoAluno));return"background-image: url("+imgURL+")"}return null}(ctrl.aluno),ctrl.obterPrimeiraLetra=function(){return ctrl.aluno.nomeCompleto.substring(0,1)};var colors=["#c4195c","#5c6cc2","#f4521e","#ac47bb","#512da9","#68a039","#906d65","#02887b","#475a63","#5d4339","#77909f","#ed427b","#ff8040","#66a038","#0388d2","#ef6d00","#7d57c3","#80ff00","#0098a7","#3cc472","#5d4138","#ad48bc","#679f38","#8080c0","#e4b31b","#024d42"];ctrl.alunosColors={},angular.forEach($scope.$parent.self.alunos,function(value,key){ctrl.alunosColors[value.id]=colors[Math.floor(Math.random()*colors.length)]})}])}(),angular.module("minhaTurmaModule").component("minhaTurmaDetail",{templateUrl:"js/custom-components/minha-turma-detail/minha-turma-detail.component.html",bindings:{aluno:"="},controller:"MinhaTurmaDetailController",controllerAs:"ctrl"}),angular.module("frequenciaListModule",[]),function(){angular.module("frequenciaListModule").controller("FrequenciaListComponentController",["$scope","$log","Notification","$ionicModal","$http","SessionData","$ionicLoading","Aluno.Frequencia",function($scope,$log,Notification,$ionicModal,$http,SessionData,$ionicLoading,Aluno_Frequencia){var ctrl=this;$log.debug("[FrequenciaListComponentController]:ctrl=",ctrl),ctrl.sessionData=SessionData;var alunos=ctrl.sessionData.aluno;ctrl.aluno=alunos.list[alunos.selecionado],ctrl.getWindowWidth=function(){return window.innerWidth},ctrl.faltas=[],ctrl.faltaTotal=0,ctrl.frequenciaTotal=100,ctrl.aulasPrevistas=0,$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),Aluno_Frequencia.query({codAluno:encodeURIComponent(ctrl.aluno.codAluno),codPessoa:ctrl.aluno.id},function(result){ctrl.faltas=result.content;for(var i=0;i<ctrl.faltas.length;i++)"S"===ctrl.faltas[i].obrigatoria&&(ctrl.faltaTotal+=ctrl.faltas[i].numeroFaltas,ctrl.aulasPrevistas+=ctrl.faltas[i].aulasPrevistas);ctrl.aulasPrevistas>0&&(ctrl.frequenciaTotal=((ctrl.aulasPrevistas-ctrl.faltaTotal)/ctrl.aulasPrevistas*100).toPrecision(4));$log.debug("FrequenciaListComponentController.Aluno_Frequencia.handleSuccess():\tfaltas=",ctrl.faltas),$ionicLoading.hide()},function(reason){$ionicLoading.hide(),$log.debug("[FrequenciaListComponentController.Aluno_Frequencia.handleFailure]\treason=",reason);var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";$log.debug("[FrequenciaListComponentController.Aluno_Frequencia.handleFailure]\treason="+str),Notification.error("[FrequenciaListComponentController.Aluno_Frequencia.handleFailure]\treason="+str)})}])}(),angular.module("frequenciaListModule").component("frequenciaList",{templateUrl:"js/custom-components/frequencia-list/frequencia-list.component.html",controller:"FrequenciaListComponentController",controllerAs:"ctrl"}),angular.module("card",[]).filter("filterWithOr",function($filter){var comparator=function(actual,expected){if(angular.isUndefined(actual))return!1;if(null===actual||null===expected)return actual===expected;if(angular.isObject(expected)&&!angular.isArray(expected)||angular.isObject(actual)&&!hasCustomToString(actual))return!1;if(actual=angular.lowercase(""+actual),angular.isArray(expected)){var match=!1;return expected.forEach(function(e){e=angular.lowercase(""+e),-1!==actual.indexOf(e)&&(match=!0)}),0==expected.length||match}return expected=angular.lowercase(""+expected),-1!==actual.indexOf(expected)};return function(array,expression){return $filter("filter")(array,expression,comparator)}}),angular.module("card").controller("CardComponentController",["$log","$scope","$ionicScrollDelegate","$state","TypeEnum","$timeout","$rootScope","RelatorioService","SessionData","Configs","$ionicLoading","DownloadArquivo",function($log,$scope,$ionicScrollDelegate,$state,TypeEnum,$timeout,$rootScope,RelatorioService,SessionData,Configs,$ionicLoading,DownloadArquivo){let vm=this;vm.arrayFiltroSituacao=[],vm.arraySituacoes=[],vm.stateIs=function(state){return $state.is(state)},vm.checkedItems=function(){var selectedItems=[];return angular.forEach(vm.itens,function(value,index){value.checked&&selectedItems.push(value)}),selectedItems},vm.checkItem=function(item){$rootScope.$broadcast("CardCreditSelectionChanged")},vm.downloadRelatorio=function(item){let params={grupoRelatorio:"FinanceiroNG",relatorio:"CartaChargeback",sistema:"Lyceum",parameterMap:{p_id:item.chargeBack}};RelatorioService.downloadReportServiceEP(params)},vm.getWindowWidth=function(){return window.innerWidth},vm.itemStyle=function(){return vm.cardItemStyle?"item "+vm.cardItemStyle:"item"},vm.getValueOfType=function(item,column){switch(column.type){case TypeEnum.DATE:return null!=item[column.id]&&""!=item[column.id]?moment(item[column.id]).format("DD/MM/YYYY"):"";case TypeEnum.STRING:return item[column.id];case TypeEnum.CURRENCY:return"number"==typeof item[column.id]?function(input=0){return parseFloat(input).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}(item[column.id]):item[column.id];case TypeEnum.CARD:default:return item[column.id]}},$ionicModal.fromTemplateUrl("./views/logged/historico.notas-media-disciplina.modal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){$scope.modal=modal}),$scope.exibeNotasMediaDisciplina=function(disciplinaHistorico){AonlineUtils.showLoading(!0),DisciplinasMatriculadasService.listarNotasHistoricoMatriculaAlunoDisciplina(disciplinaHistorico).then(response=>{AonlineUtils.showLoading(!1),$scope.notasMediaDisciplina=angular.copy(response),$scope.nomeDisciplina=disciplinaHistorico.nomeDisciplina},err=>{$scope.notasMediaDisciplina=[],$scope.nomeDisciplina=disciplinaHistorico.nomeDisciplina,AonlineUtils.showLoading(!1)}),$scope.modal.show()},vm.filtrosSituacao=function(){vm.arrayFiltroSituacao=[],angular.forEach(vm.situacoesSelecionadas,function(value,index){vm.arrayFiltroSituacao.push(value.nomeSituacao)})},vm.obterHistoricoPdf=function(){let _aluno=SessionData.aluno,codAluno=_aluno.list[_aluno.selecionado].codAluno,params={};params.url=Configs.getApiServer()+"/matricula/cod_aluno/"+codAluno+"/exibir_arquivo/false/obtem_historico_simplificado_pdf?situacoes_array="+vm.arrayFiltroSituacao.toString(),params.method="GET",$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),DownloadArquivo.downloadArquivo(params)},vm.inicializarArraySituacoes=function(){0==vm.arraySituacoes.length&&angular.forEach(vm.itens,function(value,index){let jsonObj={codSituacao:vm.arraySituacoes.length+1,nomeSituacao:value.situacao};vm.arraySituacoes.some(situ=>situ.nomeSituacao===value.situacao)||vm.arraySituacoes.push(jsonObj)})},$scope.$watch("vm.itens",function(newItens){null!=newItens&&newItens.length>0&&(console.log("Carregando situações"),vm.inicializarArraySituacoes())})}]),angular.module("card").component("cardComponent",{templateUrl:"js/custom-components/card/card.component.html",bindings:{titleCard:"=",columns:"=",itens:"=",enableCheckbox:"=",cardItemStyle:"=",filterSearch:"=",forceCard:"=",cardHint:"=",hideTitleBar:"=",onSelect:"<",messageNull:"=",insideFilter:"="},controller:"CardComponentController",controllerAs:"vm"}),angular.module("pgtocobrancas",[]),angular.module("pgtocobrancas").controller("PgtoCobrancasComponentController",["$log","$scope","$ionicScrollDelegate","$state","TypeEnum","$timeout","$rootScope","$compile","$sce","CobrancaService","CartaoService","$ionicModal","Configs","$ionicLoading","SessionData","DownloadArquivo","Notification",function($log,$scope,$ionicScrollDelegate,$state,TypeEnum,$timeout,$rootScope,$compile,$sce,CobrancaService,CartaoService,$ionicModal,Configs,$ionicLoading,SessionData,DownloadArquivo,Notification){let vm=this,ctrl=this;vm.stateIs=function(state){return $state.is(state)},vm.checkedItems=function(){var selectedItems=[];return angular.forEach(vm.itens,function(value,index){value.checked&&selectedItems.push(value)}),selectedItems},vm.checkItem=function($event,item){$event.stopPropagation(),$timeout(function(){"INPUT"!==$event.target.tagName&&(item.checked=!item.checked),$rootScope.$broadcast("CardCreditSelection")})},vm.copiarNumeroBoletoV2=function(codigoBoleto,$event){if($event.stopPropagation(),!Clipboard.isSupported())return void Notification.warning("Função não suportada no navegador em uso.");let buton=angular.element(".copy-button-"+codigoBoleto);buton.attr("data-clipboard-text")?$timeout(()=>{buton.click(),Notification.success("Número do Boleto foi copiado!")}):CobrancaService.getDadosImpressaoBoleto(codigoBoleto).then(result=>{buton.attr("data-clipboard-text",result.ipte),new Clipboard(".copy-button-"+codigoBoleto),$timeout(()=>{buton.click(),Notification.success("Número do Boleto foi copiado!")})}).catch(err=>{Notification.error(err)})},vm.downloadBoletoV2=function(codBoleto,codAluno,$event){$event.stopPropagation(),$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),CobrancaService.downloadBoletoCobrancaV2(codBoleto,codAluno)},vm.isArray=function(item){return angular.isArray(item)},vm.getWindowWidth=function(){return window.innerWidth},vm.itemStyle=function(){return vm.cardItemStyle?"item "+vm.cardItemStyle:"item"},vm.getValueOfType=function(item,column){switch(column.type){case TypeEnum.DATE:return null!=item[column.id]&&""!=item[column.id]?moment(item[column.id]).utc().format("DD/MM/YYYY"):"";case TypeEnum.STRING:return item[column.id];case TypeEnum.CURRENCY:return"number"==typeof item[column.id]?function(input=0){return parseFloat(input).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}(item[column.id]):item[column.id];case TypeEnum.CARD:default:return item[column.id]}},vm.estaVencida=function(item){return!!item.data_de_vencimento&&moment(new Date).utc().startOf("Day").isAfter(moment(item.prox_dia_util).utc().startOf("Day"))},vm.getValue=function(item,columnId,type){let t=null;"TypeEnum.DATE"==type?t=TypeEnum.DATE:"TypeEnum.STRING"==type?t=TypeEnum.STRING:"TypeEnum.CURRENCY"==type?t=TypeEnum.CURRENCY:"TypeEnum.CARD"==type&&(t=TypeEnum.CARD);let column={id:columnId,type:t};return vm.getValueOfType(item,column)},$ionicModal.fromTemplateUrl("./js/custom-components/cobranca-list/modal-cobranca-detalhe.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){$scope.modal=modal}),vm.detalharCobranca=function(cobranca,$event){$scope.codCobranca=cobranca,$event.stopPropagation(),CobrancaService.listarItensCobranca(cobranca).then(function(result){$scope.pedidoPagamento={},$scope.lancamentos=result.itensLancamento,$scope.pagamentos=result.itensPagamento,$scope.pedidoPagamento.pedido=result.pedidoPgto,$scope.pedidoPagamento.cartoes=result.pedidoPgtoCartoes,$scope.isPagCartao=!1,result.itensPagamento.tipoPagamento&&("CARTAO"!=result.itensPagamento.tipoPagamento.toUpperCase()&&"CARTÃO"!=result.itensPagamento.tipoPagamento.toUpperCase()||($scope.isPagCartao=!0)),$scope.modal.show()}).catch(function(err){$ionicLoading.hide()})},vm.downloadConsultaPagamento=function(){let numPedido=$scope.pedidoPagamento.pedido[0].idPedidoPgto;CartaoService.downloadConsultaPagamento(encodeURI(SessionData.aluno.list[0].codAluno),numPedido)},ctrl.downloadBoleto=function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),CobrancaService.downloadBoletoCobranca(ctrl.boleto.itensBoleto.codigoBoleto)},$ionicModal.fromTemplateUrl("js/custom-components/boleto-detail/boleto-itens-modal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modalBoleto){vm.modalBoleto=modalBoleto,$scope.ctrl=ctrl}),ctrl.closeBoletoDetail=function(){$log.debug("[BoletoDetailComponentController.closeBoletoDetail()]:boleto=",ctrl.boleto),vm.modalBoleto.hide()},ctrl.copiarNumeroBoleto=function(){Clipboard.isSupported()?(ctrl.clipboard=new Clipboard("#copy-button"),Notification.success("Número do Boleto foi copiado!")):Notification.warning("Função não suportada no navegador em uso.")},ctrl.prorrogarVencimentoBoleto=function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),CobrancaService.prorrogarVencimentoBoleto(ctrl.boleto.codigoBoleto).then(function(result){result.valor?ctrl.continuarAberturaCobranca(result.valor,novoBoleto=!0):ctrl.continuarAberturaCobranca(ctrl.boleto.codigoBoleto,novoBoleto=!1)}).catch(function(err){$ionicLoading.hide()})},vm.openBoletoDetail=function(boleto,$event){$event.stopPropagation(),ctrl.boleto={codigoBoleto:boleto},CobrancaService.getExibeProrrogaBoleto(boleto).then(function(result){result.valor?ctrl.prorrogarVencimentoBoleto():ctrl.continuarAberturaCobranca(ctrl.boleto.codigoBoleto,novoBoleto=!1)}).catch(function(err){Notification.error(err)})},ctrl.continuarAberturaCobranca=function(boleto,isNew){let promises=[];promises.push(CobrancaService.listarItensDetalheBoleto(boleto).then(function(result){ctrl.boleto.itensBoleto=result,ctrl.boleto.itensBoleto.codigoBoleto=boleto}).catch(function(err){Notification.error(err)})),promises.push(CobrancaService.getDadosImpressaoBoleto(boleto).then(function(result){ctrl.boleto.codigoBarras=result.ipte}).catch(function(err){Notification.error(err)})),Promise.all(promises).then(function(){$ionicLoading.hide(),isNew&&$scope.$emit("broadAtualizarCobrancas")}).catch(erro=>{$log.debug("erro.message"),$ionicLoading.hide(),isNew&&$rootScope.$broadcast("emitAtualizaBoletos")}),vm.modalBoleto.show()}}]),angular.module("pgtocobrancas").component("pagtocobrancasComponent",{templateUrl:"js/custom-components/pgtocobrancas/pgtocobrancas.component.html",bindings:{titleCard:"=",columns:"=",itens:"=",enableCheckbox:"=",cardItemStyle:"=",filterSearch:"=",forceCard:"=",cardHint:"=",hideTitleBar:"=",onSelect:"<",messageNull:"=",insideFilter:"="},controller:"PgtoCobrancasComponentController",controllerAs:"vm"}),angular.module("pgtocartaocobrancas",[]),angular.module("pgtocartaocobrancas").controller("PgtoCartaoCobrancasComponentController",["$log","$scope","$ionicScrollDelegate","$state","TypeEnum","$timeout","$rootScope","$compile","$sce","CobrancaService","CartaoService","$ionicModal","Configs","$ionicLoading","SessionData","DownloadArquivo","Notification",function($log,$scope,$ionicScrollDelegate,$state,TypeEnum,$timeout,$rootScope,$compile,$sce,CobrancaService,CartaoService,$ionicModal,Configs,$ionicLoading,SessionData,DownloadArquivo,Notification){let vm=this,ctrl=this;vm.stateIs=function(state){return $state.is(state)},vm.checkedItems=function(){var selectedItems=[];return angular.forEach(vm.itens,function(value,index){value.checked&&selectedItems.push(value)}),selectedItems},vm.checkItem=function($event,item){$event.stopPropagation(),$timeout(function(){"INPUT"!==$event.target.tagName&&(item.checked=!item.checked),$rootScope.$broadcast("CardCreditSelection2")})},vm.isArray=function(item){return angular.isArray(item)},vm.getWindowWidth=function(){return window.innerWidth},vm.itemStyle=function(){return vm.cardItemStyle?"item "+vm.cardItemStyle:"item"},vm.getValueOfType=function(item,column){switch(column.type){case TypeEnum.DATE:return null!=item[column.id]&&""!=item[column.id]?moment(item[column.id]).format("DD/MM/YYYY"):"";case TypeEnum.STRING:return item[column.id];case TypeEnum.CURRENCY:return"number"==typeof item[column.id]?function(input=0){return parseFloat(input).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}(item[column.id]):item[column.id];case TypeEnum.CARD:default:return item[column.id]}},vm.getValue=function(item,columnId,type){let t=null;"TypeEnum.DATE"==type?t=TypeEnum.DATE:"TypeEnum.STRING"==type?t=TypeEnum.STRING:"TypeEnum.CURRENCY"==type?t=TypeEnum.CURRENCY:"TypeEnum.CARD"==type&&(t=TypeEnum.CARD);let column={id:columnId,type:t};return vm.getValueOfType(item,column)},$ionicModal.fromTemplateUrl("./js/custom-components/cobranca-list/modal-cobranca-detalhe.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){$scope.modal=modal}),vm.detalharCobranca=function(cobranca,$event){$scope.codCobranca=cobranca,$event.stopPropagation(),CobrancaService.listarItensCobranca(cobranca).then(function(result){$scope.pedidoPagamento={},$scope.lancamentos=result.itensLancamento,$scope.pagamentos=result.itensPagamento,$scope.pedidoPagamento.pedido=result.pedidoPgto,$scope.pedidoPagamento.cartoes=result.pedidoPgtoCartoes,$scope.isPagCartao=!1,result.itensPagamento.tipoPagamento&&("CARTAO"!=result.itensPagamento.tipoPagamento.toUpperCase()&&"CARTÃO"!=result.itensPagamento.tipoPagamento.toUpperCase()||($scope.isPagCartao=!0)),$scope.modal.show()}).catch(function(err){$ionicLoading.hide()})},vm.downloadConsultaPagamento=function(){let numPedido=$scope.pedidoPagamento.pedido[0].idPedidoPgto;CartaoService.downloadConsultaPagamento(encodeURI(SessionData.aluno.list[0].codAluno),numPedido)},ctrl.downloadBoleto=function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1});let params={};params.url=Configs.getApiServer()+"/financeiro/cod_aluno/"+encodeURI(SessionData.aluno.list[0].codAluno)+"/cod_boleto/"+ctrl.boleto.codigoBoleto+"/exibir_arquivo/false/download_boleto",params.type="application/pdf",params.nomeArquivo="Boleto_"+ctrl.boleto.codigoBoleto+"_"+(new Date).getTime(),params.method="GET",DownloadArquivo.downloadArquivo(params)},$ionicModal.fromTemplateUrl("js/custom-components/boleto-detail/boleto-itens-modal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modalBoleto){vm.modalBoleto=modalBoleto,$scope.ctrl=ctrl}),ctrl.closeBoletoDetail=function(){$log.debug("[BoletoDetailComponentController.closeBoletoDetail()]:boleto=",ctrl.boleto),vm.modalBoleto.hide()},ctrl.copiarNumeroBoleto=function(){Clipboard.isSupported()?(ctrl.clipboard=new Clipboard("#copy-button"),Notification.success("Número do Boleto foi copiado!")):Notification.warning("Função não suportada no navegador em uso.")},vm.openBoletoDetail=function(boleto,$event){$event.stopPropagation(),$log.debug("[BoletoDetailComponentController.openBoletoDetail()]:boleto=",boleto),ctrl.boleto={codigoBoleto:boleto},CobrancaService.listarItensDetalheBoleto(boleto).then(function(result){ctrl.boleto.itensBoleto=result,ctrl.boleto.itensBoleto.codigoBoleto=ctrl.boleto.codigoBoleto}).catch(function(err){Notification.error(err)}),CobrancaService.getDadosImpressaoBoleto(ctrl.boleto.codigoBoleto).then(function(result){ctrl.boleto.codigoBarras=result.ipte}).catch(function(err){Notification.error(err)}),vm.modalBoleto.show()}}]),angular.module("pgtocartaocobrancas").component("pagtocartaocobrancasComponent",{templateUrl:"js/custom-components/pgto-cartao-cobranca/pgtocartaocobrancas.component.html",bindings:{titleCard:"=",columns:"=",itens:"=",enableCheckbox:"=",cardItemStyle:"=",filterSearch:"=",forceCard:"=",cardHint:"=",hideTitleBar:"=",onSelect:"<",messageNull:"=",insideFilter:"="},controller:"PgtoCartaoCobrancasComponentController",controllerAs:"vm"}),angular.module("wizard",[]),angular.module("wizard").controller("WizardComponentController",["$log","$scope","Storage","AonlineUtils","$ionicScrollDelegate","$state","$timeout","$ionicModal","MatriculaService","SessionData",function($log,$scope,Storage,AonlineUtils,$ionicScrollDelegate,$state,$timeout,$ionicModal,MatriculaService,SessionData){let vm=this;vm.currentStep=0,vm.maxSteps=vm.steps.length-1;let alunoSelecionado=SessionData.aluno.list[SessionData.aluno.selecionado];function adjustScroll(){let scrollInstance=$ionicScrollDelegate._instances.filter(function(inst){if("wizardScrollContent"==inst.$element[0].id)return inst});scrollInstance.length>0&&(scrollInstance[0].resize(),scrollInstance[0].scrollTop())}$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){var step=vm.steps.find(function(value){return value.state==toState.name});vm.currentStep=step?vm.steps.indexOf(step):0}),vm.onButtonCancelClick=function(){if(vm.cancelButton.onClick)try{vm.cancelButton.onClick().then(function(){vm.currentStep--,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state),adjustScroll()})}catch(e){}else vm.currentStep--,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state),adjustScroll()},$ionicModal.fromTemplateUrl("views/logged/matricula/modal.confirmacao.matricula.html",{scope:$scope,animation:"slide-in-up",hardwareBackButtonClose:!1,backdropClickToClose:!1}).then(function(modalConfirmacao){vm.modalConfirmacao=modalConfirmacao}),$ionicModal.fromTemplateUrl("views/logged/matricula/modal.confirmacao.autorizacao.html",{scope:$scope,animation:"slide-in-up",hardwareBackButtonClose:!1,backdropClickToClose:!1}).then(function(modalAutorizacao){vm.modalAutorizacao=modalAutorizacao}),vm.confirmarAutorizacoesMatricula=function(){let autorizacaoMatriculaDTO=JSON.parse(Storage.get("listaAutMatricula"));AonlineUtils.showLoading(!0),MatriculaService.confirmarAutorizacao(autorizacaoMatriculaDTO).then(result=>{Storage.set("realizouConfirmacaoDeAutorizacao",!1),AonlineUtils.showLoading(!1),vm.currentStep==vm.steps.length-1?(Storage.set("realizouConfirmacaoDeAutorizacao",!0),$state.reload()):(vm.currentStep++,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state),adjustScroll()),vm.modalAutorizacao.hide()},err=>{AonlineUtils.showLoading(!1)})},vm.cancelarAutorizacao=function(){vm.modalAutorizacao.hide()},vm.modalConfirmacaoShow=function(){vm.modalConfirmacao?vm.modalConfirmacao.show():$ionicModal.fromTemplateUrl("views/logged/matricula/modal.confirmacao.matricula.html",{scope:$scope,animation:"slide-in-up",hardwareBackButtonClose:!1,backdropClickToClose:!1}).then(function(modalConfirmacao){vm.modalConfirmacao=modalConfirmacao,vm.modalConfirmacao.show()})},vm.confirmarMatricula=function(){let params={codAluno:alunoSelecionado.codAluno,disciplinasList:JSON.parse(Storage.get("disciplinasMatriculadas"))};AonlineUtils.showLoading(!0),MatriculaService.confirmarMatricula(params).then(result=>{vm.modalConfirmacao=null,Storage.set("disciplinasMatriculadas",null),AonlineUtils.showLoading(!1),vm.currentStep++,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state),adjustScroll()},err=>{AonlineUtils.showLoading(!1)})},vm.cancelarConfirmacao=function(){vm.modalConfirmacao.hide()},vm.onButtonNextClick=async function(){vm.nextButton.onClick?vm.nextButton.onClick().then(function(){"home.matricula.disciplinas"!=vm.steps[vm.currentStep].state?"home.matricula.autorizacao"!=vm.steps[vm.currentStep].state?(vm.currentStep++,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state),adjustScroll()):vm.modalAutorizacao.show():vm.modalConfirmacaoShow()}):(vm.currentStep++,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state),adjustScroll())},vm.onButtonFinalClick=function(){vm.finalButton.onClick?vm.finalButton.onClick().then(function(){"home.matricula.autorizacao"!=vm.steps[vm.currentStep].state?(vm.currentStep=0,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state)):vm.modalAutorizacao.show()}):(vm.currentStep=0,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state))},vm.onButtonPaymentClick=function(){vm.paymentButton.onClick?vm.paymentButton.onClick().then(function(){vm.currentStep=0,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state)}):(vm.currentStep=0,vm.additionalButton={},$state.go(vm.steps[vm.currentStep].state))},vm.steps[vm.currentStep]&&$state.go(vm.steps[vm.currentStep].state),vm.contentStyle=function(){let style=vm.style;return vm.fixButton&&(style+=" margin-bottom: 60px; "),style},vm.parentScope=$scope.$parent,vm.parentScope.adjustWizardScroll=adjustScroll}]),angular.module("wizard").component("wizardComponent",{templateUrl:"js/custom-components/wizard/wizard.component.html",bindings:{pageDescription:"=",steps:"=",scrolling:"=",fixButton:"=",cancelButton:"=",nextButton:"=",finalButton:"=",hasHeader:"=",additionalButton:"<",style:"<"},controller:"WizardComponentController",controllerAs:"vm"}),angular.module("wizard").controller("WizardButtonComponentController",["$log","$scope","$rootScope",function($log,$scope,$rootScope){let vm=this;vm.buttonsClass=function(){return vm.getWindowWidth()>=460?vm.fixButton?"wizard-buttons-all-fixed":"container-fluid":vm.fixButton?"wizard-buttons-phone-fixed":"container-fluid"},vm.cancelClass=function(){return"button "+vm.cancelButton.style+" button-break-line w-28"},vm.nextClass=function(firstStep){return vm.cancelButton&&vm.cancelButton.enabled&&!firstStep?"button "+vm.nextButton.style+" button-break-line w-62 ":"button "+vm.nextButton.style+" button-break-line w-90"},vm.finalClass=function(){return vm.cancelButton&&vm.cancelButton.enabled?"button "+vm.finalButton.style+" button-break-line w-62":"button "+vm.finalButton.style+" button-break-line w-90 "},$scope.onPaymentClick=function(){$rootScope.$broadcast("onPaymentClickBroadcast")},$scope.onPixPaymentClick=function(){$rootScope.$broadcast("onPixPaymentClickBroadcast")},vm.getWindowWidth=function(){return window.innerWidth}}]),angular.module("wizard").component("wizardButton",{templateUrl:"js/custom-components/wizard/buttons/wizardButton.component.html",bindings:{step:"=",maxSteps:"=",cancelButton:"=",nextButton:"=",finalButton:"=",paymentButton:"=",additionalButton:"=",fixButton:"=",onCancelClick:"<",onNextClick:"<",onFinalClick:"<",onPaymentClick:"<"},controller:"WizardButtonComponentController",controllerAs:"vm"}),angular.module("info",[]),angular.module("info",[]).component("infoComponent",{templateUrl:"js/custom-components/info/info.component.html",bindings:{message:"<"},controllerAs:"vm"}),angular.module("tarefa",[]),function(){angular.module("tarefa").controller("TarefaListComponentController",["$log","SessionData","Aluno.Tarefas","$ionicLoading",function($log,SessionData,Aluno_Tarefas,$ionicLoading){var ctrl=this;$log.debug("[TarefaListComponentController]\tctrl=",ctrl),ctrl.sessionData=SessionData,ctrl.aluno=ctrl.sessionData.aluno,ctrl.agenda=ctrl.sessionData.agenda,ctrl.alunoSelecionado=ctrl.aluno.list[ctrl.aluno.selecionado],$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),Aluno_Tarefas.query({idAluno:encodeURIComponent(ctrl.alunoSelecionado.codAluno)},function(result){ctrl.tarefas=result,$log.debug("[AlunoTarefas_handleSuccess]\tresult=",result),$ionicLoading.hide()},function(reason){$log.debug("[AlunoTarefas_handleFailure]\treason=",reason),Notification.error("[AlunoTarefas_handleFailure]\treason="+reason),$ionicLoading.show({template:str,duration:2500})}),ctrl.tarefas&&ctrl.tarefas.result&&ctrl.tarefas.result.content&&(ctrl.tarefaList=ctrl.tarefas.result.content)}])}(),angular.module("tarefa").component("tarefaList",{templateUrl:"js/custom-components/tarefa-list/tarefa-list.component.html",bindings:{tarefas:"="},controller:"TarefaListComponentController",controllerAs:"ctrl"}),function(){angular.module("tarefa").controller("TarefaListItemComponentController",["$log","$scope","Configs","DownloadArquivo","$ionicLoading",function($log,$scope,Configs,DownloadArquivo,$ionicLoading){this.downloadAnexoTarefa=function(idTarefa){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1});let params={};params.url=Configs.getApiServer()+"/pessoas/tarefa/anexo/"+idTarefa+"/baixar_anexo_tarefa",params.method="GET",DownloadArquivo.downloadArquivo(params)}}])}(),angular.module("tarefa").component("tarefaListItem",{templateUrl:"js/custom-components/tarefa-list-item/tarefa-list-item.component.html",bindings:{tarefa:"="},controller:"TarefaListItemComponentController",controllerAs:"ctrl"}),angular.module("cobrancaListModule",[]),function(){angular.module("cobrancaListModule").controller("CobrancaListComponentController",["$scope","$log","Notification","$ionicModal","$http","SessionData","$ionicLoading","Financeiro.Cobranca","CobrancaService",function($scope,$log,Notification,$ionicModal,$http,SessionData,$ionicLoading,Financeiro_Cobranca,Cobranca_Service){var ctrl=this;function showLoading(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0})}$log.debug("[CobrancaListComponentController]:ctrl=",ctrl),showLoading(),ctrl.sessionData=SessionData;var alunos=ctrl.sessionData.aluno;ctrl.aluno=alunos.list[alunos.selecionado],ctrl.getWindowWidth=function(){return window.innerWidth},ctrl.cobrancas=[],ctrl.itensCobrancaDetalhe=[],Financeiro_Cobranca.query({codAluno:encodeURIComponent(ctrl.aluno.codAluno),codPessoa:ctrl.sessionData.user.id},function(result){ctrl.cobrancas=result.content,$log.debug("CobrancaListComponentController.Aluno_Cobranca.handleSuccess():\tcobrancas=",ctrl.cobrancas),$ionicLoading.hide()},function(reason){$ionicLoading.hide(),$log.debug("[CobrancaListComponentController.Aluno_Cobranca.handleFailure]\treason=",reason);var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";$log.debug("[CobrancaListComponentController.Aluno_Cobranca.handleFailure]\treason="+str),Notification.error("[CobrancaListComponentController.Aluno_Cobranca.handleFailure]\treason="+str)}),$ionicModal.fromTemplateUrl("./js/custom-components/cobranca-list/modal-cobranca-detalhe.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){$scope.modal=modal}),$scope.detalharCobranca=function(cobranca){showLoading(),ctrl.cobranca=angular.copy(cobranca),Cobranca_Service.listarItensCobranca(cobranca.codigoCobranca).then(function(result){$ionicLoading.hide(),ctrl.itensCobrancaDetalhe=result,$scope.lancamentos=ctrl.itensCobrancaDetalhe.itensLancamento,$scope.pagamentos=ctrl.itensCobrancaDetalhe.itensPagamento,$scope.modal.show()}).catch(function(err){$ionicLoading.hide()})}}])}(),angular.module("cobrancaListModule").component("cobrancaList",{templateUrl:"js/custom-components/cobranca-list/cobranca-list.component.html",controller:"CobrancaListComponentController",controllerAs:"ctrl",bindings:{}}),angular.module("acordoCadastro",[]),angular.module("acordoCadastro").controller("AcordoCadastroController",["$scope","$http","$rootScope","$state","$timeout","$translate","Notification","$ionicHistory","$ionicModal","SessionData","AcordoService","$log","$ionicLoading","$q","$ionicScrollDelegate","Configs","AcordoFactory","Storage",function($scope,$http,$rootScope,$state,$timeout,$translate,Notification,$ionicHistory,$ionicModal,SessionData,AcordoService,$log,$ionicLoading,$q,$ionicScrollDelegate,Configs,AcordoFactory,Storage){var acordoCadCtrl=this;acordoCadCtrl.id="AcordoCadastroController",$scope.id=acordoCadCtrl.id,acordoCadCtrl.exibirMsg=!1,acordoCadCtrl.sessionData=SessionData,acordoCadCtrl.aluno=acordoCadCtrl.sessionData.aluno,acordoCadCtrl.user=acordoCadCtrl.sessionData.user,acordoCadCtrl.responsavel="responsavel"===SessionData.perfil,acordoCadCtrl.realizarAcordo=!1,acordoCadCtrl.scrolling=!1,acordoCadCtrl.cobrancasObrigatorias=[],acordoCadCtrl.cobrancasOpcionais=[],acordoCadCtrl.acordo={codAluno:acordoCadCtrl.aluno.list[acordoCadCtrl.aluno.selecionado].codAluno,codPessoa:acordoCadCtrl.user.id,usuario:acordoCadCtrl.user.name,listaDeCobrancaEmAberto:[]},acordoCadCtrl.getWindowWidth=function(){return window.innerWidth},acordoCadCtrl.totalCobrancas=0,acordoCadCtrl.parcelasChecadas=function(parcelamento){acordoCadCtrl.acordo.planoDePagamentoSelecionado={codPlanoPagamento:parcelamento.codPlanoPagamento,honorarioDeTerceiro:parcelamento.parcelasSimuladas[0].honorariosDeTerceiros,valorParcelaBase:parcelamento.valorParcelaBase,percentualEntrada:parcelamento.percentualEntrada,valorDesconto:parcelamento.parcelasSimuladas[0].descontoCalculado,aplicaEncargos:parcelamento.aplicaEncargos,qtdParcelas:parcelamento.qtdParcelas,valorEntrada:parcelamento.valorEntrada,listaDeParcelas:parcelamento.parcelasSimuladas,permiteCartao:parcelamento.permiteCartao,permiteBoleto:parcelamento.permiteBoleto,recorrencia:parcelamento.recorrencia,descricao:parcelamento.descricao,tipoPagamento:parcelamento.tipoPagamento},acordoCadCtrl.acordo.valoresDoAcordo={valorSelecionado:parcelamento.parcelasSimuladas[0].valorOriginal,encargoCalculado:parcelamento.parcelasSimuladas[0].encargoCalculado,encargoBolsaCalculado:parcelamento.parcelasSimuladas[0].encargoBolsa,encargoProgressivoCalculado:parcelamento.parcelasSimuladas[0].totalEncargosProgressivosPlano,totalEncargo:parcelamento.parcelasSimuladas[0].totalEncargo,valorFinalAcordo:parcelamento.parcelasSimuladas[0].valorFinal},$ionicScrollDelegate.resize(),$timeout(function(){$ionicScrollDelegate.scrollBy(0,$("#listaParcelasGeradas")[0].offsetTop,!0)},250)},acordoCadCtrl.podeRealizarAcordo=!1,acordoCadCtrl.scrolling=!0,acordoCadCtrl.title="Home.view.Acordo",acordoCadCtrl.msgConfirmacao="Acordo.Mensagem.Confirmacao",$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),acordoCadCtrl.steps=[{id:0,view:"cobrancas",state:"home.acordo.cadastro.cobrancas"},{id:1,view:"parcelamentos",state:"home.acordo.cadastro.parcelamentos"},{id:2,view:"confirmacao",state:"home.acordo.cadastro.confirmacao"}],$scope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){"/acordos"==toState.url&&$state.go(acordoCadCtrl.steps[0].state)}),acordoCadCtrl.clear=function(){acordoCadCtrl.cancelButton={},acordoCadCtrl.finalButton={},acordoCadCtrl.nextButton={},acordoCadCtrl.pagamentoButton=!1},AcordoService.dadosListaCobrancasAcordo().then(function(result){acordoCadCtrl.msgErro=result.msgErro,acordoCadCtrl.podeRealizarAcordo=result.podeRealizarAcordo,acordoCadCtrl.msgErro&&Notification.error(acordoCadCtrl.msgErro),result.opcoesAcordo&&(acordoCadCtrl.acordo.opcoesDoAcordo=result.opcoesAcordo,AcordoFactory.opcoesDoAcordo=result.opcoesAcordo,acordoCadCtrl.text=acordoCadCtrl.acordo.opcoesDoAcordo.usaPreAcordo?$translate.instant("Aluno.PreAcordo.SubTitle"):$translate.instant("Aluno.Acordo.SubTitle"),acordoCadCtrl.acordo.opcoesDoAcordo.usaPreAcordo&&(acordoCadCtrl.title="Aluno.PreAcordo.Title",acordoCadCtrl.msgConfirmacao="Pre.Acordo.Mensagem.Confirmacao")),result.cobrancasObrigatorias&&result.cobrancasObrigatorias.length>0&&(acordoCadCtrl.cobrancasObrigatorias=result.cobrancasObrigatorias),result.cobrancasOpcionais&&result.cobrancasOpcionais.length>0&&(acordoCadCtrl.cobrancasOpcionais=result.cobrancasOpcionais),0==acordoCadCtrl.cobrancasOpcionais.length&&0==acordoCadCtrl.cobrancasObrigatorias.length?(acordoCadCtrl.clear(),acordoCadCtrl.exibirMsg=!0,$ionicLoading.hide()):$ionicLoading.hide(),result.podeRealizarAcordo||(acordoCadCtrl.clear(),$ionicLoading.hide())});var selecionarParcelas={caption:"Aluno.Acordo.Wizard.Prosseguir",style:"button-green btn-padrao-redondo",enabled:!0,onClick:function(){$ionicLoading.show();let defer=$q.defer();return acordoCadCtrl.totalCobrancas=0,acordoCadCtrl.acordo.listaDeCobrancaEmAberto=acordoCadCtrl.cobrancasObrigatorias,acordoCadCtrl.cobrancasOpcionais.length>0&&acordoCadCtrl.cobrancasOpcionais.forEach(function(cobrancaOpcional){cobrancaOpcional.check&&acordoCadCtrl.acordo.listaDeCobrancaEmAberto.push(cobrancaOpcional)}),acordoCadCtrl.qtdCobranca=acordoCadCtrl.acordo.listaDeCobrancaEmAberto.length,acordoCadCtrl.qtdCobranca>0?(acordoCadCtrl.acordo.listaDeCobrancaEmAberto.forEach(function(cobranca){acordoCadCtrl.totalCobrancas+=cobranca.valorDiferenca}),AcordoService.listaPlanosDePagamentoAcordo(acordoCadCtrl.acordo).then(function(parcelamentos){acordoCadCtrl.parcelamentos=parcelamentos,acordoCadCtrl.nextButton=confirmarAcordo,$ionicLoading.hide(),defer.resolve(),acordoCadCtrl.cancelButton={caption:"Aluno.Acordo.Wizard.Cancelar",style:"button-red btn-padrao-redondo",enabled:!0,onClick:function(){let defer=$q.defer();return acordoCadCtrl.openCancelar(),defer.reject(),defer.promise}}})):($ionicLoading.hide(),Notification.error($translate.instant("Acordo.Erro.Msg.Cobrancao.Selecionadas")),defer.reject()),defer.promise}},confirmarAcordo={caption:"Aluno.Acordo.Wizard.Prosseguir",style:"button-green",enabled:!0,onClick:function(){$ionicLoading.show();let defer=$q.defer();return acordoCadCtrl.acordo.planoDePagamentoSelecionado?AcordoService.dadoParaConfirmacao(acordoCadCtrl.acordo).then(function(result){acordoCadCtrl.acordo=Object.assign({},acordoCadCtrl.acordo,result),gravarAcordo.caption=$translate.instant("Acordo.Confirmar.Btn")+acordoCadCtrl.text,acordoCadCtrl.finalButton=acordoCadCtrl.acordo.opcoesDoAcordo.existeDocumentoAcordo?verContrato:gravarAcordo,acordoCadCtrl.gravarAcordo=gravarAcordo.onClick,$ionicScrollDelegate.resize(),$ionicLoading.hide(),defer.resolve()}).catch(function(err){$ionicLoading.hide(),defer.resolve("")}):($ionicLoading.hide(),Notification.error($translate.instant("Acordo.Erro.Msg.Parcelamento.Selecionado")),defer.reject()),defer.promise}},gravarAcordo={style:"button-green",enabled:!0,caption:"Aluno.Acordo.Wizard.Prosseguir",onClick:function(){$ionicLoading.show();let defer=$q.defer();return $scope.$parent.acordoCtrl.opcoesAcordo&&!$scope.$parent.acordoCtrl.opcoesAcordo.usaPreAcordo&&acordoCadCtrl.acordo.opcoesDoAcordo.existeDocumentoAcordo?(acordoCadCtrl.closeConfirmacao(),AcordoService.salvarAceite(acordoCadCtrl.acordo).then(function(result){acordoCadCtrl.hash=result.hash,acordoCadCtrl.acordo.numAcordo=result.acordoGerado,acordoCadCtrl.contratoAssinado=result.HTML,$ionicLoading.hide()}).catch(function(err){$log.error("err",err.data),Notification.error(err.titulo),$ionicLoading.hide(),defer.reject()})):AcordoService.salvarAceitoSemContrato(acordoCadCtrl.acordo).then(function(result){acordoCadCtrl.detalhes(result.acordoGerado),$ionicLoading.hide()}).catch(function(err){$log.error("err",err.data),Notification.error(err.titulo),$ionicLoading.hide(),defer.reject()}),acordoCadCtrl.pagamentoButton=!0,defer.promise}};acordoCadCtrl.detalhes=function(codigo){acordoCadCtrl.closeContrato(),$state.go("home.acordo.consulta",{codAcordo:codigo})};var verContrato={caption:"Aluno.Acordo.Wizard.Prosseguir",style:"button-green btn-padrao-redondo",enabled:!0,onClick:function(){$ionicLoading.show();let defer=$q.defer();return acordoCadCtrl.acordoOnLineDados={acordoOnLine:acordoCadCtrl.acordo,opcoesAcordo:acordoCadCtrl.acordo.opcoesDoAcordo},$scope.$parent.acordoCtrl.opcoesAcordo&&$scope.$parent.acordoCtrl.opcoesAcordo.usaPreAcordo?($ionicLoading.hide(),acordoCadCtrl.openConfirmacao()):AcordoService.getHtmlDoAcordo(acordoCadCtrl.acordoOnLineDados).then(function(result){Storage.set("contratoPDF",result.acordoPDF),acordoCadCtrl.contratoAssinado=result.HTML,acordoCadCtrl.openContrato(),$ionicLoading.hide()}).catch(function(err){Notification.error(err.titulo),defer.reject(),$ionicLoading.hide()}),defer.promise}};acordoCadCtrl.openCobrancas=function(){acordoCadCtrl.modalCobrancas.show()},acordoCadCtrl.closeCobrancas=function(){acordoCadCtrl.modalCobrancas.hide()},$ionicModal.fromTemplateUrl("js/custom-components/acordo-cadastro/detail/acordo.cadastro.modal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){acordoCadCtrl.modalCobrancas=modal}),acordoCadCtrl.openContrato=function(){acordoCadCtrl.modalContrato.show(),acordoCadCtrl.isContrato=!0},acordoCadCtrl.closeContrato=function(){acordoCadCtrl.modalContrato.hide()},acordoCadCtrl.naoAceitar=function(){acordoCadCtrl.closeContrato(),acordoCadCtrl.openCancelar()},$ionicModal.fromTemplateUrl("js/custom-components/acordo-cadastro/detail/acordo.cadastro.contrato.modal.html",{scope:$scope,animation:"slide-in-up",backdropClickToClose:!1}).then(function(modal){acordoCadCtrl.modalContrato=modal}),acordoCadCtrl.openCancelar=function(){acordoCadCtrl.modalCancelar.show()},acordoCadCtrl.closeCancelar=function(){acordoCadCtrl.modalCancelar.hide()},$ionicModal.fromTemplateUrl("js/custom-components/acordo-cadastro/detail/acordo.cadastro.cancelamento.modal.html",{scope:$scope,animation:"slide-in-up",backdropClickToClose:!1}).then(function(modal){acordoCadCtrl.modalCancelar=modal}),acordoCadCtrl.continuar=function(isContrato){acordoCadCtrl.closeCancelar(),acordoCadCtrl.isContrato&&(acordoCadCtrl.isContrato=!1,acordoCadCtrl.openContrato())},acordoCadCtrl.cancelarConfirmacao=function(){acordoCadCtrl.closeConfirmacao()},acordoCadCtrl.cancelar=function(){acordoCadCtrl.closeCancelar(),acordoCadCtrl.closeContrato(),acordoCadCtrl.closeConfirmacao(),$state.go("home.acordo",{isContrato:acordoCadCtrl.isContrato})},acordoCadCtrl.openConfirmacao=function(){acordoCadCtrl.modalConfirmacao.show()},acordoCadCtrl.closeConfirmacao=function(){acordoCadCtrl.modalConfirmacao.hide()},$ionicModal.fromTemplateUrl("js/custom-components/acordo-cadastro/detail/acordo.cadastro.confirmacao.modal.html",{scope:$scope,animation:"slide-in-up",backdropClickToClose:!1}).then(function(modal){acordoCadCtrl.modalConfirmacao=modal}),acordoCadCtrl.nextButton=selecionarParcelas,acordoCadCtrl.finalButton=gravarAcordo,acordoCadCtrl.imprimirContrato=function(){AcordoService.imprimirContrato(acordoCadCtrl.acordoOnLineDados)},acordoCadCtrl.imprimirContratoAceito=function(){AcordoService.imprimirContratoConsulta(acordoCadCtrl.acordo.numAcordo)},$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){acordoCadCtrl.modalConfirmacao&&acordoCadCtrl.modalConfirmacao.hide(),acordoCadCtrl.modalCobrancas&&acordoCadCtrl.modalCobrancas.hide(),acordoCadCtrl.modalContrato&&acordoCadCtrl.modalContrato.hide(),acordoCadCtrl.modalCancelar&&acordoCadCtrl.modalCancelar.hide()})}]),angular.module("acordoConsulta",[]),angular.module("acordoConsulta").controller("AcordoConsultaController",["$scope","$rootScope","$state","$timeout","$translate","Notification","$ionicHistory","PagamentoCartaoFactory","$ionicModal","CartaoService","$log","SessionData","AcordoService","$ionicLoading","$stateParams","AcordoFactory","Configs","DownloadArquivo","FileSaver",function($scope,$rootScope,$state,$timeout,$translate,Notification,$ionicHistory,PagamentoCartaoFactory,$ionicModal,CartaoService,$log,SessionData,AcordoService,$ionicLoading,$stateParams,AcordoFactory,Configs,DownloadArquivo,FileSaver){var acordoConCtrl=this;function showLoading(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0})}async function obterDadosPagamento(parcela){return await AcordoService.obterDadosPagarComCartao(parcela).then(function(retorno){return $ionicLoading.hide(),retorno}).catch(function(){$ionicLoading.hide(),Notification.error($translate.instant("General.ErrorNotSpecified"))})}acordoConCtrl.id="AcordoConsultaController",$scope.id=acordoConCtrl.id,showLoading(),acordoConCtrl.sessionData=SessionData,acordoConCtrl.aluno=acordoConCtrl.sessionData.aluno,acordoConCtrl.user=acordoConCtrl.sessionData.user,acordoConCtrl.responsavel="responsavel"===SessionData.perfil,acordoConCtrl.realizarAcordo=!1,acordoConCtrl.qtdAcordos=0,acordoConCtrl.qtdCobranca=0,acordoConCtrl.qtdParcelas=0,acordoConCtrl.dados=[],acordoConCtrl.getWindowWidth=function(){return window.innerWidth},acordoConCtrl.openDetail=function(codAcordo){acordoConCtrl.obterDetalhes(codAcordo)},acordoConCtrl.closeDetail=function(){acordoConCtrl.adordo={},acordoConCtrl.modal.hide(),acordoConCtrl.modalPreAcordo.hide(),$stateParams.codAcordo&&$state.go("home.acordo.consulta")},acordoConCtrl.obterDetalhes=function(codAcordo){showLoading(),$scope.$parent.acordoCtrl.opcoesAcordo&&$scope.$parent.acordoCtrl.opcoesAcordo.usaPreAcordo?AcordoService.obterDetalhesPreAcordo(codAcordo).then(function(result){result&&(acordoConCtrl.adordo=result,acordoConCtrl.adordo.numAcordo=result.PRE_ACORDO,AcordoService.obterCobrancasDoPreAcordo(codAcordo).then(function(resultCobranca){acordoConCtrl.adordo.listaDeCobrancaEmAberto=resultCobranca.dados,acordoConCtrl.qtdCobranca=resultCobranca.quantidade,AcordoService.obterCobrancasGeradasPeloPreAcordo(codAcordo).then(function(resultParcela){acordoConCtrl.qtdParcelas=resultParcela.quantidade,acordoConCtrl.adordo.planoDePagamentoSelecionado=resultParcela.dados,acordoConCtrl.modalPreAcordo.show(),$ionicLoading.hide()}).catch(function(err){$ionicLoading.hide(),defer.resolve("")})}).catch(function(err){$ionicLoading.hide(),defer.resolve("")}))}).catch(function(err){$ionicLoading.hide(),defer.resolve("")}):AcordoService.obterDetalhesAcordo(codAcordo).then(function(result){result.dados&&(acordoConCtrl.adordo=result.dados[0],AcordoService.obterCobrancasDoAcordo(codAcordo).then(function(resultCobranca){acordoConCtrl.adordo.listaDeCobrancaEmAberto=resultCobranca.dados,acordoConCtrl.qtdCobranca=resultCobranca.quantidade,AcordoService.obterCobrancasGeradasPeloAcordo(codAcordo).then(function(resultParcela){acordoConCtrl.qtdParcelas=resultParcela.quantidade,acordoConCtrl.adordo.planoDePagamentoSelecionado=resultParcela.dados,acordoConCtrl.modal.show(),$ionicLoading.hide()}).catch(function(err){$ionicLoading.hide(),defer.resolve("")})}).catch(function(err){$ionicLoading.hide(),defer.resolve("")}))}).catch(function(err){$ionicLoading.hide(),defer.resolve("")})},acordoConCtrl.downloadBoleto=function(codBoleto){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),AcordoService.downloadBoleto(codBoleto)},acordoConCtrl.getResource=function(abstractResource){return AcordoFactory.opcoesDoAcordo.usaPreAcordo?"Preacordo."+abstractResource:"Acordo."+abstractResource},acordoConCtrl.title="Home.view.Acordo",acordoConCtrl.text=$translate.instant("Home.view.Acordo"),acordoConCtrl.textTitle=$translate.instant("Home.view.Acordos"),AcordoService.obterListaAcordos().then(function(result){$ionicLoading.hide(),acordoConCtrl.dados=result.dados,acordoConCtrl.qtdAcordos=result.quantidade,$stateParams.codAcordo&&acordoConCtrl.obterDetalhes(parseInt($stateParams.codAcordo))},function(err){$ionicLoading.hide()}),acordoConCtrl.pagamento=async function(parcela){let retorno=await obterDadosPagamento(parcela),cobrancas={valorDocumento:retorno.cartaoValorDocumento,origem:retorno.cartaoOrigem,dataCalculoValor:retorno.cartaoDataCalculoValor,codResponsavelFinanceiro:retorno.cartaoCodRespFinan,opcaoPgtoCartao:retorno.cartaoOpcaoPgto,cobrancasConcatenadas:retorno.cartaoCobrancasSelecionadas,cartaoItensCobrancas:retorno.cartaoItensCobrancas,valorSelecionado:retorno.cartaoValorOriginalDocumento,encargoCalculado:retorno.cartaoEncargoDocumento,encargoBolsa:retorno.cartaoEncargoBolsaDocumento,descontoAdiantamentoCalculado:retorno.cartaoDescontoDocumento};PagamentoCartaoFactory.setCobrancasSelecionadas(cobrancas),showLoading(),$state.go("home.pgtocartao-pagamento")},$ionicModal.fromTemplateUrl("js/custom-components/acordo-consulta/detail/acordo.consulta.pre.acordo.modal.html",{scope:$scope,animation:"slide-in-up",backdropClickToClose:!1}).then(function(modal){acordoConCtrl.modalPreAcordo=modal}),$ionicModal.fromTemplateUrl("js/custom-components/acordo-consulta/detail/acordo.consulta.acordo.modal.html",{scope:$scope,animation:"slide-in-up",backdropClickToClose:!1}).then(function(modal){acordoConCtrl.modal=modal}),acordoConCtrl.imprimir=function(codAcordo){dados={acordoOnLine:acordoConCtrl.adordo,opcoesAcordo:acordoConCtrl.opcoesDoAcordo};let params={};params.url=Configs.getApiServer()+"/financeiro/codAcordo/"+dados.acordoOnLine.numAcordo+"/obterImagemDocumentoAcordo",params.method="GET",DownloadArquivo.downloadArquivo(params)},acordoConCtrl.gerarRelatorioAcordo=function(codAcordo){let params={};params.url=Configs.getApiServer()+"/financeiro/codPessoaLogada/"+SessionData.user.id+"/codAluno/"+encodeURI(SessionData.aluno.list[0].codAluno)+"/codAcordo/"+codAcordo+"/exibirArquivo/false/geraRelatorioAcordo",params.method="GET",DownloadArquivo.downloadArquivo(params)},$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){acordoConCtrl.modal&&acordoConCtrl.modal.hide(),acordoConCtrl.modalPreAcordo&&acordoConCtrl.modalPreAcordo.hide()}),$ionicModal.fromTemplateUrl("views/logged/cartao/modal.pagamento.pix.html",{scope:$scope,animation:"slide-in-up"}).then(function(modalPix){acordoConCtrl.modalPix=modalPix}),acordoConCtrl.openModalPix=async function(parcela){showLoading();let retorno=await obterDadosPagamento(parcela),obj={candidato:null,concurso:null,listaDeCobrancas:[parcela.codCobranca],valorTotal:retorno.cartaoValorDocumento};acordoConCtrl.modalPix.show(),$scope.$broadcast("startPix",obj)},$scope.copiarPix=function(){Clipboard.isSupported()?(acordoConCtrl.clipboard=new Clipboard("#copy-button"),Notification.success($translate.instant("pix.view.msg.copied"))):Notification.warning($translate.instant("navegador.sem.suporte"))},$scope.closeModal=function(){acordoConCtrl.modalPix.hide()}}]),angular.module("contratoListModule",[]),angular.module("contratoListModule").component("contratoList",{templateUrl:"js/custom-components/contrato-list/contrato-list.component.html",controller:"ContratoListComponentController",controllerAs:"ctrl",bindings:{}}),function(){angular.module("contratoListModule").controller("ContratoListComponentController",["$scope","$log","Notification","$ionicModal","$http","SessionData","$ionicLoading","ContratoService","Configs","DownloadArquivo",function($scope,$log,Notification,$ionicModal,$http,SessionData,$ionicLoading,Contrato_Service,Configs,DownloadArquivo){var ctrl=this;$log.debug("[ContratoListComponentController]:ctrl=",ctrl),ctrl.sessionData=SessionData,ctrl.getWindowWidth=function(){return window.innerWidth},ctrl.openContratoDetail=function(contratoSelecionado){Contrato_Service.obterContrato(contratoSelecionado).then(function(result){ctrl.contratoAssinado=result.imagem,ctrl.contratoSelecionado=contratoSelecionado,ctrl.formatoContrato=result.extensaoContrato,$ionicLoading.hide(),ctrl.modal.show()})},ctrl.closeContratoDetail=function(){ctrl.modal.hide()},ctrl.downloadContrato=function(contratoSelecionado){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),contratoSelecionado&&(ctrl.contratoSelecionado=contratoSelecionado);let params={};params.url=Configs.getApiServer()+"/matricula/idContratoAluno/"+ctrl.contratoSelecionado+"/exibirArquivo/false/downloadContratoAluno",params.method="GET",DownloadArquivo.downloadArquivo(params)},ctrl.contratos=[];var alunos=ctrl.sessionData.aluno;ctrl.aluno=alunos.list[alunos.selecionado],$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),Contrato_Service.consultaContrato().then(function(result){ctrl.contratos=result,$ionicLoading.hide()}),$ionicModal.fromTemplateUrl("js/custom-components/contrato-detail/contrato-itens-modal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){ctrl.modal=modal}),$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){ctrl.modal&&ctrl.modal.hide()})}])}(),angular.module("termoListModule",[]),angular.module("termoListModule").component("termoList",{templateUrl:"js/custom-components/termo-list/termo-list.component.html",controller:"TermoListComponentController",controllerAs:"ctrl",bindings:{}}),function(){angular.module("termoListModule").controller("TermoListComponentController",["$scope","$log","Notification","$ionicModal","$http","SessionData","$ionicLoading","Configs","MatriculaService","DownloadArquivo",function($scope,$log,Notification,$ionicModal,$http,SessionData,$ionicLoading,Configs,matriculaService,downloadArquivo){var ctrl=this;$log.debug("[TermoListComponentController]:ctrl=",ctrl),ctrl.sessionData=SessionData,ctrl.openTermoDetail=function(termoSelecionado){let params={idDocumentoPessoa:termoSelecionado};matriculaService.obterTermoLGPDAceitoPessoaImagem(params).then(result=>{ctrl.termoAceito=function(base64){const text=atob(base64);if((text.indexOf("PT-BR")||text.indexOf("UTF-8")||text.indexOf("utf-8")||text.indexOf("utf8")||text.indexOf("pt-br"))>-1)return text;{const length=text.length,bytes=new Uint8Array(length);for(let i=0;i<length;i++)bytes[i]=text.charCodeAt(i);const decoder=new TextDecoder;return decoder.decode(bytes)}}(result?result.html:""),ctrl.termoSelecionado=termoSelecionado,ctrl.modal.show()})},ctrl.closeTermoDetail=function(){ctrl.modal.hide()},ctrl.downloadTermo=function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1});let params={};params.url=Configs.getApiServer()+"/pessoas/codPessoa/"+ctrl.sessionData.user.id+"/id_documento_pessoa/"+ctrl.termoSelecionado+"/download_documento_pessoa",params.method="GET",downloadArquivo.downloadArquivo(params)},ctrl.getWindowWidth=function(){return window.innerWidth},ctrl.termos=[];var alunos=ctrl.sessionData.aluno;ctrl.aluno=alunos.list[alunos.selecionado];let paramsListarTermos={codPessoa:ctrl.sessionData.user.id};matriculaService.listarTermosLGPDAceitosPessoa(paramsListarTermos).then(result=>{ctrl.termos=result}),$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),$ionicModal.fromTemplateUrl("js/custom-components/termo-detail/termo-modal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){ctrl.modal=modal}),$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){ctrl.modal&&ctrl.modal.hide()})}])}(),angular.module("historicoCabecalhoModule",[]),angular.module("historicoCabecalhoModule").controller("HistoricoCabecalhoController",["$scope","$state","$log","SessionData","DownloadArquivo","Configs","$ionicLoading",function($scope,$state,$log,SessionData,DownloadArquivo,Configs,$ionicLoading){this.id="HistoricoCabecalhoController",this.getWindowWidth=function(){return window.innerWidth}}]),angular.module("historicoCabecalhoModule").component("historicoCabecalho",{templateUrl:"js/custom-components/historico-cabecalho/historico.cabecalho.html",bindings:{cabecalho:"="},controller:"HistoricoCabecalhoController",controllerAs:"historicoCtrl"}),angular.module("historicoListModule",[]),angular.module("historicoListModule").controller("HistoricoListController",["$scope","$state","$log","TypeEnum",function($scope,$state,$log,TypeEnum){this.id="HistoricoListController",this.getWindowWidth=function(){return window.innerWidth}}]),angular.module("historicoListModule").component("historicoList",{templateUrl:"js/custom-components/historico-list/historico.list.html",bindings:{list:"=",columns:"="},controller:"HistoricoListController",controllerAs:"historicoCtrl"}),angular.module("matriculaTermoModule",[]),function(){angular.module("matriculaTermoModule").controller("MatriculaTermoComponentController",["$scope","$log","Notification","$ionicModal","$q","SessionData","$ionicLoading","MatriculaService","Configs","$state","$ionicHistory","$ionicPopup","$translate",function($scope,$log,Notification,$ionicModal,$q,SessionData,$ionicLoading,MatriculaService,Configs,$state,$ionicHistory,$ionicPopup,$translate){var ctrl=this;ctrl.getWindowWidth=function(){return window.innerWidth},ctrl.closeRecusarTermo=function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),MatriculaService.aceitoTermo(!1).then(function(response){if(Notification.warning(response.mensagem),"S"===response.continuar){var wizzardControler=$scope.$parent.$parent.$parent.$parent.$parent.$parent.vm;wizzardControler.currentStep++,$state.go(wizzardControler.steps[wizzardControler.currentStep].state),adjustScroll()}$ionicLoading.hide()}).catch(function(){$ionicHistory.nextViewOptions({disableBack:!0}),$ionicLoading.hide()})},ctrl.termoMatriculaTexto="";let configMatricula=$scope.$parent.vm.matriculaController.configMatricula.config;ctrl.instrucoes=configMatricula.instrucoes,matriculaController=ctrl.matriculaController,ctrl.termoMatriculaTexto=matriculaController.termoMatricula.mensagem,matriculaController.cancelButton={caption:"Aluno.Matricula.Wizard.Recusar",style:"button-red",enabled:!0,onClick:function(){let deferr=$q.defer();return $ionicPopup.show({template:$translate.instant("Aluno.Matricula.Termo.Texto.Recusa"),title:$translate.instant("Aluno.Matricula.Termo.Titulo.Recusa"),scope:$scope,buttons:[{text:$translate.instant("Aluno.Matricula.Termo.Opcao.Nao"),type:"button-blue"},{text:$translate.instant("Aluno.Matricula.Termo.Opcao.Sim"),type:"button-red",onTap:ctrl.closeRecusarTermo}]}),deferr.reject(),deferr.promise}},matriculaController.nextButton={caption:"Aluno.Matricula.Wizard.Aceitar",style:"button-green",enabled:!0,onClick:function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0});let deferr=$q.defer();return MatriculaService.aceitoTermo(!0).then(function(response){deferr.resolve(response),$ionicLoading.hide()}).catch(function(error){deferr.reject(),$ionicLoading.hide()}),deferr.promise}}}])}(),angular.module("matriculaTermoModule").component("matriculaTermo",{templateUrl:"js/custom-components/matricula-termo/matricula-termo.component.html",controller:"MatriculaTermoComponentController",controllerAs:"ctrl",bindings:{matriculaController:"<"}}),angular.module("MyApp").controller("LoginController",["$rootScope","$scope","sharedLoginService","$timeout","$ionicHistory","$http","Notification",function($rootScope,$scope,sharedLoginService,$timeout,$ionicHistory,$http,Notification){$scope.$on("$ionicView.beforeEnter",function(event,data){$ionicHistory.clearCache(),$ionicHistory.clearHistory(),$scope.user={},$scope.message={},$scope.profile={}}),$scope.cssLoginCustom=sharedLoginService.cssCustom(),$scope.logoLoginCustom=sharedLoginService.logoLoginCustom(),$scope.login=sharedLoginService.login,$rootScope.infiniteReached=function(){},$scope.selectProfile=sharedLoginService.selectProfile,$scope.selectProfile("aluno"),exibeRecuperarSenhaRequest=function(){$http({method:"GET",url:"config-properties/exibe-recuperar-senha",headers:{}}).success(function(data,status,headers,config){$scope.exibeRecuperarSenha=data}).error(function(data,status,headers,config){Notification.error("Problemas ao verificar as configurações do properties. Erro: "+data)})},exibeRecuperarSenhaRequest(),endRecuperarSenhaRequest=function(){$http({method:"GET",url:"config-properties/end-recuperar-senha",headers:{}}).success(function(data,status,headers,config){$scope.endRecuperarSenha=data}).error(function(data,status,headers,config){Notification.error("Problemas ao verificar as configurações do properties. Erro: "+data)})},endRecuperarSenhaRequest(),publicKeyRequest=function(){$http({method:"GET",url:"config-properties/public-key",headers:{}}).success(function(data,status,headers,config){$rootScope.publicKey=data}).error(function(data,status,headers,config){Notification.error("Problemas ao verificar as configurações do properties. Erro: "+data)})},publicKeyRequest(),recaptchaSiteKeyRequest=function(){$http({method:"GET",url:"config-properties/recaptcha-sitekey",headers:{}}).success(function(data,status,headers,config){$scope.recaptchaSucesso=!0,$rootScope.ativarRecaptcha=!1,void 0!==data&&""!==data?($scope.recaptchaSucesso=!1,$rootScope.ativarRecaptcha=!0,recaptchaCallback=function(){document.getElementById("button-login").disabled=!1},recaptchaExpiredCallback=function(){document.getElementById("button-login").disabled=!0},recaptchaRender=function(){$scope.recaptchaSucesso=!1,grecaptcha.render("g-recaptcha",{sitekey:data,callback:recaptchaCallback,"expired-callback":recaptchaExpiredCallback})}):recaptchaRender=function(){}}).error(function(data,status,headers,config){Notification.error("Problemas ao verificar as configurações do properties. Erro: "+data)})},recaptchaSiteKeyRequest(),sharedLoginService.set($scope)}]),angular.module("MyApp").controller("RecuperarSenhaController",["$scope","$state","SessionData","UserService","$ionicLoading","$http","$stateParams","Notification","Storage","$translate","UtilService",function($scope,$state,SessionData,UserService,$ionicLoading,$http,$stateParams,Notification,Storage,$translate,UtilService){$scope.login={},$scope.objUser=angular.fromJson(Storage.get("_u")),$scope.isResetSenha=!0,$ionicLoading.hide(),$scope.objUser&&(0!=$scope.objUser.senhaAlterada&&"false"!=$scope.objUser.senhaAlterada||($scope.isResetSenha=!1));let path=location.origin+location.pathname;$scope.telaSolicitar=!0,void 0!==$stateParams.token&&($scope.telaSolicitar=!1),$scope.validarSenhas=function(){if(void 0!==$scope.login.senha||void 0!==$scope.login.senhaRepete){if(angular.equals($scope.login.senha,$scope.login.senhaRepete))return!0;Notification.error("As senhas não são iguais!")}else Notification.error("Por favor, preencha os campos.");return!1},$scope.validarRedefinicaoSenha=function(){if(void 0!==$scope.login.senha||void 0!==$scope.login.senhaRepete){if(angular.equals($scope.login.senha,$scope.login.senhaRepete))return!0;Notification.error("As senhas não são iguais!")}else Notification.error("Por favor, preencha os campos.");return!1},$scope.voltar=function(){$state.go("login"),SessionData.clear(),Storage.clear(),$state.go("login",{},{reload:!0})},$scope.resetarSenha=function(){$scope.validarSenhas()&&($ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),UserService.resetarSenha($stateParams.token,$scope.login.senha,$scope.login.senhaRepete).then(function(result){412==result.status&&Notification.error(result.mensagemDetalhada),void 0!==result.conteudo&&""!==result.conteudo&&(Notification.success(result.conteudo),$state.go("login")),$ionicLoading.hide()}).catch(function(err){Notification.error(err),$ionicHistory.nextViewOptions({disableBack:!0}),$ionicLoading.hide()}))},$scope.changePassword=function(){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0});var idPessoa=angular.fromJson(Storage.get("_u")).id,user={oldPassword:encodeURIComponent($scope.login.senhaAtual),newPassword:encodeURIComponent($scope.login.novaSenha),newPasswordConfirmation:encodeURIComponent($scope.login.senhaConfirmacao),idPessoa:idPessoa};$http({method:"PUT",url:"changePassword",data:$.param(user),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(data,status,headers,config){if(200==status)Notification.info($translate.instant("Home.view.passwordChanged")),SessionData.user?SessionData.user.senhaAlterada="true":(SessionData.user=angular.fromJson(Storage.get("_u")),SessionData.user.senhaAlterada="true",Storage.set("_u",JSON.stringify(SessionData.user))),$state.go("home.avisos");else{var error=500==status?$translate.instant("Home.view.InvalidPassword"):data.message;Notification.error(error)}$ionicLoading.hide(),$scope.login.oldPassword="",$scope.login.newPassword="",$scope.login.newPasswordConfirmation=""}).error(function(data,status,headers,config){401==status&&$translate.instant("Home.view.InvalidPassword");$ionicLoading.hide()})},$scope.gerarToken=function(){void 0!==$scope.login.login?($ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),UserService.gerarToken($scope.login.login,path).then(function(result){Notification.success("Você receberá um email com dados para reset de senha!"),$state.go("login"),$ionicLoading.hide()}).catch(function(err){Notification.error(err),$ionicHistory.nextViewOptions({disableBack:!0}),$ionicLoading.hide()})):Notification.error("Por favor, preencha o campo usuário.")},$scope.logoLoginCustom=UtilService.obtemRecurso({aplicacao:"ALUNO_RESP",objeto:"LOGO_LOGIN"})}]),angular.module("MyApp").controller("ObterBoletoTokenController",["$scope","$location","$ionicLoading","CobrancaService","UtilService",function($scope,$location,$ionicLoading,CobrancaService,UtilService){function downloadBoleto(){let params=$location.search();$scope.token=params.token,$scope.candidato=params.candidato,$scope.token&&$scope.token&&($ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}),$scope.candidato&&"S"===$scope.candidato?CobrancaService.downloadBoletoCandidatoToken($scope.token):CobrancaService.downloadBoletoAlunoToken($scope.token))}downloadBoleto(),$scope.downloadBoletoLink=function($event){$event.stopPropagation(),downloadBoleto()},$scope.logoLoginCustom=UtilService.obtemRecurso({aplicacao:"ALUNO_RESP",objeto:"LOGO_LOGIN"})}]),angular.module("MyApp").factory("sharedLoginService",["$log","$http","$location","$rootScope","$window","$state","$translate","Notification","$ionicLoading","$timeout","$stateParams","AlunoFromUser","$ionicModal","UserService","Storage","SessionData","Configs","Aluno.AvaliacaoInstitucional","appModalService","MatriculaService","Storage","UtilService","serviceAlunos","$cookies",function($log,$http,$location,$rootScope,$window,$state,$translate,Notification,$ionicLoading,$timeout,$stateParams,AlunoFromUser,$ionicModal,UserService,Storage,SessionData,Configs,Aluno_AvaliacaoInstitucional,appModalService,MatriculaService,Storage,UtilService,serviceAlunos,$cookies){var dataset={},methods={cssCustom:function(){return UtilService.obtemRecurso({aplicacao:"ALUNO_RESP",objeto:"CSS_LOGIN"})},logoLoginCustom:function(){return UtilService.obtemRecurso({aplicacao:"ALUNO_RESP",objeto:"LOGO_LOGIN"})}};return UtilService.obtemRecurso({aplicacao:"ALUNO_RESP",objeto:"FAVICON"}).then(data=>{data&&(document.querySelector("#favicon").href="data:image/png;base64,"+btoa(data.imagem.match(/\w{2}/g).map(function(a){return String.fromCharCode(parseInt(a,16))}).join("")))}),methods.set=function(data){dataset=data},methods.get=function(){return dataset},methods.validCaptcha=function(){var capresp=grecaptcha.getResponse();return null!=capresp&&capresp.length>0},methods.login=async function(){if($ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),window.hostApp){if($rootScope.ativarRecaptcha&&!Storage.get("autoLogin")&&!methods.validCaptcha())return $ionicLoading.hide(),void Notification.error("Captcha inválido!");void 0===$rootScope.publicKey&&($rootScope.publicKey=await async function(){return await $http({method:"GET",url:"config-properties/public-key",headers:{}}).then(function(data){return data.data})}());let publicKey=$rootScope.publicKey,encrypt=new JSEncrypt;encrypt.setPublicKey(publicKey);let signature=encrypt.encrypt(dataset.user.password),recaptchaResponse="";$rootScope.ativarRecaptcha&&(recaptchaResponse=grecaptcha.getResponse()),credencialEncriptada={username:dataset.user.username,password:signature,recaptchaResponse:recaptchaResponse},$http({method:"POST",url:"auth",data:methods.serializeData(credencialEncriptada),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(methods.handleSuccess).error(methods.handleError)}else $ionicLoading.hide(),Notification.error("HostApp is required!")},methods.handleSuccess=function(data,status,headers,config){var self=this,base64UserCookie=$cookies.get("user-data");Storage.set("_u",window.atob(base64UserCookie)),AlunoFromUser(function(){if(self.listaAlunos=angular.fromJson(Storage.get("_a")),self.listaAlunos.list.length>1?(self.alunosResponsavel=self.listaAlunos,Storage.set("perfil","responsavel")):(self.aluno=self.listaAlunos,Storage.set("perfil","aluno")),SessionData.create(),Storage.get("autoLogin")){var state,landingState=Storage.get("autoLogin");angular.forEach($state.get(),function(value){$state.href(value.name)===landingState&&(state=value.name)}),landingState=state}else var defaultLandingState=methods.get().url||"home.avisos";null!==SessionData.aluno.list[0].paginaInicial&&(landingState=SessionData.aluno.list[0].paginaInicial),landingState&&0===(landingState=landingState.replace(new RegExp("/","g"),".")).indexOf(".")&&(landingState=landingState.substring(1));let selAluno=self.listaAlunos.list[self.listaAlunos.selecionado],promise1=MatriculaService.verificaExibeContratoLogin(selAluno.codAluno).then(function(result){Storage.set("exibirContrato",result.valor),result.valor||($rootScope.isContractNotRequired=!0)},function(result){let errorMsg;errorMsg=result&&result.mensagemDetalhada?result.mensagemDetalhada:$translate.instant("Aluno.Aceite.Contrato.Login.Servidor.Indisponivel"),Notification.error(errorMsg)}),paramsLgpd={codPessoa:selAluno.usuarioLogado.id,codAluno:encodeURIComponent(selAluno.codAluno),codResp:"null",sistema:"AOnlineResp"},promise2=MatriculaService.verificaExibeContratoLGPD(paramsLgpd).then(function(result){Storage.set("_contratoLgpd",JSON.stringify(result)),(!result||result.necessita_aceite_lgpd&&"N"==result.necessita_aceite_lgpd.toUpperCase())&&($rootScope.isLgpdNotRequired=!0)},function(result){let errorMsg;errorMsg=result&&result.mensagemDetalhada?result.mensagemDetalhada:$translate.instant("Aluno.Aceite.Contrato.Login.Servidor.Indisponivel"),Notification.error(errorMsg)});Promise.all([promise1,promise2]).then(()=>{$rootScope.isContractNotRequired&&$rootScope.isLgpdNotRequired&&methods.verificarAvaliacaoInstitucional(selAluno),$state.go(landingState||defaultLandingState)},()=>{$state.go(landingState||defaultLandingState)})})},methods.handleError=function(data,status,headers,config){var errorMsg=data;switch($rootScope.ativarRecaptcha&&grecaptcha.reset(),status){case 401:void 0!==errorMsg&&""!==errorMsg||(errorMsg=$translate.instant("Login.view.invalidPassword"));break;case 403:errorMsg=$translate.instant("Login.view.accessDenied",{value:data});break;case 500:errorMsg=$translate.instant("Aluno.Aceite.Contrato.Login.Servidor.Indisponivel")}$ionicLoading.hide(),Notification.error(errorMsg)},methods.serializeData=function(data){if(!angular.isObject(data))return null===data?"":data.toString();var buffer=[];for(var name in data)if(data.hasOwnProperty(name)){var value=data[name];buffer.push(encodeURIComponent(name)+"="+encodeURIComponent(null===value?"":value))}return buffer.join("&").replace(/%20/g,"+")},methods.selectProfile=function(profile){let classOutline="button button-positive button-outline";dataset.loginAlunoButton="Login.view.AlunoButtonLabel",dataset.loginResponsavelButton="Login.view.ResponsavelButtonLabel","aluno"==profile&&(dataset.profile={},dataset.profile.name="aluno",dataset.buttonClassAluno="button button-positive",dataset.buttonClassResponsavel=classOutline,dataset.loginUsername="Login.view.AlunoUsername"),"responsavel"==profile&&(dataset.profile={},dataset.profile.name="responsavel",dataset.buttonClassAluno=classOutline,dataset.buttonClassResponsavel="button button-positive",dataset.loginUsername="Login.view.ResponsavelUsername")},methods.verificarAvaliacaoInstitucional=function(aluno){Aluno_AvaliacaoInstitucional.query({codAluno:encodeURIComponent(aluno.codAluno)},function(result){if(result.length>0&&SessionData.aluno.list[0].transacoes.indexOf("avaliacaoinstitucional")>-1){if(result.find(function(item){return"S"===item.OBRIGATORIA}))return void Storage.set("questionariosObrigatorios",!0);$ionicModal.fromTemplateUrl("./views/logged/_avaliacao.institucional.view.html",{scope:$rootScope,animation:"slide-in-up",hardwareBackButtonClose:!1,backdropClickToClose:!1}).then(function(modal){$rootScope.modalAvaliacao=modal,$timeout(function(){modal.show()},500)})}},function(reason){var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";Notification.error("Problemas ao verificar a avaliação institucional. Erro: "+str)})},methods}]),angular.module("MyApp").service("MatriculaService",["Configs","SessionData","$resource","$q","$translate",function(Configs,SessionData,$resource,$q,$translate){this.verificaExibeContratoLogin=function(codAluno){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/cod_aluno/:cod_aluno/verifica_exibe_contrato_login",{},{query:{method:"GET",isArray:!1}}).query({cod_aluno:encodeURIComponent(codAluno)},function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.verificaExibeContratoLGPD=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/lgpd/codPessoa/:codPessoa/codAluno/:codAluno/codResp/:codResp/sistema/:sistema/verifica_deve_aceitar_termo_lgpd",{},{query:{method:"GET",isArray:!1}}).query(params,function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.obterTermoLgpd=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/lgpd/id_termo/:id_termo/sistema/:sistema/obter_termo_lgpd",{},{query:{method:"GET",isArray:!1}}).query(params,function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.incluirTermoLGPD=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/lgpd/incluir_termo_lgpd",{},{query:{method:"POST",isArray:!1}}).query(params,function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.recusarTermoLGPD=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/lgpd/recusar_termo_lgpd",{},{query:{method:"POST",isArray:!1}}).query(params,function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.listarTermosLGPDAceitosPessoa=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/lgpd/codPessoa/:codPessoa/listar_termos_lgpd_aceitos_pessoa",{},{query:{method:"GET",isArray:!0}}).query(params,function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.obterTermoLGPDAceitoPessoaImagem=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/lgpd/idDocumentoPessoa/:idDocumentoPessoa/obter_termo_lgpd_aceito_pessoa_imagem",{},{query:{method:"GET",isArray:!1}}).query(params,function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.gerarContratoAlunoLogin=function(codAluno){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/cod_pessoalogada/:cod_pessoalogada/cod_aluno/:cod_aluno/gera_contrato_aluno_login",{},{query:{method:"GET",isArray:!1}}).query({cod_aluno:encodeURIComponent(codAluno),cod_pessoalogada:encodeURIComponent(SessionData.user.id)},function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.aceitarContratoAlunoLogin=function(codAluno,htmlContrato){let payload={aluno:codAluno,htmlContrato:htmlContrato,contratoAceito:!0},defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/aceita_contrato_aluno_login",{},{query:{method:"POST",isArray:!1}}).query(payload,function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.obterContratoImagemAluno=function(id_contrato){let defer=$q.defer();return $resource(Configs.getApiServer()+"/matricula/id_contrato/:id_contrato/busca_contrato_imagem_aluno_by_id_contrato",{},{query:{method:"GET",isArray:!1}}).query({id_contrato:id_contrato},function(response){response.status?defer.reject():defer.resolve(response)},function(){defer.reject()}),defer.promise},this.obterConfigMatricula=function(aluno){let deferr=$q.defer();return aluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/obterConfigMatricula",{},{query:{method:"GET",isArray:!1}}).query({codAluno:encodeURIComponent(aluno.codAluno)},function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.obterDadosQuadroHorario=function(aluno,config){let deferr=$q.defer();if(aluno&&config){let codAluno=encodeURIComponent(aluno.codAluno);$resource(Configs.getApiServer()+"/matricula/codAluno/"+codAluno+"/obterDadosQuadroHorario",{},{query:{method:"POST",isArray:!1}}).query(config,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()})}else deferr.reject();return deferr.promise},this.obterDisciplinasMatriculadas=function(aluno,config){let deferr=$q.defer();if(aluno&&config){let codAluno=encodeURIComponent(aluno.codAluno);$resource(Configs.getApiServer()+"/matricula/codAluno/"+codAluno+"/obterDisciplinasMatriculadas",{},{query:{method:"POST",isArray:!1}}).query(config,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()})}else deferr.reject();return deferr.promise},this.removerDisciplinasQuadro=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/matricula/remover-disciplinas",{},{query:{method:"POST",isArray:!0}}).query(params,function(response){response?deferr.resolve(response):deferr.reject()},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.termoMatricula=function(){let deferr=$q.defer();var aluno=SessionData.aluno.list[SessionData.aluno.selecionado];return aluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:alunoId/executaEPAlteraInicioMatricula",{},{query:{method:"GET",isArray:!1}}).query({alunoId:aluno.codAluno},function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.aceitoTermo=function(resposta){let deferr=$q.defer();var aluno=SessionData.aluno.list[SessionData.aluno.selecionado];return aluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:alunoId/respostaAluno/:respostaAluno/executaEPAcaoInicioMatricula",{},{query:{method:"GET",isArray:!1}}).query({alunoId:aluno.codAluno,respostaAluno:resposta?"S":"N"},function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.existeContratoAceito=function(aluno,configMatricula){let deferr=$q.defer();return aluno&&configMatricula?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/ano/:ano/periodo/:periodo/existeContratoAceito",{},{query:{method:"GET",isArray:!1}}).query({codAluno:aluno.codAluno,ano:configMatricula.ano,periodo:configMatricula.periodo},function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.gerarContratoAlunoRollback=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/matricula/postGerarContratoAlunoRollback",{},{query:{method:"POST",isArray:!1}}).query(params,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.buscaContratoImagemAluno=function(aluno,configMatricula){let deferr=$q.defer();return aluno&&configMatricula?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/ano/:ano/periodo/:periodo/buscaContratoImagemAluno",{},{query:{method:"GET",isArray:!1}}).query({codAluno:aluno.codAluno,ano:configMatricula.ano,periodo:configMatricula.periodo},function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}):deferr.reject(),deferr.promise},this.aceitarContratoAluno=function(aceito,configMatricula,contrato,aluno){let deferr=$q.defer();if(configMatricula&&contrato&&aluno){let params={codAluno:aluno.codAluno,htmlContrato:contrato.htmlContrato,contratoAceito:aceito,presencial:!1,ehContratoEmAjuste:!1,configMatricula:configMatricula};$resource(Configs.getApiServer()+"/matricula/aceitarContratoAluno",{},{query:{method:"POST",isArray:!1}}).query(params,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()})}else deferr.reject();return deferr.promise},this.obterRequerimentoAluno=function(aluno,config){let deferr=$q.defer();if(aluno&&config){let params={codAluno:aluno.codAluno,ano:config.ano,periodo:config.periodo,tipoMatricula:config.tipomatricula,secretaria:!1};$resource(Configs.getApiServer()+"/matricula/obterRequerimentoMatriculaAluno",{},{query:{method:"POST",isArray:!1}}).query(params,function(response){deferr.resolve(response)},function(){deferr.reject()})}else deferr.resolve(!1);return deferr.promise},this.gerarBoletoMatricula=function(aluno,configMatricula){let deferr=$q.defer();return aluno&&configMatricula?$resource(Configs.getApiServer()+"/matricula/codAluno/"+aluno.codAluno+"/gerarBoletoMatricula").save(configMatricula,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.verificarImpressaoBoleto=function(aluno,configMatricula,boleto){let deferr=$q.defer();return params={codAluno:aluno.codAluno,codBoleto:boleto},aluno&&configMatricula&&$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/boleto/:codBoleto/verificarSeImprimeBoletoWebMatricula",{},{query:{method:"GET",isArray:!1}}).query(params,function(result){deferr.resolve(result)},function(err){deferr.reject(err)}),deferr.promise},this.downloadBoleto=function(aluno,codBoleto=0){let defer=$q.defer();if(aluno){let _objAluno={codPessoa:aluno.user.id,codAluno:aluno.codAluno,codBoleto:codBoleto};$resource(Configs.getApiServer()+"/financeiro/codPessoaLogada/:codPessoa/codAluno/:codAluno/codBoleto/:codBoleto/exibirArquivo/false/obterBoleto",{},{cache:!1,get:{responseType:"arraybuffer",transformResponse:function(data,headersGetter,status){if(500==status){defer.reject();var domString=new TextDecoder("utf-8").decode(data);return JSON.parse(domString)}let pdf;return data&&(pdf=new Blob([data],{type:"application/pdf"})),{pdf:pdf}}}}).get(_objAluno,function(result){delete _objAluno.codBoleto,defer.resolve(result)},function(error){delete _objAluno.codBoleto,defer.reject(error)})}else defer.reject({_msgErro:_msgErro});return defer.promise},this.obterDadosPagarMatriculaCartao=function(aluno,codBoleto){let deferr=$q.defer();if(aluno&&codBoleto){let _objAluno={codPessoa:aluno.user.id,codAluno:aluno.codAluno,codBoleto:codBoleto};$resource(Configs.getApiServer()+"/financeiro/cod_aluno/:codAluno/cod_pessoa/:codPessoa/id_boleto/:codBoleto/obter_dados_pagar_matricula_com_cartao",{},{query:{method:"GET",isArray:!1}}).query(_objAluno,function(response){deferr.resolve(response)},function(){deferr.reject()})}else deferr.resolve(!1);return deferr.promise},this.validarPremissaoCartaoMatricula=function(cod_aluno,id_boleto){let defer=$q.defer();return params={cod_aluno:cod_aluno,id_boleto:id_boleto},$resource(Configs.getApiServer()+"/financeiro/cod_aluno/:cod_aluno/id_boleto/:id_boleto/permite_pagar_matricula_com_cartao",{},{cache:!1,query:{method:"GET"}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.checarOperacoesPermitidas=function(cod_aluno){let defer=$q.defer(),params={codAluno:cod_aluno};if(cod_aluno)return $resource(Configs.getApiServer()+"/matricula/checar-operacoes-permitidas",{},{cache:!1,query:{method:"GET",isArray:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarTiposDisciplinas=function(cod_aluno){let defer=$q.defer(),params={codAluno:cod_aluno};if(cod_aluno)return $resource(Configs.getApiServer()+"/matricula/listar-tipos-disciplinas-matricula",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarCursosMatricula=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/matricula/listar-cursos-matricula",{},{cache:!1,query:{method:"GET",isArray:!0}}).query({},function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarAreas=function(cod_aluno){let defer=$q.defer(),params={codAluno:cod_aluno};return $resource(Configs.getApiServer()+"/matricula/listar-areas-matricula",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarGruposPorArea=function(cod_aluno,area){let defer=$q.defer(),params={codAluno:cod_aluno,area:area};return $resource(Configs.getApiServer()+"/matricula/listar-grupos-area-matricula",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarGruposMatricula=function(cod_aluno,obrigatorio){let defer=$q.defer(),params={codAluno:cod_aluno,obrigatorio:obrigatorio};return $resource(Configs.getApiServer()+"/matricula/listar-grupos-matricula",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarSimNao=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/matricula/listar-sim-nao",{},{cache:!1,query:{method:"GET",isArray:!0}}).query({},function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarTurnosMatricula=function(cod_aluno){let defer=$q.defer(),params={codAluno:cod_aluno};return $resource(Configs.getApiServer()+"/matricula/listar-turnos-matricula",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarUnidadesFisicasMatricula=function(cod_aluno){let defer=$q.defer(),params={codAluno:cod_aluno};return $resource(Configs.getApiServer()+"/matricula/listar-unidades-fisicas-matricula",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarDisciplinas=function(matriculaTD){let deferr=$q.defer();return matriculaTD?$resource(Configs.getApiServer()+"/matricula/listar-disciplinas",{},{query:{method:"POST",isArray:!0}}).query(matriculaTD,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarTurmas=function(matriculaTD){let deferr=$q.defer();return matriculaTD?$resource(Configs.getApiServer()+"/matricula/listar-turmas",{},{query:{method:"POST",isArray:!0}}).query(matriculaTD,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarTurmasTroca=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/matricula/listar-turmas-troca",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.listarTurmasDisciplinasEquivalentesTroca=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/matricula/listar-turmas-disciplinas-equivalentes-troca",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.incluirDisciplinasMatricula=function(matriculaTD){let deferr=$q.defer();return matriculaTD?$resource(Configs.getApiServer()+"/matricula/incluir-disciplinas-matricula",{},{query:{method:"POST",isArray:!0}}).query(matriculaTD,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.trocarTurmaMatricula=function(matriculaTD){let deferr=$q.defer();return matriculaTD?$resource(Configs.getApiServer()+"/matricula/trocar-turma",{},{query:{method:"POST",isArray:!0}}).query(matriculaTD,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.trocarTurmaDisciplinaEquivalente=function(matriculaTD){let deferr=$q.defer();return matriculaTD?$resource(Configs.getApiServer()+"/matricula/trocar-turma-disciplina-equivalente",{},{query:{method:"POST",isArray:!0}}).query(matriculaTD,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarValoresSimulacao=function(matriculaTD){let deferr=$q.defer();return matriculaTD?$resource(Configs.getApiServer()+"/matricula/listar-valores-simulacao",{},{query:{method:"POST",isArray:!0}}).query(matriculaTD,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.confirmarMatricula=function(matriculaTD){let deferr=$q.defer();return matriculaTD?$resource(Configs.getApiServer()+"/matricula/confirmar-matricula",{},{query:{method:"POST",isArray:!1}}).query(matriculaTD,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarOpcoesDisciplina=function(params,disciplinas){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/matricula/:codDisciplina/opcoes-disciplina",{},{query:{method:"POST",isArray:!0}}).query(params,disciplinas,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarOpcoesTurma=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/matricula/:codAluno/:codDisciplina/opcoes-turma",{},{query:{method:"GET",isArray:!0}}).query(params,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.incluirOpcao=function(turmaOpcaoDTO){let deferr=$q.defer();return turmaOpcaoDTO?$resource(Configs.getApiServer()+"/matricula/opcoes-turma",{},{query:{method:"POST",isArray:!0}}).query(turmaOpcaoDTO,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.removerOpcao=function(turmaOpcaoDTO){let deferr=$q.defer();return turmaOpcaoDTO?$resource(Configs.getApiServer()+"/matricula/remover-opcao-turma",{},{query:{method:"POST",isArray:!0}}).query(turmaOpcaoDTO,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarDisciplinasPriorizacao=function(disciplinasPriorizacaoDTO){let deferr=$q.defer();return disciplinasPriorizacaoDTO?$resource(Configs.getApiServer()+"/matricula/disciplinas-priorizacao",{},{query:{method:"POST",isArray:!0}}).query(disciplinasPriorizacaoDTO,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.subirDescerPrioridade=function(params,disciplinasPriorizacaoDTO){let deferr=$q.defer();return disciplinasPriorizacaoDTO?$resource(Configs.getApiServer()+"/matricula/:acao/prioridade",{},{query:{method:"POST",isArray:!0}}).query(params,disciplinasPriorizacaoDTO,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterResponsaveisFinanceirosMatricula=function(cod_aluno){let deferr=$q.defer(),params={codAluno:cod_aluno};return params?$resource(Configs.getApiServer()+"/matricula/listar-responsaveis-financeiros-matricula",{},{query:{method:"GET",isArray:!0}}).query(params,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterDadosPessoaisResponsavelFinanceiro=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/matricula/obter-dados-pessoais-responsavel-financeiro",{},{query:{method:"GET",isArray:!1}}).query(params,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.alterarResponsavelFinanceiro=function(aluno,params){let deferr=$q.defer();if(params)return $resource(Configs.getApiServer()+"/matricula/alterar-dados-responsavel-financeiro",{},{query:{method:"POST",isArray:!1}}).query(aluno,params,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.obterAutorizacaoMatricula=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/matricula/autorizacao-matricula",{},{query:{method:"GET",isArray:!0}}).query(params,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.confirmarAutorizacao=function(autorizacao){let deferr=$q.defer();return autorizacao?$resource(Configs.getApiServer()+"/matricula/autorizacao-matricula",{},{query:{method:"POST",isArray:!0}}).query(autorizacao,function(response){response.status?deferr.reject():deferr.resolve(response),deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("CartaoService",["Configs","$resource","$q","SessionData","DownloadArquivo",function(Configs,$resource,$q,SessionData,DownloadArquivo){var aluno;this.listarCobrancasParaPagamento=function(aluno){let deferr=$q.defer();return aluno?$resource(Configs.getApiServer()+"/financeiro/codPessoa/:codPessoa/codAluno/:codAluno/listarCobrancasParaPagamento").query({codPessoa:aluno.usuarioLogado.id,codAluno:encodeURIComponent(aluno.codAluno)},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listaCobrancasBoletoCartao=function(aluno){let deferr=$q.defer();return aluno?$resource(Configs.getApiServer()+"/financeiro/cod_aluno/:cod_aluno/cod_pessoa/:cod_pessoa/lista_cobrancas_boleto_cartao").query({cod_pessoa:aluno.usuarioLogado.id,cod_aluno:encodeURIComponent(aluno.codAluno)},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.calculaValoresTotaisPagamento=function(cobrancas){let deferr=$q.defer();return cobrancas&&cobrancas.length>0?$resource(Configs.getApiServer()+"/financeiro/calculaValoresTotaisPagamento",{},{query:{method:"POST"}}).query(cobrancas,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarFormaPagamento=function(calculos){let deferr=$q.defer();return calculos?$resource(Configs.getApiServer()+"/financeiro/listarFormaPagamento",{},{query:{method:"POST",isArray:!0}}).query(calculos,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarBandeirasCartao=function(cobrancas){let deferr=$q.defer();return cobrancas?$resource(Configs.getApiServer()+"/financeiro/listarBandeirasCartao",{},{query:{method:"POST",isArray:!0}}).query(cobrancas,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarMesesCartao=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/listarMesesCartao").query(function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.listarAnosCartao=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/listarAnosCartao").query(function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.pagarComCartaoCredito=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/financeiro/pagarComCartaoCredito",{},{query:{method:"POST"}}).query(params,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarStatusPedido=function(aluno,numPedido){let deferr=$q.defer();return null!==numPedido?$resource(Configs.getApiServer()+"/financeiro/aluno/:aluno/numPedido/:numPedido/listarStatusPedido",{},{query:{method:"GET"}}).query({aluno:aluno,numPedido:numPedido},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarPedidosPagamentoCartao=function(aluno,numPedido){let deferr=$q.defer();return null!==numPedido?$resource(Configs.getApiServer()+"/financeiro/aluno/:aluno/numPedido/:numPedido/listarPedidosPagamentoCartao",{},{query:{method:"GET",isArray:!0}}).query({aluno:aluno,numPedido:numPedido},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarCartoesPedido=function(aluno,numPedido){let deferr=$q.defer();return null!==numPedido?$resource(Configs.getApiServer()+"/financeiro/aluno/:aluno/numPedido/:numPedido/listarCartoesPedido",{},{query:{method:"GET",isArray:!0}}).query({aluno:aluno,numPedido:numPedido},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarCobrancasPedido=function(aluno,numPedido){let deferr=$q.defer();return null!==numPedido?$resource(Configs.getApiServer()+"/financeiro/aluno/:aluno/numPedido/:numPedido/listarCobrancasPedido",{},{query:{method:"GET",isArray:!0}}).query({aluno:aluno,numPedido:numPedido},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarPedidosPagamento=function(user,aluno){let deferr=$q.defer();return null!==user&&null!==aluno?$resource(Configs.getApiServer()+"/financeiro/codPessoaLogada/:codPessoa/aluno/:codAluno/listarPedidosPagamento",{},{query:{method:"GET",isArray:!0}}).query({codPessoa:aluno.usuarioLogado.id,codAluno:encodeURIComponent(aluno.codAluno)},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterDadosPagarServicoCartao=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/financeiro/cod_aluno/:cod_aluno/id_boleto/:id_boleto/obtem_dados_pagar_servico_com_cartao",{},{query:{method:"GET",isArray:!1}}).query(params,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listaCobrancasBoletoCartao=function(aluno){let deferr=$q.defer();return aluno?$resource(Configs.getApiServer()+"/financeiro/cod_aluno/:cod_aluno/cod_pessoa/:cod_pessoa/lista_cobrancas_boleto_cartao").query({cod_pessoa:aluno.usuarioLogado.id,cod_aluno:encodeURIComponent(aluno.codAluno)},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterConfiguracoesCartao=function(params){let deferr=$q.defer(),aluno={cod_aluno:params};return $resource(Configs.getApiServer()+"/financeiro/cod_aluno/:cod_aluno/obtem_config_cartao_de_credito",{},{query:{method:"GET"}}).query(aluno,function(result){deferr.resolve(result)},function(err){deferr.reject(err)}),deferr.promise},this.downloadConsultaPagamento=function(aluno,numPedido){if(null!==numPedido){let params={};params.url=Configs.getApiServer()+"/financeiro/aluno/"+aluno+"/numPedido/"+numPedido+"/consultarCartaoPedidoPdf",params.method="GET",DownloadArquivo.downloadArquivo(params)}},this.listarAutorizacoesDebito=function(debitoCartaoDto){let deferr=$q.defer();return debitoCartaoDto?$resource(Configs.getApiServer()+"/financeiro/lista_autorizacoes_debito",{},{query:{method:"POST",isArray:!0}}).query(debitoCartaoDto,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarCartoesSalvos=function(pessoa){let deferr=$q.defer();return pessoa?$resource(Configs.getApiServer()+"/financeiro/codPessoa/:codPessoa/lista_cartoes_salvos",{},{query:{method:"GET",isArray:!0}}).query({codPessoa:encodeURIComponent(pessoa)},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.desativarAutorizacao=function(idAutorizacao){let deferr=$q.defer();return idAutorizacao?$resource(Configs.getApiServer()+"/financeiro/id_autorizacao_deb_cartao/"+idAutorizacao+"/desativa_autorizacao",{},{query:{method:"PUT"}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.alterarCartaoProcesso=function(cartaoDadosDTO){let deferr=$q.defer();return cartaoDadosDTO?$resource(Configs.getApiServer()+"/financeiro/altera_cartao_processo",{},{query:{method:"POST",isArray:!1}}).query(cartaoDadosDTO,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarBandeiras=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/listarBandeirasCartao",{},{query:{method:"GET"}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.listarProcessamentosDebitoCartao=function(params){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/listar_processamentos_debito_cartao/"+params,{},{query:{method:"GET",isArray:!0}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.desativarCartao=function(params){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/id_cartao/"+params.idCartao+"/desativa_cartao_salvo",{},{query:{method:"PUT"}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.obtemInfoPix=function(){let deferr=$q.defer();return SessionData.aluno&&(aluno={codPessoa:SessionData.user.id,codAluno:SessionData.aluno.list[SessionData.aluno.selecionado].codAluno},1)&&$resource(Configs.getApiServer()+"/pix/codPessoaLogada/:codPessoa/codAluno/:codAluno/configPix",{},{query:{method:"GET",isArray:!1}}).query({codPessoa:aluno.codPessoa,codAluno:encodeURIComponent(aluno.codAluno)},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.gerarPix=function(inputPixDTO){let deferr=$q.defer();return inputPixDTO?(inputPixDTO.codPessoaLogada=SessionData.user.id,$resource(Configs.getApiServer()+"/pix/gerarPix",{},{query:{method:"POST",isArray:!1}}).query(inputPixDTO,function(response){deferr.resolve(response)},function(){deferr.reject()})):deferr.resolve(!1),deferr.promise},this.criarRecorrenciaCartao=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/financeiro/criar-recorrencia-cartao",{},{query:{method:"POST"}}).query(params,function(response){deferr.resolve(response)},function(err){deferr.reject(err)}):deferr.resolve(!1),deferr.promise},this.listarPagamentosRecorrentes=function(params){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/codAluno/:codAluno/listar-recorrencia-cartao",{},{query:{method:"GET",isArray:!0}}).query(params,function(result){deferr.resolve(result)},function(err){deferr.reject(err)}),deferr.promise},this.listarParcelasPagamentoRecorrente=function(params){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/idPgtoRecorrente/:idPgtoRecorrente/listar-parcelas-recorrencia-cartao",{},{query:{method:"GET",isArray:!0}}).query(params,function(result){deferr.resolve(result)},function(err){deferr.reject(err)}),deferr.promise},this.cancelarRecorrenciaCartao=function(params){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/financeiro/id_pgto_recorrente/"+params.idPgtoRecorrente+"/motivo/"+params.motivo+"/usuario/"+params.usuario+"/cancela_recorrencia_cartao",{},{query:{method:"PUT"}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise}}]),angular.module("MyApp").service("CobrancaService",["$resource","$q","SessionData","Configs","DownloadArquivo",function($resource,$q,SessionData,Configs,DownloadArquivo){var _msgErro={msgErro:"Error cobranca não encontrada"};function dadosValidosAluno(){return!!SessionData.aluno&&(dadosAluno={aluno:SessionData.aluno.list[SessionData.aluno.selecionado].codAluno,pessoa:SessionData.aluno.list[SessionData.aluno.selecionado].id},!0)}this.listarItensCobranca=function(cobranca){let defer=$q.defer();var codigoCobranca={cod_cobranca:cobranca};return $resource(Configs.getApiServer()+"/financeiro/cod_cobranca/:cod_cobranca/obter_lista_itens_cobranca",{},{cache:!1,query:{method:"GET"}}).query(codigoCobranca,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.getDadosImpressaoBoleto=function(codBoleto){let defer=$q.defer();var codigoCobranca={cod_boleto:codBoleto,codPessoa:SessionData.user.id};return $resource(Configs.getApiServer()+"/financeiro/cod_boleto/:cod_boleto/codPessoa/:codPessoa/obtem_dados_impressao_boleto",{},{cache:!1,query:{method:"GET"}}).query(codigoCobranca,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.getExibeProrrogaBoleto=function(codBoleto){let defer=$q.defer();return dadosValidosAluno()?(dadosAluno.boleto=codBoleto,$resource(Configs.getApiServer()+"/financeiro/aluno/:aluno/pessoa/:pessoa/boleto/:boleto/exibe_prorroga_boleto",{},{cache:!1,query:{method:"GET",isArray:!1}}).query(dadosAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)})):defer.reject({_msgErro:_msgErro}),defer.promise},this.prorrogarVencimentoBoleto=function(codBoleto){let defer=$q.defer();if(dadosValidosAluno()){let params={cod_boleto_antigo:codBoleto,cod_aluno:dadosAluno.aluno};$resource(Configs.getApiServer()+"/financeiro/cod_boleto_antigo/:cod_boleto_antigo/cod_aluno/:cod_aluno/prorroga_vencimento_boleto",{},{cache:!1,query:{method:"GET",isArray:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)})}else defer.reject({_msgErro:_msgErro});return defer.promise},this.downloadBoletoCobranca=function(codBoleto){let params={};params.url=Configs.getApiServer()+"/financeiro/cod_aluno/"+encodeURI(dadosAluno.aluno)+"/cod_boleto/"+codBoleto+"/exibir_arquivo/false/download_boleto",params.type="application/pdf",params.nomeArquivo="Boleto_"+codBoleto+"_"+(new Date).getTime(),params.method="GET",DownloadArquivo.downloadArquivo(params)},this.downloadBoletoCobrancaV2=function(codBoleto,codAluno){if(!codBoleto||!codAluno)return void $ionicLoading.hide();let params={};params.url=Configs.getApiServer()+"/financeiro/cod_aluno/"+encodeURI(codAluno)+"/cod_boleto/"+codBoleto+"/exibir_arquivo/false/download_boleto",params.type="application/pdf",params.nomeArquivo="Boleto_"+codBoleto+"_"+(new Date).getTime(),params.method="GET",DownloadArquivo.downloadArquivo(params)},this.listarItensDetalheBoleto=function(codBoleto){let defer=$q.defer();var codigoCobranca={cod_boleto:codBoleto};return $resource(Configs.getApiServer()+"/financeiro/cod_boleto/:cod_boleto/lista_itens_detalhe_boleto",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(codigoCobranca,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.downloadBoletoAlunoToken=function(token){if(!token)return void $ionicLoading.hide();let params={};params.url=Configs.getApiServer()+"/comum/boleto-aluno-token",params.type="application/pdf",params.nomeArquivo="Boleto_"+(new Date).getTime(),params.method="GET",params.params={token:token},DownloadArquivo.downloadArquivo(params)},this.downloadBoletoCandidatoToken=function(token){if(!token)return void $ionicLoading.hide();let params={};params.url=Configs.getApiServer()+"/comum/boleto-candidato-token",params.type="application/pdf",params.nomeArquivo="Boleto_candidato_"+(new Date).getTime(),params.method="GET",params.params={token:token},DownloadArquivo.downloadArquivo(params)}}]),angular.module("MyApp").service("UserService",["Configs","SessionData","$resource","$q","$http","Storage",function(Configs,SessionData,$resource,$q,$http,Storage){function buscarTransacoesAutorizadasAlunoFunc(alunoOld,deferred,alunoNew){if(alunoNew||(alunoNew=alunoOld),!alunoOld)return deferred.resolve(alunoNew);(function(aluno){let deferr=$q.defer();return aluno?$resource(Configs.getApiServer()+"/pessoas/codPessoa/:pessoaId/codAluno/:alunoId/buscarTransacoesAutorizadas",{},{query:{method:"GET"}}).query({pessoaId:aluno.usuarioLogado.id,alunoId:encodeURIComponent(aluno.codAluno)},function(response){response?deferr.resolve(response):deferr.resolve(!1)}):deferr.resolve(!1),deferr.promise})(alunoOld).then(function(transacoes){alunoOld.transacoes=transacoes.transoesAutorizadas,alunoOld.paginaInicial=transacoes.paginaInicial,alunoOld.permittedPages=transacoes.transoesAutorizadas,alunoOld.urls=transacoes.urlsAutorizadas.map(str=>null!=str&&void 0!==str&&str.startsWith(".")?str.substring(1):str);let transacoesPermitidas=alunoOld.urls.concat(alunoOld.transacoes);if(alunoOld.permittedPages=[...new Set(transacoesPermitidas)],!Storage.get("autoLogin"))return deferred.resolve(alunoNew);(function(aluno){let deferr=$q.defer();return aluno&&$http({url:Configs.getApiServer()+`/pessoas/menu-aluno-agrupado?aluno=${encodeURIComponent(aluno.codAluno)}&pessoa=${aluno.usuarioLogado.id}`}).success(function(retorno){deferr.resolve(retorno)}).error(function(erro){deferr.resolve(!1)}),deferr.promise})(alunoOld).then(function(menu){return function(menu,aluno){for(itens of menu)for(item of itens.itens){let strUrl=item.url;strUrl=void 0!==strUrl&&strUrl.startsWith(".")?strUrl.replace(".",""):strUrl,1===aluno.permittedPages.indexOf(strUrl)&&aluno.permittedPages.push(strUrl)}}(menu,alunoNew),deferred.resolve(alunoNew)})})}this.buscarTransacoesAutorizadasAluno=function(aluno){let deferr=$q.defer();return buscarTransacoesAutorizadasAlunoFunc(aluno,deferr),deferr.promise},this.alterarTemaAplicacao=function(){let deferr=$q.defer(),usuario=SessionData.aluno.list[SessionData.aluno.selecionado]?SessionData.aluno.list[SessionData.aluno.selecionado]:SessionData.user;return $resource(Configs.getApiServer()+"/pessoas/codPessoa/:pessoaId/alterarTemaAplicacao?codAluno="+encodeURIComponent(encodeURIComponent(usuario.codAluno)),{},{query:{method:"GET"}}).query({pessoaId:usuario.id},function(result){deferr.resolve(result)},function(err){deferr.reject(err)}),deferr.promise},this.gerarToken=function(login,path){let defer=$q.defer();var params={login:login,path:path};return $resource(Configs.getApiServer()+"/pessoas/reset_senha_aluno",{},{query:{method:"POST",isArray:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.resetarSenha=function(token,senha,senhaRepete){let defer=$q.defer();var params={codigo:token,senha:senha,repeticaoSenha:senhaRepete};return $resource(Configs.getApiServer()+"/pessoas/cadastra_nova_senha_aluno",{},{query:{method:"POST",isArray:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.setTheme=function(){if(!SessionData.isEmpty("user")){let deferr=$q.defer();return this.alterarTemaAplicacao().then(function(result){if(null!=result&&null!=result.tema){const folderRest="css/"+result.tema,head=document.getElementsByTagName("head")[0];var link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href=folderRest+"/custom.css",link.media="all",head.appendChild(link),deferr.resolve()}}).catch(function(){deferr.resolve()}),deferr.promise}},this.getPaginaInicial=function(aluno){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/cod_pessoa/:cod_pessoa/cod_aluno/:cod_aluno/obter_pagina_inicial",{},{query:{method:"GET"}}).query({cod_pessoa:aluno.usuarioLogado.id,cod_aluno:encodeURIComponent(aluno.codAluno)},function(response){deferr.resolve(response)},function(err){deferr.reject(err)}),deferr.promise}}]),angular.module("MyApp").service("AcordoService",["$resource","$q","SessionData","Storage","Configs","DownloadArquivo","FileSaver",function($resource,$q,SessionData,Storage,Configs,DownloadArquivo,FileSaver){var aluno,_msgErro={msgErro:"Error student undefined"};function dadosValidosAluno(){return!!SessionData.aluno&&(aluno={codPessoa:SessionData.user.id,codAluno:encodeURIComponent(SessionData.aluno.list[SessionData.aluno.selecionado].codAluno)},!0)}base64ToArrayBuffer=function(data){for(var binaryString=window.atob(data),binaryLen=binaryString.length,bytes=new Uint8Array(binaryLen),i=0;i<binaryLen;i++){var ascii=binaryString.charCodeAt(i);bytes[i]=ascii}return bytes},this.opcoesAcordoParaAluno=function(){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/codPessoaLogada/:codPessoa/codAluno/:codAluno/obterOpcoesAcordo",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterCobrancasAbertas=function(){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/codPessoa/:codPessoa/codAluno/:codAluno/obterCobrancasAbertas",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.dadosListaCobrancasAcordo=function(){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/codPessoa/:codPessoa/codAluno/:codAluno/dadosListaCobrancasAcordo",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterListaAcordos=function(){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/codPessoaLogada/:codPessoa/idAluno/:codAluno/obterListaAcordos",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDetalhesAcordo=function(codAcordo){let defer=$q.defer();return dadosValidosAluno()?(aluno.codAcordo=codAcordo,$resource(Configs.getApiServer()+"/financeiro/codPessoaLogada/:codPessoa/codAluno/:codAluno/codAcordo/:codAcordo/obterDetalhesAcordo",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){delete aluno.codAcordo,defer.resolve(result)},function(err){delete aluno.codAcordo,defer.reject(err.data)})):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDetalhesPreAcordo=function(codAcordo){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/codPreAcordo/:codAcordo/obterDadosPreAcordo",{},{cache:!1,query:{method:"GET"}}).query({codAcordo:codAcordo},function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterCobrancasDoAcordo=function(codAcordo){let defer=$q.defer();return dadosValidosAluno()?(aluno.codAcordo=codAcordo,$resource(Configs.getApiServer()+"/financeiro/codPessoaLogada/:codPessoa/codAcordo/:codAcordo/obterCobrancasDoAcordo",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){delete aluno.codAcordo,defer.resolve(result)},function(err){delete aluno.codAcordo,defer.reject(err.data)})):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterCobrancasDoPreAcordo=function(codAcordo){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/codPreAcordo/:codAcordo/listarCobrancasPreAcordadas",{},{cache:!1,query:{method:"GET"}}).query({codAcordo:codAcordo},function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterCobrancasGeradasPeloAcordo=function(codAcordo){let defer=$q.defer();return dadosValidosAluno()?(aluno.codAcordo=codAcordo,$resource(Configs.getApiServer()+"/financeiro/codPessoaLogada/:codPessoa/codAluno/:codAluno/codAcordo/:codAcordo/obterCobrancasGeradasPeloAcordo",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){delete aluno.codAcordo,defer.resolve(result)},function(err){delete aluno.codAcordo,defer.reject(err.data)})):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterCobrancasGeradasPeloPreAcordo=function(codAcordo){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/codPreAcordo/:codAcordo/listarCobrancasGeradasPreAcordo",{},{cache:!1,query:{method:"GET"}}).query({codAcordo:codAcordo},function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.dadoParaConfirmacao=function(dados){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/obterDetalhesAcordo",{},{cache:!1,query:{method:"POST",isArray:!0}}).save(dados,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDadosPagarComCartao=function(dados){let defer=$q.defer();return dadosValidosAluno()?(aluno.cobranca=dados.codCobranca,$resource(Configs.getApiServer()+"/financeiro/cobranca/:cobranca/cod_aluno/:codAluno/obtem_dados_pagar_cobranca_com_cartao",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){defer.resolve(result)},function(err){defer.reject(err.data)})):defer.reject({_msgErro:_msgErro}),defer.promise},this.salvarAceite=function(dados){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/aceito",{},{cache:!1,save:{method:"POST"}}).save(dados,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.salvarAceitoSemContrato=function(dados){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/aceitoSemContrato",{},{cache:!1,save:{method:"POST"}}).save(dados,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.listaPlanosDePagamentoAcordo=function(dados){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/listarPlanosDePagamentoAcordo",{},{cache:!1,save:{method:"POST",isArray:!0}}).save(dados,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.getHtmlDoAcordo=function(dados){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/gerarHtmlDoAcordo",{},{cache:!1,save:{method:"POST",isArray:!1}}).save(dados,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.gerarHtmlDoAcordo=function(dados){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/gerarHtmlDoAcordo",{},{cache:!1,save:{method:"POST",isArray:!1}}).save(dados,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.downloadBoleto=function(codBoleto=0){if(dadosValidosAluno()){let params={};params.url=Configs.getApiServer()+"/financeiro/codPessoaLogada/"+aluno.codPessoa+"/codAluno/"+aluno.codAluno+"/codBoleto/"+codBoleto+"/exibirArquivo/false/obterBoleto",params.method="GET",DownloadArquivo.downloadArquivo(params)}},this.imprimirContrato=function(acordoOnLineDados){var arquivo=new Blob([base64ToArrayBuffer(Storage.get("contratoPDF"))],{type:"application/pdf"});FileSaver.saveAs(arquivo,"contrato.pdf"),Storage.delete("contratoPDF")},this.imprimirContratoConsulta=function(codAcordo){let params={};params.url=Configs.getApiServer()+"/financeiro/codAcordo/"+codAcordo+"/obterImagemDocumentoAcordo",params.method="GET",DownloadArquivo.downloadArquivo(params)},this.gerarRelatorioAcordo=function(codAcordo){let defer=$q.defer();dadosValidosAluno();let params={codPessoaLogada:aluno.codPessoa,codAluno:aluno.codAluno,codAcordo:codAcordo,exibirArquivo:!0};return $resource(Configs.getApiServer()+"/financeiro/codPessoaLogada/:codPessoaLogada/codAluno/:codAluno/codAcordo/:codAcordo/exibirArquivo/:exibirArquivo/geraRelatorioAcordo",{},{cache:!1,get:{responseType:"arraybuffer",transformResponse:function(data){if(500==status){defer.reject();var domString=new TextDecoder("utf-8").decode(data);return JSON.parse(domString)}let pdf;return data&&(pdf=new Blob([data],{type:"application/pdf"})),{pdf:pdf}}}}).get(params,function(result){defer.resolve(result)},function(err){defer.reject(err.data)}),defer.promise}}]),angular.module("aol.service",["ngResource"]),angular.module("aol.service").factory("Aluno.User",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/user/:userId")}]).factory("Aluno",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/:alunoId",{},{query:{method:"GET",isArray:!0}})}]).factory("Aluno.Foto",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/codPessoa/:codPessoa/foto",{},{query:{method:"GET"}})}]).factory("Aluno.Boletins",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/:alunoId/pessoa/:pessoaId/boletins",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.Disciplinas.Boletim",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/:alunoId/pessoa/:pessoaId/disciplinasBoletim",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.Provas.Boletim",["$resource",function($resource){return $resource("${API_URL}/api/rest/Prova/aluno/:codAluno/disciplina/:codDisciplina/turma/:codTurma/ano/:ano/periodo/:periodo/provasBoletim",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.AlunoTurmas",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/:alunoId/alunoTurmas",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.TurmaDisciplinas",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/:alunoId/turmas/:turmaId/turmaDisciplinas",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.HorariosAula",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/codPessoa/:codPessoa/codAluno/:codAluno/dia/:diaSemana/HorariosAula",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.Calendario.Aulas",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/:alunoId/calendario/:calendarioId/aulas",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Event.Aluno",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/pessoa/:codPessoa/events",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.Avisos",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/codPessoa/:codPessoa/codAluno/:codAluno/AlunoAvisos",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.Ocorrencias",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/codPessoa/:codPessoa/codAluno/:codAluno/AlunoOcorrencias",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.Ocorrencias.Ciencia",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/codPessoa/:codPessoa/codAluno/:codAluno/AlunoOcorrencias/submeterCiencia",{},{query:{method:"POST",params:{page:0,size:1e3}}})}]).factory("Aluno.Secretaria.Servicos",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/pessoa/:codPessoa/:codAluno/Servicos",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Financeiro.Boletos",["$resource",function($resource){return $resource("${API_URL}/api/rest/financeiro/codAluno/:codAluno/Boletos?codPessoa=:codPessoa",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Financeiro.Boletos.Download",["$resource",function($resource){return $resource("${API_URL}/api/rest/financeiro/codAluno/:codAluno/codBoleto/:codBoleto/BoletoDownload",{},{query:{method:"GET",responseType:"application/pdf"}})}]).factory("Aluno.Minha.Turma",["$resource",function($resource){return $resource("${API_URL}/api/rest/MinhaTurma/:codAluno/AlunoMinhaTurma",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.Frequencia",["$resource",function($resource){return $resource("${API_URL}/api/rest/alunos/codAluno/:codAluno/codPessoa/:codPessoa/Frequencias",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.Tarefas",["$resource",function($resource){return $resource("${API_URL}/api/rest/tarefas/listByTarefasAluno/:idAluno",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).factory("Aluno.AvaliacaoInstitucional",["$resource",function($resource){return $resource("${API_URL}/avaliacaoInstitucional/questionarios/questionariosPendentesAluno?aluno=:codAluno",{},{query:{method:"GET",params:{page:0,size:1e3},isArray:!0}})}]).factory("Financeiro.Cobranca",["$resource",function($resource){return $resource("${API_URL}/api/rest/Cobranca/listByAluno/:codAluno/:codPessoa",{},{query:{method:"GET",params:{page:0,size:1e3}}})}]).service("agendaEventService",function(){var event={};return{setEvent:function(newObj){event=newObj},getEvent:function(){return event}}}),angular.module("MyApp").service("RelatorioService",["Configs","SessionData","DownloadArquivo","$resource","$q","$http","$ionicLoading",function(Configs,SessionData,DownloadArquivo,$resource,$q,$http,$ionicLoading){this.downloadReportService=function(pagina,aluno){let params={};$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),params.url=Configs.getApiServer()+"/relatorios/report-service/?pagina="+pagina+"&codAluno="+aluno,params.method="GET",DownloadArquivo.downloadArquivo(params)},this.downloadReportServiceEP=function(data){let params={};$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),params.url=Configs.getApiServer()+"/relatorios/report-service/",params.method="POST",params.data=data,DownloadArquivo.downloadArquivo(params)},this.verificaReportServiceEntry=function(pagina,aluno){let defer=$q.defer(),params={pagina:pagina,codAluno:aluno};return $http({method:"GET",url:Configs.getApiServer()+"/relatorios/report-service-entrypoint/",params:params}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise}}]),angular.module("metadata.service",["ngResource"]),function(){var module=angular.module("metadata.service").config(function(){module.baseUrl="${API_URL}/api/rest/metadata/"}).factory("Menu",["$resource",function($resource){return $resource(module.baseUrl+"Menu/:menuId",{},{query:{method:"GET",isArray:!0}})}]).factory("MenuTree",["$resource",function($resource){return $resource("${API_URL}/pessoas/menu-aluno?aluno=:codAluno&pessoa=:codPessoa",{},{get:{method:"GET",isArray:!0}})}]).factory("MenuGroup",["$resource",function($resource){return $resource("${API_URL}/pessoas/menu-aluno-agrupado?aluno=:codAluno&pessoa=:codPessoa",{},{get:{method:"GET",isArray:!0}})}]).factory("Menu.Items",["$resource",function($resource){return $resource(module.baseUrl+"Menu/:menuId/MenuItems",{},{query:{method:"GET",isArray:!0}})}]).factory("ParametrosIntegracaoSso",["$resource",function($resource){return $resource("${API_URL}/pessoas/codAluno/:codAluno/parametros-integracao-sso",{},{query:{method:"GET"}})}]);external_module=module}(),angular.module("login.service",["aol.service","custom.services"]).service("SessionData",["Storage","$log","$cookies",function(Storage,$log,$cookies){let srv=this;this.create=function(){srv.aluno=angular.fromJson(Storage.get("_a")),srv.alunosResponsavel=angular.fromJson(Storage.get("_alunosResponsavel")),srv.user=angular.fromJson(Storage.get("_u")),srv.agenda=angular.fromJson(Storage.get("_agenda")),srv.carrinho=angular.fromJson(Storage.get("_carrinho")),srv.perfil=Storage.get("perfil"),$log.debug("typeof(agenda)=",typeof srv.agenda,"agenda=",srv.agenda),void 0!==srv.carrinho&&null!=srv.carrinho||(srv.carrinho=[],Storage.set("_carrinho",JSON.stringify(srv.carrinho))),void 0!==srv.agenda&&null!=srv.agenda||(srv.agenda={selectedDate:moment()},Storage.set("_agenda",JSON.stringify(srv.agenda))),srv.data={aluno:srv.aluno,alunosResponsavel:srv.alunosResponsavel,user:srv.user,agenda:srv.agenda,carrinho:srv.carrinho,perfil:srv.perfil}},this.clear=function(){delete srv.data,delete srv.aluno,delete srv.alunosResponsavel,delete srv.user,delete srv.agenda,delete srv.carrinho,delete srv.perfil,$cookies.remove("user-data")},this.isEmpty=function(field){return!field||(void 0===srv[field]&&srv.create(),$log.debug("type=",typeof srv[field],field+"=",srv[field]),void 0===srv[field]||null===srv[field]||""===srv[field]||angular.equals(srv[field],{}))},this.setAluno=function(alunoSelecionadoResp){}}]).factory("AlunoFromUser",["$log","$rootScope","Aluno.User","Aluno.AlunoTurmas","Notification","UserService","Storage",function($log,$rootScope,Aluno_User,Aluno_AlunoTurmas,Notification,UserService,Storage){return function(callback){var User=angular.fromJson(Storage.get("_u"));external_User=User,User?($log.debug("[AlunoFromUser]:User=",User),$log.debug("User.id=",User.id),Aluno_User.get({userId:User.id},function(result){var aluno=result.content[result.content.map(a=>a.codAluno).indexOf(angular.fromJson(Storage.get("_u")).login)];void 0!==aluno&&(result.content=[],result.content.push(aluno)),UserService.buscarTransacoesAutorizadasAluno(result.content[0]).then(function(alunoNew){result.content[0]=alunoNew;var a={list:result.content,selecionado:0};Storage.set("_a",JSON.stringify(a)),Storage.set("_alunosResponsavel",JSON.stringify(a)),callback()})},function(){$log.debug("[Aluno_User_handleFailure]\targuments=",arguments)})):$log.debug("[AlunoFromUser]\tUser not found.")}}]),angular.module("MyApp").service("serviceAlunos",["SessionData","$state","Notification","Aluno.Foto","$rootScope","$q","Configs","Aluno.AvaliacaoInstitucional","$resource","$ionicLoading","$ionicLoading","$translate","Storage","MatriculaService","UserService","$ionicModal","$log",function(SessionData,$state,Notification,Aluno_Foto,$rootScope,$q,Configs,Aluno_AvaliacaoInstitucional,$resource,$ionicLoading,$ionicLoading,$translate,Storage,MatriculaService,UserService,$ionicModal,$log){function loading(value){value?$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1}):$ionicLoading.hide()}function verificarAvaliacaoInstitucional(aluno){loading(!0),$rootScope.isContractNotRequired&&$rootScope.isLgpdNotRequired?Aluno_AvaliacaoInstitucional.query({codAluno:encodeURIComponent(Array.isArray(aluno)?aluno[0].codAluno:aluno.codAluno)},function(result){return result.length>0&&SessionData.aluno.list[0].transacoes.indexOf("avaliacaoinstitucional")>-1?result.find(function(item){return"S"===item.OBRIGATORIA})?(Storage.set("questionariosObrigatorios",!0),void redirecionaParaTelaDoAlunoSelecionado(aluno)):($ionicModal.fromTemplateUrl("./views/logged/_avaliacao.institucional.view.html",{scope:$rootScope,animation:"slide-in-up",hardwareBackButtonClose:!1,backdropClickToClose:!1}).then(function(modal){$rootScope.modalAvaliacao=modal,$timeout(function(){modal.show()},500)}),loading(!1),void redirecionaParaTelaDoAlunoSelecionado(aluno)):(Storage.set("questionariosObrigatorios",!1),void redirecionaParaTelaDoAlunoSelecionado(aluno))},function(result){var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";loading(!1),redirecionaParaTelaDoAlunoSelecionado(aluno),Notification.error("Problemas ao verificar a avaliação institucional. Erro: "+str)}):redirecionaParaTelaDoAlunoSelecionado(aluno)}function redirecionaParaTelaDoAlunoSelecionado(aluno){loading(!0);var temPermissao=SessionData.aluno.list[SessionData.aluno.selecionado].transacoes.find(element=>element==$state.$current.self.pageId),landingState=$state.$current;temPermissao?Storage.get("questionariosObrigatorios")||"home.avaliacaoinstitucional-questionario-full"!=$state.$current.self.name?(loading(!1),$state.go(landingState,{},{reload:!0,notify:!0})):$state.go("home.avisos",{},{reload:!0,notify:!0}):UserService.getPaginaInicial(Array.isArray(aluno.list)?aluno.list[0]:aluno).then(function(result){null!=result&&null!==result.paginaRedirecionamento&&""!==result.paginaRedirecionamento&&(landingState=result.paginaRedirecionamento)&&(0===(landingState=landingState.replace(new RegExp("/","g"),".")).indexOf(".")&&(landingState=landingState.substring(1)),$log.debug("Página inicial alterada:",landingState))}).catch(function(err){loading(!1),$log.error('Erro no serviço "Página Inicial":',err)}).then(function(){loading(!1),$state.go(landingState,{},{reload:!0,notify:!0})})}this.selecionarAluno=function(aluno){(function(aluno){var alunoResp=[];const matriculaAluno=SessionData.aluno.list[0].matricula;let promiseContratoLogin=MatriculaService.verificaExibeContratoLogin(aluno.matricula).then(function(result){Storage.set("exibirContrato",result.valor),result.valor||($rootScope.isContractNotRequired=!0);var a={list:alunoResp,selecionado:0};if(a.list.push(aluno),SessionData.aluno=a,matriculaAluno!=aluno.matricula){angular.element("#idSubHeader").html(a.list[0].user.name),setTimeout(function(){loading(!0),angular.element("#globalNavbar").removeClass("hide"),setTimeout(()=>{loading(!1)},500)},1e3),$rootScope.alunoHasChanged=!0}},function(result){let errorMsg;errorMsg=result&&result.mensagemDetalhada?result.mensagemDetalhada:$translate.instant("Aluno.Aceite.Contrato.Login.Servidor.Indisponivel"),Notification.error(errorMsg)}),paramsLgpd={codPessoa:aluno.usuarioLogado.id,codAluno:aluno.codAluno,codResp:"null",sistema:"AOnlineResp"},promiseContratoLGPD=MatriculaService.verificaExibeContratoLGPD(paramsLgpd).then(function(result){Storage.set("_contratoLgpd",JSON.stringify(result)),(!result||result.necessita_aceite_lgpd&&"N"==result.necessita_aceite_lgpd.toUpperCase())&&($rootScope.isLgpdNotRequired=!0)},function(result){let errorMsg;errorMsg=result&&result.mensagemDetalhada?result.mensagemDetalhada:$translate.instant("Aluno.Aceite.Contrato.Login.Servidor.Indisponivel"),Notification.error(errorMsg)});return Promise.all([promiseContratoLogin,promiseContratoLGPD])})(aluno).then(()=>{SessionData.aluno.list[SessionData.aluno.selecionado].transacoes?verificarAvaliacaoInstitucional(aluno):UserService.buscarTransacoesAutorizadasAluno(aluno).then(alunoNew=>{SessionData.aluno.list[SessionData.aluno.selecionado]=alunoNew,verificarAvaliacaoInstitucional(aluno)})})},this.redirectUrlRetorno=function(codPessoa,codAluno){let defer=$q.defer();var _objAluno={codAluno:codAluno,codPessoa:codPessoa};return $resource(Configs.getApiServer()+"/pessoas/cod_pessoa/:codPessoa/cod_aluno/:codAluno/obter_url_retorno",{},{cache:!1,query:{method:"GET"}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.geraLogConexao=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/grava-log-conexoes",{},{query:{method:"POST",cache:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.loadFotoAluno=function(aluno){if(null==aluno)return"img/nophoto.png";Aluno_Foto.query({codPessoa:aluno.id},function(result){result&&null!==result.foto&&(aluno.foto=result.foto,aluno.foto=function(aluno){var imgURL="";if(aluno&&void 0!==aluno.foto&&null!==aluno.foto&&"null"!==aluno.foto&&aluno.foto.length>0)imgURL=URL.createObjectURL(function(strHexadecimal){var hexString=atob(strHexadecimal),aBuffer=new ArrayBuffer(hexString.length/2),byteBuffer=new Uint8Array(aBuffer);for(let i=0;i<hexString.length;i+=2)byteBuffer[i/2]=parseInt(hexString.slice(i,i+2),16);return new Blob([byteBuffer],{type:"image/png"})}(aluno.foto));else switch(aluno.sexo){case"M":imgURL="img/avatar_M.png";break;case"F":imgURL="img/avatar_F.png";break;default:imgURL="img/nophoto.png"}return angular.element("#sexoHeader").attr("src",imgURL),imgURL}(aluno))},function(reason){var keys=Object.keys(reason),str="";for(var k in keys)str+=reason[k]+"\n";Notification.error("[serviceAlunos.Aluno_Foto.handleFailure]\treason="+str)})}}]).factory("appModalService",["$ionicModal","$rootScope","$q","$injector","$controller",function($ionicModal,$rootScope,$q,$injector,$controller){return{show:function(templeteUrl,controller,parameters,options){var ctrlInstance,deferred=$q.defer(),modalScope=$rootScope.$new(),thisScopeId=modalScope.$id;return options=angular.extend({},{animation:"animated flipInX",hideDelay:1020,focusFirstInput:!1,backdropClickToClose:!0,hardwareBackButtonClose:!0,modalCallback:null},options),$ionicModal.fromTemplateUrl(templeteUrl,{scope:modalScope,animation:options.animation,focusFirstInput:options.focusFirstInput,backdropClickToClose:options.backdropClickToClose,hardwareBackButtonClose:options.hardwareBackButtonClose}).then(function(modal){modalScope.modal=modal,modalScope.openModal=function(){modalScope.modal.show()},modalScope.closeModal=function(result){deferred.resolve(result),modalScope.modal.hide()},modalScope.$on("modal.hidden",function(thisModal){if(thisModal.currentScope){var modalScopeId=thisModal.currentScope.$id;thisScopeId===modalScopeId&&(deferred.resolve(null),(scope=thisModal.currentScope).$destroy(),scope.modal&&scope.modal.remove())}var scope});var ctrlName,result,fragments,locals={$scope:modalScope,parameters:parameters},ctrlEval=(result={isControllerAs:!1,controllerName:"",propName:""},fragments=((ctrlName=controller)||"").trim().split(/\s+/),result.isControllerAs=3===fragments.length&&"as"===(fragments[1]||"").toLowerCase(),result.isControllerAs?(result.controllerName=fragments[0],result.propName=fragments[2]):result.controllerName=ctrlName,result);ctrlInstance=$controller(controller,locals),ctrlEval.isControllerAs&&(ctrlInstance.openModal=modalScope.openModal,ctrlInstance.closeModal=modalScope.closeModal),modalScope.modal.show().then(function(){modalScope.$broadcast("modal.afterShow",modalScope.modal)}),angular.isFunction(options.modalCallback)&&options.modalCallback(modal)},function(err){deferred.reject(err)}),deferred.promise}}}]),angular.module("MyApp").service("ContratoService",["Configs","SessionData","$resource","$q",function(Configs,SessionData,$resource,$q){this.consultaContrato=function(){let deferr=$q.defer();var aluno=SessionData.aluno.list[SessionData.aluno.selecionado];return aluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:alunoId/obterContratosAluno",{},{query:{method:"GET",isArray:!0}}).query({alunoId:encodeURIComponent(aluno.codAluno)},function(response){response?deferr.resolve(response):deferr.resolve(!1)}):deferr.resolve(!1),deferr.promise},this.obterContrato=function(contratoSelecionado=0){let deferr=$q.defer();return contratoSelecionado>0?$resource(Configs.getApiServer()+"/matricula/idContratoAluno/:idContratoAluno/getObterContratoAlunoImagem",{},{query:{method:"GET"}}).query({idContratoAluno:contratoSelecionado},function(response){response?deferr.resolve(response):deferr.resolve(!1)}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("ConversaoService",[function(){this.Moeda=function(input=0){return input=null==input?0:input,parseFloat(input).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}}]),angular.module("MyApp").service("HistoricoService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){var _msgErro={msgErro:"Error student undefined"};this.listarHistoricoSimplificado=function(){var _aluno=SessionData.aluno,_objAluno=_aluno?{codAluno:_aluno.list[_aluno.selecionado].codAluno}:{};let defer=$q.defer();return _aluno?$resource(Configs.getApiServer()+"/matricula/aluno/:codAluno/listarHistoricoSimplificado",{},{cache:!1,query:{method:"GET",isArray:!0,transformResponse:function(result){let disciplinas=[];return JSON.parse(result).forEach(function(disciplina){disciplinas.push({aluno:disciplina.aluno,ano:disciplina.ano,semestre:disciplina.semestre,periodo:null!=disciplina.semestre&&null!=disciplina.ano?disciplina.semestre+"/"+disciplina.ano:"",nomeDisciplina:disciplina.disciplina+" - "+disciplina.nomeDisciplina,disciplina:disciplina.disciplina,orderSerie:disciplina.orderSerie,serie:disciplina.serie,situacao:disciplina.situacao,notaFinal:disciplina.notaFinal,cargaHoraria:disciplina.cargaHoraria,creditos:disciplina.creditos})}),disciplinas}}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.listarCabecalhoHistorico=function(){var _aluno=SessionData.aluno,_objAluno=_aluno?{codAluno:_aluno.list[_aluno.selecionado].codAluno}:{};let defer=$q.defer();return _aluno?$resource(Configs.getApiServer()+"/matricula/aluno/:codAluno/listarCabecalhoHistorico",{},{cache:!1,query:{method:"GET"}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise}}]),angular.module("MyApp").service("UtilService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.obterEndereco=function(cep){let defer=$q.defer(),cepConsulta={cep:cep};return $resource(Configs.getApiServer()+"/pessoas/cep/:cep/obterEndereco",{},{cache:!1,query:{method:"GET"}}).query(cepConsulta,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.dateToString=function(data){if(null!==data&&data instanceof Date&&void 0!==data&&""!==data)var dataFormatada=data.getDate()+"/"+(data.getMonth()+1)+"/"+data.getFullYear();return dataFormatada},this.obterUF=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/listarUfs",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterNecessidadeEspecial=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/listarNecessidadesEspeciais",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterSexo=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/comum/sexos",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterOrgaoEmissor=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/listarOrgaosEmissores",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterEstadoCivil=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/obterEstadosCivis",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterProfissao=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/listarProfissoes",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterCredo=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/listarCredos",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterNacionalidade=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/listarNacionalidades",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterPais=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/listarPaises",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterMunicipios=function(municipio){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/lista_municipios",{},{cache:!1,query:{method:"POST",isArray:!0}}).query(municipio,function(response){defer.resolve(response)},function(err){defer.reject(err)}),defer.promise},this.obterEstadosEstrangeiros=function(codigoPais){let defer=$q.defer();if(codigoPais){let codigo={cod_pais:codigoPais};$resource(Configs.getApiServer()+"/pessoas/cod_pais/:cod_pais/lista_estados_estrangeiros",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(codigo,function(response){defer.resolve(response)},function(err){defer.reject(err)})}else defer.resolve([]);return defer.promise},this.obterMunicipiosEstrangeiros=function(municipio){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/lista_municipios_estrangeiros",{},{cache:!1,query:{method:"POST",isArray:!0}}).query(municipio,function(response){defer.resolve(response)},function(err){defer.reject(err)}),defer.promise},this.obterBairros=function(codigoMunicipio){let defer=$q.defer(),codigo={cod_municipio:codigoMunicipio};return $resource(Configs.getApiServer()+"/pessoas/cod_municipio/:cod_municipio/lista_bairros",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(codigo,function(response){defer.resolve(response)},function(err){defer.reject(err)}),defer.promise},this.obterCores=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/listarCores",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterInfoTelaCustomizada=function(pagina){let defer=$q.defer(),params={cod_aluno:SessionData.aluno.list[SessionData.aluno.selecionado].codAluno,nome_pagina:pagina};return $resource(Configs.getApiServer()+"/comum/aor/aceite",{},{cache:!1,query:{method:"GET"}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.aceitarTermoTelaCustomizada=function(dados){let defer=$q.defer();return $resource(Configs.getApiServer()+"/comum/aor/aceite",{},{cache:!1,query:{method:"POST"}}).query(dados,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obtemRecurso=function(dados){let defer=$q.defer();return $resource(Configs.getApiServer()+"/comum/recurso",{},{cache:!1,query:{method:"GET",isArray:!1}}).query({aplicacao:encodeURIComponent(dados.aplicacao),objeto:encodeURIComponent(dados.objeto)},function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterTiposEscola=function(){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/lista_tipos_escola",{},{cache:!1,query:{method:"GET"}}).query(function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.obterOpcoesOnline=function(){let defer=$q.defer(),params={pessoaLogada:SessionData.aluno.list[0].usuarioLogado.id,codAluno:SessionData.aluno.list[SessionData.aluno.selecionado].codAluno};return $resource(Configs.getApiServer()+"/pessoas/opcoes_online",{},{cache:!1,query:{method:"GET"}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}}]),angular.module("MyApp").service("AjusteBoletoService",["$resource","DownloadArquivo","$ionicLoading","$q","SessionData","Configs",function($resource,DownloadArquivo,$ionicLoading,$q,SessionData,Configs){var _aluno=SessionData.aluno,_msgErro={msgErro:"Error student undefined"};this.getListaBoletosDoAluno=function(){let defer=$q.defer();var _objAluno={codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno,codPessoa:SessionData.user.id};return _objAluno?$resource(Configs.getApiServer()+"/financeiro/cod_aluno/:codAluno/cod_pessoa/:codPessoa/lista_boletos_do_aluno",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.getVerificaMensagemProrrogaBoleto=function(codBoleto){let defer=$q.defer();var _objAluno={codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno,codPessoa:SessionData.aluno.list[_aluno.selecionado].id,codBoleto:codBoleto};return _objAluno?$resource(Configs.getApiServer()+"/financeiro/cod_aluno/:codAluno/cod_pessoa/:codPessoa/cod_boleto_antigo/:codBoleto/verifica_mensagem_prorroga_boleto",{},{cache:!1,query:{method:"GET"}}).get(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.getProrrogaVencimentoBoleto=function(codBoleto){let defer=$q.defer();var _objAluno={codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno,codPessoa:SessionData.aluno.list[_aluno.selecionado].id,codBoleto:codBoleto};return _objAluno?$resource(Configs.getApiServer()+"/financeiro/cod_boleto_antigo/:codBoleto/cod_aluno/:codAluno/prorroga_vencimento_boleto",{},{cache:!1,query:{method:"GET"}}).get(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.downloadBoleto=function(codBoleto){$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:1});let params={};params.url=Configs.getApiServer()+"/financeiro/cod_aluno/"+encodeURI(SessionData.aluno.list[0].codAluno)+"/cod_boleto/"+codBoleto+"/exibir_arquivo/false/download_boleto",params.type="application/pdf",params.nomeArquivo="Boleto_"+codBoleto+"_"+(new Date).getTime(),params.method="GET",DownloadArquivo.downloadArquivo(params)}}]),angular.module("MyApp").service("DisciplinasMatriculadasService",["$resource","DownloadArquivo","$ionicLoading","$q","SessionData","Configs",function($resource,DownloadArquivo,$ionicLoading,$q,SessionData,Configs){var _aluno=SessionData.aluno,_msgErro={msgErro:"Error student undefined"};this.obterDisciplinasMatriculadas=function(){let defer=$q.defer();var _objAluno={codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno,codPessoa:SessionData.aluno.list[_aluno.selecionado].id,periodo:null,ano:null};return _objAluno?$resource(Configs.getApiServer()+"/matricula/obterDisciplinasMatriculadasPreMatriculadas",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterPlanosDidaticos=function(disciplina){let defer=$q.defer();var _objRequest={codDisciplina:disciplina.codDisciplina,codTurma:disciplina.turma,periodo:SessionData.aluno.list[_aluno.selecionado].semestre,ano:disciplina.ano};return _objRequest?$resource(Configs.getApiServer()+"/matricula/disciplina/:codDisciplina/turma/:codTurma/ano/:ano/periodo/:periodo/listaPlanosDidaticosPedagogicos",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objRequest,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDetalhePlanosDidaticos=function(disciplina,codDisc){let defer=$q.defer();var _objRequest={codDisciplina:codDisc,codTurma:disciplina.turma,periodo:SessionData.aluno.list[_aluno.selecionado].semestre,ano:disciplina.ano};return _objRequest?$resource(Configs.getApiServer()+"/matricula/disciplina/:codDisciplina/turma/:codTurma/ano/:ano/periodo/:periodo/listaItensPlanosDidaticosPedagogicos",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objRequest,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterCriterioAvaliacao=function(params){let defer=$q.defer();var _objRequest={codDisciplina:params.codDisciplina,codTurma:params.turma,ano:params.ano,semestre:params.semestre};return _objRequest?$resource(Configs.getApiServer()+"/matricula/obter-criterio-avaliacao",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objRequest,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.listarAvaliacoesDocente=function(params){let defer=$q.defer();var _objRequest={codDocente:params.codDocente,codDisciplina:params.codDisciplina,codTurma:params.turma,ano:params.ano,semestre:params.semestre};return _objRequest?$resource(Configs.getApiServer()+"/matricula/listar-avaliacoes-docente",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objRequest,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.listarAgendaDiario=function(params){let defer=$q.defer();var _objRequest={codDisciplina:encodeURI(params.codDisciplina),codTurma:encodeURI(params.turma),ano:params.ano,semestre:params.semestre};return _objRequest?$resource(Configs.getApiServer()+"/matricula/listar-agenda-diario",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objRequest,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDetalhesAgenda=function(params){let defer=$q.defer();var _objRequest=params;return _objRequest?$resource(Configs.getApiServer()+"/matricula/listar-detalhes-agenda",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objRequest,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.listarNotasHistoricoMatriculaAlunoDisciplina=function(params){let defer=$q.defer();var _objRequest={aluno:encodeURI(params.aluno),ordem:"",ano:params.ano,semestre:params.semestre,disciplina:encodeURI(params.disciplina)};return _objRequest?$resource(Configs.getApiServer()+"/matricula/listar-notas-historico-matricula-aluno-disciplina",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objRequest,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise}}]),angular.module("MyApp").service("AlunoExtratoService",["$resource","$http","$q","$log","SessionData","Configs","FileSaver",function($resource,$http,$q,$log,SessionData,Configs,FileSaver){var aluno,_msgErro={msgErro:"Error student undefined"};function dadosValidosAluno(){return!!SessionData.aluno&&(aluno={codPessoa:SessionData.user.id,codAluno:encodeURIComponent(SessionData.aluno.list[SessionData.aluno.selecionado].codAluno)},!0)}this.obterAnoDividaAluno=function(){let defer=$q.defer();return dadosValidosAluno()?$resource(Configs.getApiServer()+"/financeiro/codAluno/:codAluno/listarAnosDividaAluno",{},{cache:!1,query:{method:"GET"}}).query(aluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterPeriodoDividaAluno=function(ano){let defer=$q.defer();if(dadosValidosAluno()){var params=aluno;params.ano=ano,$resource(Configs.getApiServer()+"/financeiro/codAluno/:codAluno/ano/:ano/listarPeriodosDividaAluno",{},{cache:!1,query:{method:"GET"}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)})}else defer.reject({_msgErro:_msgErro});return defer.promise},this.obterExtratoFinanceiro=function(dataInicial,dataFinal,ano,periodo){let deferr=$q.defer();dadosValidosAluno();var params=aluno;return params.ano=ano,params.periodo=periodo,params.dataVencimentoInicial=dataInicial,params.dataVencimentoFinal=dataFinal,$resource(Configs.getApiServer()+"/financeiro/obterExtratoFinanceiro",{},{query:{method:"POST",isArray:!1}}).query(params,function(response){response.status?deferr.reject():deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.obterExtratoFinanceiroPdf=function(dataInicial,dataFinal,ano,periodo){dadosValidosAluno();var params=aluno;params.ano=ano,params.periodo=periodo,params.dataVencimentoInicial=dataInicial,params.dataVencimentoFinal=dataFinal,$http.post(Configs.getApiServer()+"/financeiro/obterExtratoFinanceiroPdf",params,{responseType:"arraybuffer"}).then(response=>{!function(response){var contentDisposition=response.headers("content-disposition"),fileName=contentDisposition.substr(contentDisposition.indexOf("filename=")+9);fileName=fileName.replace(/\"/g,"");var contentType=response.headers("content-type"),blob=new Blob([response.data],{type:contentType});FileSaver.saveAs(blob,fileName)}(response)},data=>{$log.debug("Erro ao realizar o download do arquivo.")})}}]),angular.module("MyApp").service("DownloadArquivo",["$log","$resource","$q","$http","$ionicLoading","FileSaver","$translate",function($log,$resource,$q,$http,$ionicLoading,FileSaver,$translate){this.downloadArquivo=function(params){var key,value,url;key="url_download",value=params.url,(url=window.location.href).indexOf("?")>-1?url+="&"+encodeURI(key)+"="+encodeURI(value):url+="?"+encodeURI(key)+"="+encodeURI(value),window.location.href=url,$http({url:params.url,method:params.method,data:params.data,params:params.params,responseType:"arraybuffer"}).then(function(response){if($ionicLoading.hide(),200===response.status){var fileName=/.*filename=(.*)/g.exec(response.headers("content-disposition"))[1],type="application/pdf";let pontoInsercao=fileName.lastIndexOf(".");var extensao=fileName.substring(pontoInsercao,fileName.length);if(""!=params.alunoPublicacao&&null!=params.alunoPublicacao&&null!=params.alunoPublicacao&&(fileName=fileName.substring(0,pontoInsercao)+" [ALUNO_"+params.alunoPublicacao+"]"+fileName.substring(pontoInsercao,fileName.length)),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==params.tipoArquivo||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==params.tipoArquivo||"application/msword"==params.tipoArquivo||"application/excel"==params.tipoArquivo)type=params.tipoArquivo;else switch(extensao){case".docx":type="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case".xlsx":type="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case".word":type="application/msword";break;case".xls":type="application/excel";break;default:type="application/pdf"}var arquivo=new Blob([response.data],{type:type}),iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!(navigator.userAgent.indexOf("Safari")>-1);iOS||FileSaver.saveAs(arquivo,fileName)}if(window.location.href.indexOf("url_download")>-1){var regex=new RegExp("[?&]url_download(=([^#]*)|&|#|$)"),results=regex.exec(window.location.href);window.location.href=window.location.href.replace(results[0],"")}},function(response){if($ionicLoading.hide(),window.location.href.indexOf("url_download")>-1){var regex=new RegExp("[?&]url_download(=([^#]*)|&|#|$)"),results=regex.exec(window.location.href);window.location.href=window.location.href.replace(results[0],"")}})}}]),angular.module("MyApp").service("AvisoService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){var _aluno=SessionData.aluno,_msgErro={msgErro:"Error student undefined"};this.listarAvisos=function(){let defer=$q.defer();var _objAluno={codAluno:encodeURIComponent(SessionData.aluno.list[_aluno.selecionado].codAluno),codPessoa:SessionData.user.id};return _objAluno?$resource(Configs.getApiServer()+"/pessoas/:codPessoa/alunos/:codAluno/avisos",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterDadosAnexo=function(codAviso){let defer=$q.defer();return codAviso?$resource(Configs.getApiServer()+"/pessoas/cod_aviso/:codAviso/lista_anexo_aviso",{},{cache:!1,query:{method:"GET",isArray:!0}}).query({codAviso:codAviso},function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.listarUltAtividades=function(){let defer=$q.defer();var _objAluno={codAluno:encodeURIComponent(SessionData.aluno.list[_aluno.selecionado].codAluno),codPessoa:SessionData.aluno.list[_aluno.selecionado].id};return _objAluno?$resource(Configs.getApiServer()+"/pessoas/cod_pessoa/:codPessoa/cod_aluno/:codAluno/lista_ultimas_atividades",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.baixarAnexo=function(dadosAnexo){let defer=$q.defer(),params={codAviso:dadosAnexo.codAviso,codAnexo:dadosAnexo.codAnexo};return dadosAnexo?$resource(Configs.getApiServer()+"/pessoas/cod_aviso/:codAviso/cod_anexo/:codAnexo/baixar_anexo_aviso",{},{cache:!1,query:{method:"GET"}}).get(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.enviarLeituraAviso=function(params){let deferr=$q.defer();return params?$resource(Configs.getApiServer()+"/pessoas/insere-leitura-aviso?aviso="+params.aviso+"&pessoa="+params.pessoa,{},{query:{method:"POST",isArray:!1}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("AlunoBoletimV2Service",["$http","$resource","$q","SessionData","Configs",function($http,$resource,$q,SessionData,Configs){this.getDisciplinas=function(codPessoa,codAluno){let defer=$q.defer();return $http({url:Configs.getApiServer()+`/pessoas/${codPessoa}/alunos/${codAluno}/boletim`}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.getBoletim=function(codPessoa,codAluno){let defer=$q.defer();return $http({url:Configs.getApiServer()+`/pessoas/${codPessoa}/alunos/${codAluno}/boletim`}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.getProvasDisciplina=function(codAluno,codDisciplina,codTurma,ano,periodo){let defer=$q.defer();return $http({url:Configs.getApiServer()+`/pessoas/alunos/${codAluno}/disciplina/${codDisciplina}/turma/${codTurma}/ano/${ano}/periodo/${periodo}/provasBoletim`}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.getHistograma=function(ano,codAluno,codDisciplina,codProva,codTurma,semestre){let defer=$q.defer(),params={ano:ano,cod_aluno:codAluno,cod_disciplina:codDisciplina,cod_prova:codProva,cod_turma:encodeURI(codTurma),semestre:semestre};return params?$resource(Configs.getApiServer()+"/pessoas/histograma",params,{cache:!1,query:{method:"GET"}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.getFrequencia=function(ano,codAluno,codPessoa,codDisciplina,codTurma,semestre){let defer=$q.defer();return $http.pendingRequests.forEach(function(request){request.cancel&&request.data.codDisciplina!==codDisciplina&&request.cancel.resolve()}),$http({method:"POST",url:Configs.getApiServer()+"/pessoas/lista_detalhes_frequencia",timeout:defer.promise,cancel:defer,data:{ano:ano,codAluno:codAluno,codDisciplina:codDisciplina,codPessoa:codPessoa,codTurma:encodeURI(codTurma),semestre:semestre}}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.getUltimasNotas=function(codPessoa,codAluno,qtdNotas){let defer=$q.defer();return $http({url:Configs.getApiServer()+`/pessoas/${codPessoa}/alunos/${codAluno}/qtddNotas/${qtdNotas}/ultimasNotas`}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.ordenaProvas=function(provas){if(void 0!==provas){return provas.sort((p1,p2)=>p1.ordemProva-p2.ordemProva)}return provas},this.getProvasBoletim=function(codPessoa,codAluno){let defer=$q.defer();return $http({url:Configs.getApiServer()+`/pessoas/${codPessoa}/alunos/${codAluno}/disciplinasBoletim`}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise}}]),angular.module("MyApp").service("NeoAssistService",["Configs","SessionData","$resource","$q",NeoAssistService]),angular.module("MyApp").service("AvaliaService",["$resource","$ionicLoading","$q","SessionData","Configs","$http",function($resource,$ionicLoading,$q,SessionData,Configs,$http){var _aluno=SessionData.aluno;this.getListaQuestionarios=function(){let defer=$q.defer();var _objAluno={codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno};return _objAluno?$resource(Configs.getApiServer()+"/avaliacaoInstitucional/questionarios/codAluno/:codAluno/lista-questionarios",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.iniciarQuestionario=function(params){let defer=$q.defer(),objQuestionario={codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno,questionario:encodeURI(params.questionario),tipoQuestionario:encodeURI(params.tipo_questionario),aplicacao:encodeURI(params.aplicacao),formaExibicaoQuestionario:encodeURI(params.forma_exibicao),titulo:encodeURI(params.titulo),exibeResumo:params.EXIBE_PAG_RESUMO,obrigatorio:params.OBRIGATORIA};return objQuestionario?$resource(Configs.getApiServer()+"/avaliacaoInstitucional/questionarios/iniciar-questionario",{},{cache:!1,query:{method:"GET",isArray:!1}}).query(objQuestionario,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterQuestionarioASQ=function(params){let defer=$q.defer(),objQuestionario={codAvaliador:SessionData.aluno.list[_aluno.selecionado].codAluno,questionario:encodeURI(params.questionario),tipoQuestionario:encodeURI(params.tipoQuestionario),aplicacao:encodeURI(params.aplicacao),paginaAtual:params.paginaAtual};return objQuestionario?$resource(Configs.getApiServer()+"/avaliacaoInstitucional/questionarios/obter-avaliado-seguido-questoes",{},{cache:!1,query:{method:"GET",isArray:!1}}).query(objQuestionario,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterQuestionarioACG=function(params){let defer=$q.defer(),objQuestionario={codAvaliador:SessionData.aluno.list[_aluno.selecionado].codAluno,questionario:encodeURI(params.questionario),tipoQuestionario:encodeURI(params.tipoQuestionario),aplicacao:encodeURI(params.aplicacao),paginaAtual:params.paginaAtual};return objQuestionario?$resource(Configs.getApiServer()+"/avaliacaoInstitucional/questionarios/obter-avaliacao-caixa-grupos",{},{cache:!1,query:{method:"GET",isArray:!1}}).query(objQuestionario,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterQuestionarioQSA=function(params){let defer=$q.defer(),objQuestionario={codAvaliador:SessionData.aluno.list[_aluno.selecionado].codAluno,questionario:encodeURI(params.questionario),tipoQuestionario:encodeURI(params.tipoQuestionario),aplicacao:encodeURI(params.aplicacao),paginaAtual:params.paginaAtual};return objQuestionario?$resource(Configs.getApiServer()+"/avaliacaoInstitucional/questionarios/obter-questoes-seguidas-avaliados",{},{cache:!1,query:{method:"GET",isArray:!1}}).query(objQuestionario,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.responderQuestoesPagina=function(params){let defer=$q.defer();return $http({method:"POST",url:Configs.getApiServer()+"/avaliacaoInstitucional/questionarios/responder-questoes-pagina",headers:{"Content-Type":"application/json; charset=UTF-8"},data:params}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.enviarRespostasQuestionario=function(params){let defer=$q.defer();return $http({method:"POST",url:Configs.getApiServer()+"/avaliacaoInstitucional/questionarios/enviar-respostas-questionario",headers:{"Content-Type":"application/json; charset=UTF-8"},data:params}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.obterIndiceRendimento=function(){let defer=$q.defer();var _objAluno={codPessoa:SessionData.aluno.list[_aluno.selecionado].id,codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno};return _objAluno?$resource(Configs.getApiServer()+"/matricula/codPessoa/:codPessoa/codAluno/:codAluno/obter-indice-aluno",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise}}]),angular.module("MyApp").service("FichaMedicaService",["Configs","$resource","$q","$http",function(Configs,$resource,$q,$http){this.obterFichaMedica=function(codAluno){let deferr=$q.defer();return codAluno?$resource(Configs.getApiServer()+"/pessoas/cod_aluno/:codAluno/obter-ficha-medica",{},{cache:!1,query:{method:"GET",isArray:!1}}).query({codAluno:codAluno},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.salvarFichaMedica=function(oldFicha,newFicha){let defer=$q.defer(),params={oldFicha:oldFicha,newFicha:newFicha};return $http({method:"POST",url:Configs.getApiServer()+"/pessoas/alterar-ficha-medica",headers:{"Content-Type":"application/json; charset=UTF-8"},data:params}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise}}]),angular.module("MyApp").service("AtividadesComplementaresService",["Configs","$resource","$q","$http",function(Configs,$resource,$q,$http){let methodGetObject={cache:!1,query:{method:"GET",isArray:!1}},methodGetArray={cache:!1,query:{method:"GET",isArray:!0}};this.obterAtividades=function(aluno={}){let deferr=$q.defer(),objQuery={};return objQuery.idPessoa=aluno.id,objQuery.idAluno=aluno.codAluno,aluno.codAluno&&aluno.id?$resource(Configs.getApiServer()+"/matricula/listar-atividades-complementares",{},methodGetObject).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterAtividadesPorTipo=function(aluno={}){let deferr=$q.defer(),objQuery={};return objQuery.idAluno=aluno.codAluno,objQuery.idPessoa=aluno.id,aluno.codAluno&&aluno.id?$resource(Configs.getApiServer()+"/matricula/listar-atividades-complementares-exigiveis",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("AtividadesExtensaoService",["Configs","$resource","$q","$http",function(Configs,$resource,$q,$http){let methodGetObject={cache:!1,query:{method:"GET",isArray:!1}};this.obterAtividadesExtensao=function(aluno={}){let deferr=$q.defer(),objQuery={};return objQuery.idAluno=aluno.codAluno,aluno.codAluno&&aluno.id?$resource(Configs.getApiServer()+"/matricula/listar-atividades-extensao",{},methodGetObject).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("PublicacoesService",["Configs","$resource","$q","$http","DownloadArquivo",function(Configs,$resource,$q,$http,DownloadArquivo){let methodGetObject={cache:!1,query:{method:"GET",isArray:!1}},methodGetArray={cache:!1,query:{method:"GET",isArray:!0}};this.obterInformacoesTurma=function(disciplina={}){let deferr=$q.defer(),objQuery={ano:disciplina.ano,codDisciplina:disciplina.codDisciplina,semestre:disciplina.semestre,turma:disciplina.turma};return $resource(Configs.getApiServer()+"/matricula/obter-informacoes-turma",{},methodGetObject).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterPublicacoes=function(disciplina={},aluno={},tipo="docente"){let deferr=$q.defer(),objQuery={ano:disciplina.ano,codAluno:aluno.codAluno,codDisciplina:disciplina.codDisciplina,semestre:disciplina.semestre,tipo:tipo,turma:disciplina.turma};return aluno.codAluno&&aluno.id?$resource(Configs.getApiServer()+"/matricula/obter-lista-publicacoes",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.downloadPublicacao=function(idPublicacao,tipo,alunoId,tipoArquivo){let params={};params.url=Configs.getApiServer()+"/matricula/idPublicacao/"+idPublicacao+"/tipo/"+tipo+"/download-publicacao",params.method="GET",params.alunoPublicacao=alunoId,params.tipoArquivo=tipoArquivo,DownloadArquivo.downloadArquivo(params)}}]),angular.module("MyApp").service("FinanceiroService",["$resource","DownloadArquivo","$ionicLoading","$q","SessionData","Configs",function($resource,DownloadArquivo,$ionicLoading,$q,SessionData,Configs){var _aluno=SessionData.aluno,_msgErro={msgErro:"Error student undefined"};this.listarNotasFiscaisEletronicas=function(){let defer=$q.defer();var _objAluno={codAluno:SessionData.aluno.list[_aluno.selecionado].codAluno,codPessoa:SessionData.aluno.list[_aluno.selecionado].id};return _objAluno?$resource(Configs.getApiServer()+"/financeiro/codPessoa/:codPessoa/codAluno/:codAluno/listar-notas-fiscais-eletronicas",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.obterLinkNota=function(idCobrancaNF){let defer=$q.defer();var _nota={idCobrancaNF:idCobrancaNF};return _nota?$resource(Configs.getApiServer()+"/financeiro/:idCobrancaNF/obter-link-nota",{},{cache:!1,query:{method:"GET",isArray:!1}}).query(_nota,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise}}]),angular.module("MyApp").service("ProcessoSeletivoService",["Configs","$resource","$q","$http",function(Configs,$resource,$q,$http){let methodGetObject={cache:!1,query:{method:"GET",isArray:!1}},methodGetArray={cache:!1,query:{method:"GET",isArray:!0}};this.obterDadosProcessoSeletivo=function(aluno={}){let deferr=$q.defer(),objQuery={codPessoa:aluno.id,codAluno:aluno.codAluno};return $resource(Configs.getApiServer()+"/pessoas/cod_pessoa/:codPessoa/cod_aluno/:codAluno/obter-dados-processo-seletivo",{},methodGetObject).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterProvasProcessoSeletivo=function(dadosProcesso={}){let deferr=$q.defer(),objQuery={ano:dadosProcesso.ano,codAluno:dadosProcesso.codAluno,codPessoa:dadosProcesso.codPessoa,semestre:dadosProcesso.semestre};return dadosProcesso.codAluno&&dadosProcesso.codPessoa?$resource(Configs.getApiServer()+"/pessoas/obter-lista-provas-processo-seletivo",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("PosInformacoesService",["Configs","SessionData","$resource","$q","$http",function(Configs,SessionData,$resource,$q,$http){let methodGetObject={cache:!1,query:{method:"GET",isArray:!1}},methodGetArray={cache:!1,query:{method:"GET",isArray:!0}};var objRequest={codAluno:encodeURI(SessionData.aluno.list[SessionData.aluno.selecionado].codAluno)};this.obterDadosPosGraduacao=function(){let deferr=$q.defer(),objQuery=objRequest;return objRequest.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/obter-dados-pos-graduacao",{},methodGetObject).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarOcorrencias=function(aluno={}){let deferr=$q.defer(),objQuery=objRequest;return objQuery.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/listar-ocorrencias",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterDadosOrientadores=function(aluno={}){let deferr=$q.defer(),objQuery=objRequest;return objQuery.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/listar-orientadores",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterDadosProficiencia=function(aluno={}){let deferr=$q.defer(),objQuery=objRequest;return objQuery.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/listar-proficiencias",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterQualificacoes=function(){let deferr=$q.defer(),objQuery=objRequest;return objQuery.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/obter-qualificacoes",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterBancaQualificacao=function(idQualificacao={}){let deferr=$q.defer(),objQuery=objRequest;return objQuery.idQualificacao=idQualificacao,objQuery.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/idQualificacao/:idQualificacao/obter-banca-qualificacao",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterDefesas=function(){let deferr=$q.defer(),objQuery=objRequest;return objQuery.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/listar-defesas",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterBancaDefesa=function(codDefesa={}){let deferr=$q.defer(),objQuery=objRequest;return objQuery.codDefesa=codDefesa,objQuery.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/codDefesa/:codDefesa/listar-banca-defesa",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.obterDadosAgencias=function(){let deferr=$q.defer(),objQuery=objRequest;return objQuery.codAluno?$resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/listar-financiadores",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("TrabalhosService",["Configs","$resource","$q","$http","DownloadArquivo","Notification",function(Configs,$resource,$q,$http,DownloadArquivo,Notification){let methodGetArray={cache:!1,query:{method:"GET",isArray:!0}};this.obterTrabalhos=function(aluno={}){let deferr=$q.defer(),objQuery={codAluno:aluno.codAluno};return $resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/obter-trabalhos",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterHistoricoTrabalhos=function(aluno={}){let deferr=$q.defer(),objQuery={codAluno:aluno.codAluno};return $resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/obter-historico-trabalhos",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.uploadArquivo=function(file,base64Data){let deferr=$q.defer();var req={method:"POST",url:Configs.getApiServer()+"/matricula/enviar-trabalho/",headers:{"Content-Type":"application/json"},data:{contentType:file.type,fileData:base64Data,fileName:file.name,codArquivoAnterior:null}};return $http(req).then(function(resp){deferr.resolve(resp)},function(resp){deferr.reject(),Notification.error("Erro ao carregar arquivo: "+resp.status)}),deferr.promise},this.incluirTrabalho=function(trabalho,codArquivo){let deferr=$q.defer();var req={method:"POST",url:Configs.getApiServer()+"/matricula/incluir-trabalho/",headers:{"Content-Type":"application/json"},data:{codAluno:trabalho.aluno,codDisciplina:trabalho.disciplina,codTurma:trabalho.turma,ano:trabalho.ano,periodo:trabalho.semestre,codProva:trabalho.prova,titulo:"",descricao:"",codArquivo:codArquivo}};return $http(req).then(function(resp){deferr.resolve(resp)},function(resp){deferr.reject()}),deferr.promise},this.downloadTrabalhoSubmissao=function(trabalho){let params={};params.data={codAluno:trabalho.aluno,codDisciplina:trabalho.disciplina,codTurma:trabalho.turma,ano:trabalho.ano,periodo:trabalho.semestre,codProva:trabalho.prova},params.url=Configs.getApiServer()+"/matricula/download-trabalho",params.method="POST",DownloadArquivo.downloadArquivo(params)},this.downloadTrabalhoHistorico=function(trabalho,aluno){let params={};params.data={codAluno:aluno.codAluno,codDisciplina:trabalho.disciplina,codTurma:trabalho.turma,ano:trabalho.ano,periodo:trabalho.semestre,codProva:trabalho.prova},params.url=Configs.getApiServer()+"/matricula/download-historico-trabalho",params.method="POST",DownloadArquivo.downloadArquivo(params)}}]),angular.module("MyApp").service("PosTCCService",["Configs","$resource","$q","$http","DownloadArquivo","Notification",function(Configs,$resource,$q,$http,DownloadArquivo,Notification){let methodGetObject={cache:!1,query:{method:"GET",isArray:!1}},methodGetArray={cache:!1,query:{method:"GET",isArray:!0}};this.obterTrabalhoDeConclusao=function(aluno={}){let deferr=$q.defer(),objQuery={codAluno:aluno.codAluno};return $resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/obter-trabalho-conclusao",{},methodGetObject).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterAreasPesquisas=function(aluno={}){let deferr=$q.defer(),objQuery={codAluno:aluno.codAluno};return $resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/listar-areasPesquisa-trabalho-conclusao",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterPatrocinadores=function(aluno={}){let deferr=$q.defer(),objQuery={codAluno:aluno.codAluno};return $resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/listar-patrocinadores",{},methodGetArray).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.urlTCC=function(aluno={}){let deferr=$q.defer(),objQuery={codAluno:aluno.codAluno};return $resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/urlTcc",{},methodGetObject).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterArquivoTCC=function(aluno={}){let deferr=$q.defer(),objQuery={codAluno:aluno.codAluno};return $resource(Configs.getApiServer()+"/matricula/codAluno/:codAluno/obter-arquivoTCC",{},methodGetObject).query(objQuery,function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterVinculoEmpregaticio=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/matricula/listar-vinculo-empregaticio",{},methodGetArray).query({},function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterTiposEmpresas=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/matricula/listar-tipos-empresas",{},methodGetArray).query({},function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterExpectativaAtuacao=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/matricula/listar-expectativa-atuacao",{},methodGetArray).query({},function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.obterGrandesAreas=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/matricula/listar-grandes-areas",{},methodGetArray).query({},function(response){deferr.resolve(response)},function(response){deferr.reject()}),deferr.promise},this.inserirAlterarTCC=function(tcc){let defer=$q.defer(),params={...tcc};return $http({method:"POST",url:Configs.getApiServer()+"/matricula/inserir-alterarTCC",headers:{"Content-Type":"application/json; charset=UTF-8"},data:params}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.inserirPatrocinador=function(patrocinadores){let defer=$q.defer(),params=patrocinadores;return $http({method:"POST",url:Configs.getApiServer()+"/matricula/inserir-patrocinador",headers:{"Content-Type":"application/json; charset=UTF-8"},data:params}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.excluirPatrocinador=function(patrocinadores){let defer=$q.defer(),params=patrocinadores;return $http({method:"POST",url:Configs.getApiServer()+"/matricula/excluir-patrocinador",headers:{"Content-Type":"application/json; charset=UTF-8"},data:params}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.inserirAlterarAreasTCC=function(areasTcc){let defer=$q.defer(),params={...areasTcc};return $http({method:"POST",url:Configs.getApiServer()+"/matricula/inserir-alterar-areasTCC",headers:{"Content-Type":"application/json; charset=UTF-8"},data:params}).success(function(retorno){defer.resolve(retorno)}).error(function(erro){defer.reject(erro)}),defer.promise},this.enviarArquivoTCC=function(aluno={},titulo,file,base64Data){let deferr=$q.defer(),arquivo={codAluno:aluno.codAluno,titulo:titulo,contentType:file.type,fileData:base64Data,fileName:file.name};var req={method:"POST",url:Configs.getApiServer()+"/matricula/enviar-arquivoTCC/",headers:{"Content-Type":"application/json"},data:{...arquivo}};return $http(req).then(function(resp){deferr.resolve(resp)},function(resp){deferr.reject(),Notification.error("Erro ao carregar arquivo: "+resp.status)}),deferr.promise},this.downloadPublicacao=function(idPublicacao,tipo){let params={};params.url=Configs.getApiServer()+"/matricula/idPublicacao/"+idPublicacao+"/tipo/"+tipo+"/download-publicacao",params.method="GET",DownloadArquivo.downloadArquivo(params)}}]),angular.module("MyApp").service("AORPaginaRedirectService",["Configs","SessionData","$resource","$q",AORPaginaRedirectService]),angular.module("MyApp").service("EstouChegandoService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){var _aluno=SessionData.aluno,_msgErro={msgErro:"Error student undefined"};this.listarAlunosPorPessoa=function(){let defer=$q.defer();var _objAluno={codPessoa:SessionData.aluno.list[_aluno.selecionado].id};return _objAluno?$resource(Configs.getApiServer()+"/pessoas/:codPessoa/alunos",{},{cache:!1,query:{method:"GET",isArray:!0}}).query(_objAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.localizacaoInstituicao=function(codAluno){let defer=$q.defer();return codAluno?$resource(Configs.getApiServer()+"/pessoas/aluno/"+codAluno+"/localizacao-instituicao",{},{cache:!1,query:{method:"GET"}}).query(codAluno,function(result){defer.resolve(result)},function(err){defer.reject(err)}):defer.reject({_msgErro:_msgErro}),defer.promise},this.contactarInstituicao=function(status){let deferr=$q.defer();return status?$resource(Configs.getApiServer()+"/pessoas/contactar-instituicao",{},{query:{method:"POST"}}).query(status,function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),app.userEvents.lixoButtonClick=(app.directive("validFile",function(){return{require:"ngModel",link:function(scope,el,attrs,ngModel){el.bind("change",function(){scope.$apply(function(){ngModel.$setViewValue(el.val()),ngModel.$render()})})}}}),app.directive("numbersOnly",function(){return{require:"ngModel",link:function(scope,element,attr,ngModelCtrl){ngModelCtrl.$parsers.push(function(text){if(text){var transformedInput=text.replace(/[^0-9]/g,"");return transformedInput!==text&&(ngModelCtrl.$setViewValue(transformedInput),ngModelCtrl.$render()),transformedInput}})}}}),app.directive("pwCheck",[function(){"use strict";return{require:"ngModel",link:function(scope,elem,attrs,ctrl){var firstPassword="#"+attrs.pwCheck;elem.add(firstPassword).on("keyup",function(){scope.$apply(function(){var v=elem.val()===$(firstPassword).val();ctrl.$setValidity("pwmatch",v)})})}}}]).directive("onlyNumbers",function(){return{require:"ngModel",link:function(scope,elem,attr,ngModel){ngModel.$parsers.unshift(function(value){if(value){let hasLetters=value.match(/[0-9]+/g),valid=!!hasLetters&&hasLetters.length>0&&hasLetters[0].length==value.length;return ngModel.$setValidity("onlyLetters",valid),valid?value:void 0}return value}),ngModel.$formatters.unshift(function(value){if(value){let hasLetters=value.match(/[0-9]+/g),valid=!!hasLetters&&hasLetters.length>0&&hasLetters[0].length==value.length;ngModel.$setValidity("onlyLetters",valid)}return value})}}}).directive("milisecsToDate",function(){return{restrict:"A",require:"?ngModel",link:function(scope,elem,attr,ngModel){ngModel.$formatters.push(function(v){return v&&!isNaN(v)?new Date(v):void 0}),ngModel.$parsers.push(function(v){if(v instanceof Date)return v.getTime()})}}}).directive("disableSideMenu",["$ionicSideMenuDelegate",function($ionicSideMenuDelegate){return{restrict:"A",link:function(scope,element){element.on("touchstart",function(){scope.$apply(function(){$ionicSideMenuDelegate.canDragContent(!1)})}),element.on("touchend touchcancel",function(){scope.$apply(function(){$ionicSideMenuDelegate.canDragContent(!0)})})}}}]).directive("creditCardMonth",["$timeout",function($timeout){return{require:"ngModel",link:function(scope,elem,attr,ngModel){ngModel.$parsers.unshift(function(value){let year=scope.cardForm.anoSelected;if(value){let currentMonth=moment().format("MM"),currentYear=moment().format("YYYY"),valid=parseInt(value.valor)>=parseInt(currentMonth);!valid&&year.$viewValue&&(valid=parseInt(year.$viewValue.descricao)>parseInt(currentYear)),ngModel.$setValidity("month",valid),ngModel.$valid=valid,ngModel.$invalid=!valid,year.$setValidity("year",valid),year.$valid=valid,year.$invalid=!valid}return value}),ngModel.$formatters.unshift(function(value){let year=scope.cardForm.anoSelected;if(value){let currentMonth=moment().format("MM"),currentYear=moment().format("YYYY"),valid=parseInt(value.valor)>=parseInt(currentMonth);!valid&&year.$viewValue&&(valid=parseInt(year.$viewValue.descricao)>parseInt(currentYear)),ngModel.$setValidity("month",valid),ngModel.$valid=valid,ngModel.$invalid=!valid,year.$setValidity("year",valid),year.$valid=valid,year.$invalid=!valid}return value})}}}]).directive("creditCardYear",["$timeout",function($timeout){return{require:"ngModel",link:function(scope,elem,attr,ngModel){ngModel.$parsers.unshift(function(value){let mes=scope.cardForm.mesSelected;if(value&&mes.$viewValue){let currentMonth=moment().format("MM"),currentYear=moment().format("YY"),valid=parseInt(mes.$viewValue.valor)>=parseInt(currentMonth);valid||(valid=parseInt(value.valor)>parseInt(currentYear)),ngModel.$setValidity("year",valid),ngModel.$valid=valid,ngModel.$invalid=!valid,mes.$setValidity("month",valid),mes.$valid=valid,mes.$invalid=!valid}return value}),ngModel.$formatters.unshift(function(value){let mes=scope.cardForm.mesSelected;if(value&&mes.$viewValue){let currentMonth=moment().format("MM"),currentYear=moment().format("YY"),valid=parseInt(mes.$viewValue.valor)>=parseInt(currentMonth);valid||(valid=parseInt(value.valor)>parseInt(currentYear)),ngModel.$setValidity("year",valid),ngModel.$valid=valid,ngModel.$invalid=!valid,mes.$setValidity("month",valid),mes.$valid=valid,mes.$invalid=!valid}return value})}}}]).directive("fingerPrintGetNet",function(){return{restrict:"E",template:"<div></div>",link:function(scope,elem,attr){for(;document.getElementsByClassName("iframe-getnet").length>0;)document.body.removeChild(document.getElementsByClassName("iframe-getnet")[0]);var iframe=document.createElement("iframe");iframe.classList.add("iframe-getnet"),iframe.src=`https://h.online-metrix.net/fp/tags?org_id=${scope.$eval(attr.orgid)}&session_id=${scope.$eval(attr.sessionid)}`,iframe.style="width: 100px; height: 100px; border: 0; position:absolute; top: -5000px;",iframe.onload=function(){window.setTimeout(function(){document.body.removeChild(iframe)},5e3)},document.body.appendChild(iframe)}}}).directive("cssAltoContraste",["UtilService",function(UtilService){return function(scope,el,attrs){scope.$on("altoContraste",function(){var cssId="css-alto-contraste",styleId="style-alto-contraste";if(scope.isAtivoAltoContraste){if(!(cssAtivo=document.getElementById(cssId))){var head=document.getElementsByTagName("head")[0],link=document.createElement("link");link.id=cssId,link.rel="stylesheet",link.href="css/alto-contraste.css",head.appendChild(link)}let paramsObtemRecursoAltoContraste={aplicacao:"ALUNO_RESP_ACESSIBILIDADE",objeto:"CSS_ALTO_CONTRASTE"};UtilService.obtemRecurso(paramsObtemRecursoAltoContraste).then(data=>{if(null!=data.texto&&!document.getElementById(styleId)){var style=document.createElement("style");style.id=styleId,style.innerHTML=data.texto,$("body").append(style)}})}else{var cssAtivo;(cssAtivo=document.getElementById(cssId))&&cssAtivo.remove();var estiloAtivo=document.getElementById(styleId);estiloAtivo&&estiloAtivo.remove()}})}}]).directive("cssCustom",function(){return function(scope,el,attrs){scope.cssCustom.then(data=>{var style=document.createElement("style");style.innerHTML=data.texto,$("body").append(style)})}}).directive("cssLoginCustom",function(){return function(scope,el,attrs){scope.cssLoginCustom.then(data=>{var style=document.createElement("style");style.innerHTML=data.texto,$("body").append(style)})}}).directive("logoLoginCustom",function(){return function(scope,el,attrs){scope.logoLoginCustom.then(data=>{if(null!==data.imagem){$(".login-logo-custom").length&&$(".login-logo-custom").remove();var img=document.createElement("img");img.src="data:image/png;base64,"+btoa(data.imagem.match(/\w{2}/g).map(function(a){return String.fromCharCode(parseInt(a,16))}).join("")),img.className="login-logo-custom",$("logo-login-custom").append(img),scope.usaLogoLoginCustom=!1}else scope.usaLogoLoginCustom=!0})}}).directive("logoCustom",function(){return function(scope,el,attrs){scope.logoCustom.then(data=>{if(null!==data.imagem){var img=document.createElement("img");img.src="data:image/png;base64,"+btoa(data.imagem.match(/\w{2}/g).map(function(a){return String.fromCharCode(parseInt(a,16))}).join("")),img.className="side-menu-marca-custom",$("logo-custom").append(img),scope.usaLogoCustom=!0}else scope.usaLogoCustom=!1})}}).directive("faviconCustom",function(){return function(scope,el,attrs){scope.faviconCustom.then(data=>{if(null!==data.imagem){var img=document.createElement("img");img.src="data:image/png;base64,"+btoa(data.imagem.match(/\w{2}/g).map(function(a){return String.fromCharCode(parseInt(a,16))}).join("")),img.className="toggle-left-side-bar-image-custom",$("favicon-custom").append(img),scope.usaFaviconCustom=!0}else scope.usaFaviconCustom=!1})}}),!0),function($app){$app.filter("tel",function(){return function(input){var str=input+"";return str=11===(str=str.replace(/\D/g,"")).length?str.replace(/^(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):str.replace(/^(\d{2})(\d{4})(\d{4})/,"($1) $2-$3")}}),$app.filter("cep",function(){return function(input){var str=input+"";return str=(str=str.replace(/\D/g,"")).replace(/^(\d{2})(\d{3})(\d)/,"$1.$2-$3")}}),$app.filter("filtroHtml",function($sce){return function(html){return $sce.trustAsHtml(html)}}),$app.filter("cnpj",function(){return function(input){var str=input+"";return str=(str=(str=(str=(str=str.replace(/\D/g,"")).replace(/^(\d{2})(\d)/,"$1.$2")).replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3")).replace(/\.(\d{3})(\d)/,".$1/$2")).replace(/(\d{4})(\d)/,"$1-$2")}}),$app.filter("encodeURIComponent",function(){return function(input){return encodeURIComponent(input)}}),$app.filter("dateToTimestamp",function(){return function(input){return input&&""!==input.trim()?new Date(input).getTime():input}}),$app.filter("milisecsToDate",function(){return function(input){return input&&null!==input.trim()?new Date(input):input}}),$app.filter("removeYearFromDate",function(){return function(input){return input&&""!==input.trim()?input.match(/[0-9][0-9]\/[0-9][0-9]/g).toString():input}}),$app.filter("number",["ConversaoService",function(ConversaoService){return function(input=0){return ConversaoService.Moeda(input)}}]),$app.filter("startFrom",function(){return(input,start)=>(start=+start,input?input.slice(start):[])})}(app);const NEO_ASSIST_DIV="neoassist";var neoIES="",neoNomeIES="",neoAluno="",neoRA="",neoMail="",loadNeoAssist=function(instituicao,callback){void 0!==instituicao&&"function"==typeof callback&&setTimeout(callback,5e3)};angular.module("MyApp").service("MinhasTarefasService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.listarTarefasAluno=function(codAluno){let deferr=$q.defer();return codAluno?$resource(Configs.getApiServer()+"/npj/tarefas-aluno?aluno=:codAluno",{},{query:{method:"GET",isArray:!0}}).query({codAluno:codAluno},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarComentariosTarefa=function(idTarefa){let deferr=$q.defer();return idTarefa?$resource(Configs.getApiServer()+"/npj/comentarios-tarefa?idCasoTarefa=:idTarefa",{},{query:{method:"GET",isArray:!0}}).query({idTarefa:idTarefa},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.incluirComentario=function(comentarioTarefa){let deferr=$q.defer();if(comentarioTarefa){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/insere-comentario-tarefa",{},{query:{method:"POST",cache:!1}}).query(comentarioTarefa,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise},this.excluirComentarioTarefa=function(idComentario){const codAluno=SessionData.aluno.list[SessionData.aluno.selecionado].codAluno;let deferr=$q.defer();return idComentario?$resource(Configs.getApiServer()+"/npj/comentario/:idComentario/aluno/:codAluno",{},{query:{method:"DELETE",isArray:!0}}).query({idComentario:idComentario,codAluno:codAluno},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.uploadDocumentoPessoa=function(data){let deferr=$q.defer();if(data){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/upload_documento_pessoa",{},{query:{method:"POST",cache:!1}}).query(data,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise},this.incluirDocumentoPessoa=function(tarefaDTO){let deferr=$q.defer();if(tarefaDTO){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/altera-tarefa",{},{query:{method:"POST",cache:!1}}).query(tarefaDTO,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise},this.obterModelosDoc=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/npj/obter-modelos-doc-tarefa",{},{query:{method:"GET",isArray:!0}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise}}]),angular.module("MyApp").service("MeusCasosService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){}]),angular.module("MyApp").service("CasosService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.listarCasos=function(codAluno){let deferr=$q.defer();return codAluno?$resource(Configs.getApiServer()+"/npj/casos?aluno=:codAluno",{},{query:{method:"GET",isArray:!0}}).query({codAluno:codAluno},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.editarCaso=function(casoDTO){let deferr=$q.defer();if(casoDTO){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/altera-caso",{},{query:{method:"POST",cache:!1}}).query(casoDTO,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("RequeridoService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.buscarRequerido=function(idRequerido){let deferr=$q.defer();return idRequerido?$resource(Configs.getApiServer()+"/npj/requerido?idRequerido=:idRequerido",{},{query:{method:"GET",isArray:!1}}).query({idRequerido:idRequerido},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("RequerentesService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.buscarRequerentes=function(idCaso){let deferr=$q.defer();return idCaso?$resource(Configs.getApiServer()+"/npj/requerentes-caso?idCaso=:idCaso",{},{query:{method:"GET",isArray:!0}}).query({idCaso:idCaso},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.buscarDocumentosRequerentes=function(idCasoRequerente){let deferr=$q.defer();return idCasoRequerente?$resource(Configs.getApiServer()+"/npj/documentos-requerente?idCasoRequerente=:idCasoRequerente",{},{query:{method:"GET",isArray:!0}}).query({idCasoRequerente:idCasoRequerente},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("AtendimentosService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.buscarAtendimentos=function(idCaso){let deferr=$q.defer();return idCaso?$resource(Configs.getApiServer()+"/npj/atendimentos-caso?idCaso=:idCaso",{},{query:{method:"GET",isArray:!0}}).query({idCaso:idCaso},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.incluirAtendimento=function(atendimentoDTO){let deferr=$q.defer();if(atendimentoDTO){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/insere-atendimento",{},{query:{method:"POST",cache:!1}}).query(atendimentoDTO,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("TarefasService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.buscarTarefas=function(idCaso){let deferr=$q.defer();return idCaso?$resource(Configs.getApiServer()+"/npj/tarefas-caso?idCaso=:idCaso",{},{query:{method:"GET",isArray:!0}}).query({idCaso:idCaso},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.incluirTarefa=function(tarefaDTO){let deferr=$q.defer();if(tarefaDTO){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/insere-tarefa-caso",{},{query:{method:"POST",cache:!1}}).query(tarefaDTO,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise},this.obterModelosDoc=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/npj/obter-modelos-doc-tarefa",{},{query:{method:"GET",isArray:!0}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.uploadDocumentoPessoa=function(data){let deferr=$q.defer();if(data){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/upload_documento_pessoa",{},{query:{method:"POST",cache:!1}}).query(data,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("AnexosService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.buscarAnexos=function(idCaso){let deferr=$q.defer();return idCaso?$resource(Configs.getApiServer()+"/npj/anexos-caso?idCaso=:idCaso",{},{query:{method:"GET",isArray:!0}}).query({idCaso:idCaso},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.uploadDocumento=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/upload_documento_pessoa/",{},{query:{method:"POST",cache:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.incluirAnexo=function(anexoDTO){let deferr=$q.defer();if(anexoDTO){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/insere-anexo-processo",{},{query:{method:"POST",cache:!1}}).query(anexoDTO,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("AndamentosService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.buscarAndamentos=function(idCaso){let deferr=$q.defer();return idCaso?$resource(Configs.getApiServer()+"/npj/andamentos-caso?idCaso=:idCaso",{},{query:{method:"GET",isArray:!0}}).query({idCaso:idCaso},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.incluirAndamento=function(andamentoDTO){let deferr=$q.defer();if(andamentoDTO){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/insere-andamento",{},{query:{method:"POST",cache:!1}}).query(andamentoDTO,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("PeticoesService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.buscarPeticoes=function(idCaso){let deferr=$q.defer();return idCaso?$resource(Configs.getApiServer()+"/npj/peticoes-caso?idCaso=:idCaso",{},{query:{method:"GET",isArray:!0}}).query({idCaso:idCaso},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.uploadDocumento=function(params){let defer=$q.defer();return $resource(Configs.getApiServer()+"/pessoas/upload_documento_pessoa/",{},{query:{method:"POST",cache:!1}}).query(params,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise},this.incluirPeticao=function(peticaoDTO){let deferr=$q.defer();if(peticaoDTO){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/insere-peticao",{},{query:{method:"POST",cache:!1}}).query(peticaoDTO,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("AgendaService",["$resource","$q","SessionData","Configs",function($resource,$q,SessionData,Configs){this.buscarAgendas=function(idCaso){let deferr=$q.defer();return idCaso?$resource(Configs.getApiServer()+"/npj/agenda-caso?idCaso=:idCaso",{},{query:{method:"GET",isArray:!0}}).query({idCaso:idCaso},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.incluirAgenda=function(agendaDTO){let deferr=$q.defer();if(agendaDTO){let defer=$q.defer();return $resource(Configs.getApiServer()+"/npj/insere-agenda-caso",{},{query:{method:"POST",cache:!1}}).query(agendaDTO,function(result){defer.resolve(result)},function(err){defer.reject(err)}),defer.promise}return deferr.resolve(!1),deferr.promise}}]),angular.module("MyApp").service("CalendarioNpjService",["$resource","$q","Configs",function($resource,$q,Configs){this.listarEventosAluno=function(codPessoaAluno,unidadeFisica,equipe,papel,participante,tipo,numCaso){let deferr=$q.defer();var url=Configs.getApiServer()+"/npj/eventos?pessoaLogada=:codPessoaAluno";return null!=unidadeFisica&&(url+="&unidadeFisica=:unidadeFisica"),null!=equipe&&(url+="&equipe=:equipe"),null!=papel&&(url+="&papel=:papel"),null!=participante&&(url+="&participante=:participante"),null!=tipo&&(url+="&tipo=:tipo"),null!=numCaso&&(url+="&numCaso=:numCaso"),codPessoaAluno?$resource(url,{},{query:{method:"GET",isArray:!0}}).query({codPessoaAluno:codPessoaAluno,unidadeFisica:unidadeFisica,equipe:equipe,papel:papel,participante:participante,tipo:tipo,numCaso:numCaso},function(response){deferr.resolve(response)},function(){deferr.reject()}):deferr.resolve(!1),deferr.promise},this.listarEventosDia=function(codPessoaAluno,dataInicio){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/npj/eventos?pessoaLogada=:codPessoaAluno&dataInicio=:dataInicio",{},{query:{method:"GET",isArray:!0}}).query({codPessoaAluno:codPessoaAluno,dataInicio:dataInicio},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.listarEquipes=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/npj/equipes",{},{query:{method:"GET",isArray:!0}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.listarParticipantesEquipe=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/npj/participantes-equipe",{},{query:{method:"GET",isArray:!0}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise},this.obterModelosDoc=function(){let deferr=$q.defer();return $resource(Configs.getApiServer()+"/npj/modelos-tempestividade",{},{query:{method:"GET",isArray:!0}}).query({},function(response){deferr.resolve(response)},function(){deferr.reject()}),deferr.promise}}]);
//# sourceMappingURL=maps/app-1705683051799.min.js.map
